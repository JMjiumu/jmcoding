<template><div><h2 id="goå…¥é—¨" tabindex="-1"><a class="header-anchor" href="#goå…¥é—¨" aria-hidden="true">#</a> Goå…¥é—¨</h2>
<blockquote>
<p><strong>è¿™æ˜¯æˆ‘å‚ä¸ã€Œç¬¬äº”å±Šé’è®­è¥ ã€ä¼´å­¦ç¬”è®°åˆ›ä½œæ´»åŠ¨çš„ç¬¬ N å¤©</strong></p>
</blockquote>
<h2 id="åšå®¢" tabindex="-1"><a class="header-anchor" href="#åšå®¢" aria-hidden="true">#</a> åšå®¢</h2>
<p>mockæµ‹è¯•ï¼š<a href="https://juejin.cn/post/7169895196824436750" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7169895196824436750<ExternalLinkIcon/></a></p>
<p>å•ä¸ªå‡½æ•°æµ‹è¯•ï¼š<a href="https://blog.csdn.net/lanyang123456/article/details/112056027" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/lanyang123456/article/details/112056027<ExternalLinkIcon/></a></p>
<h2 id="goåŸºç¡€-åŸºç¡€è¯­æ³•-é’è®­è¥ç¬”è®°" tabindex="-1"><a class="header-anchor" href="#goåŸºç¡€-åŸºç¡€è¯­æ³•-é’è®­è¥ç¬”è®°" aria-hidden="true">#</a> GoåŸºç¡€-åŸºç¡€è¯­æ³• | é’è®­è¥ç¬”è®°</h2>
<h3 id="_1-ä»€ä¹ˆæ˜¯goè¯­è¨€" tabindex="-1"><a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯goè¯­è¨€" aria-hidden="true">#</a> 1. ä»€ä¹ˆæ˜¯goè¯­è¨€</h3>
<ol>
<li>é«˜æ€§èƒ½ã€é«˜å¹¶å‘</li>
<li>è¯­æ³•ç®€å•ã€å­¦ä¹ æ›²çº¿å¹³ç¼“</li>
<li>ä¸°å¯Œçš„æ ‡å‡†åº“</li>
<li>å®Œå–„çš„å·¥å…·é“¾</li>
<li>é™æ€é“¾æ¥</li>
<li>å¿«é€Ÿç¼–è¯‘</li>
<li>è·¨å¹³å°</li>
<li>åƒåœ¾å›æ”¶</li>
</ol>
<h3 id="_2-å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#_2-å…¥é—¨" aria-hidden="true">#</a> 2. å…¥é—¨</h3>
<h4 id="_2-1-å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-1-å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> 2.1 å¼€å‘ç¯å¢ƒ</h4>
<p><a href="https://golang.google.cn/" target="_blank" rel="noopener noreferrer">goè¯­è¨€ä¸‹è½½<ExternalLinkIcon/></a>ï¼Œç¯å¢ƒå˜é‡å•¥çš„ï¼Œç½‘ä¸Šä¸€å¤§å †ï¼Œè¿™é‡Œå°±ä¸çŒ®ä¸‘äº†ã€‚</p>
<ul>
<li>Golang(<a href="https://www.jetbrains.com/go/" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/go/<ExternalLinkIcon/></a>)</li>
<li>VScode(é‡Œé¢ä¸‹è½½Goæ’ä»¶<a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">https://code.visualstudio.com/<ExternalLinkIcon/></a>)</li>
</ul>
<h4 id="_2-2-hello-world" tabindex="-1"><a class="header-anchor" href="#_2-2-hello-world" aria-hidden="true">#</a> 2.2 Hello World</h4>
<blockquote>
<p>å¼€å§‹å¤§å®¶ç†Ÿæ‚‰çš„Hello Worldç¯èŠ‚ï¼Œ</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// mainåŒ…çš„ä¸€éƒ¨åˆ†ï¼Œç¨‹åºçš„å…¥å£åŒ…(å…¥å£æ–‡ä»¶)</span>
<span class="token keyword">package</span> main
<span class="token comment">// å¯¼å…¥fmtåŒ…ï¼Œä¸»è¦æ˜¯ç”¨æ¥å¾€å±å¹•è¾“å…¥è¾“å‡ºå­—ç¬¦ä¸²ã€æ ¼å¼åŒ–å­—ç¬¦ä¸²</span>
<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-å˜é‡" tabindex="-1"><a class="header-anchor" href="#_2-2-å˜é‡" aria-hidden="true">#</a> 2.2 å˜é‡</h4>
<blockquote>
<p>Goå’ŒJavaã€Cä¸€æ ·éƒ½æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ¯ä¸€ä¸ªå˜é‡éƒ½æœ‰å®ƒä»¬è‡ªå·±çš„å˜é‡ç±»å‹ã€‚</p>
<p>ä½†æ˜¯å’Œè®¸å¤šç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œå®ƒåœ¨å£°æ˜å˜é‡æ—¶å°†å˜é‡çš„ç±»å‹æ”¾åœ¨å˜é‡çš„åç§°ä¹‹åã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥é¿å…åƒCè¯­è¨€ä¸­é‚£æ ·å«ç³Šä¸æ¸…çš„å£°æ˜å½¢å¼ï¼Œä¾‹å¦‚ï¼š<code v-pre>int* a, b;</code> ã€‚å…¶ä¸­åªæœ‰ a æ˜¯æŒ‡é’ˆè€Œ b ä¸æ˜¯ã€‚å…¶ä¸­åªæœ‰ a æ˜¯æŒ‡é’ˆè€Œ b ä¸æ˜¯ã€‚å¦‚æœä½ æƒ³è¦è¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯æŒ‡é’ˆï¼Œåˆ™éœ€è¦å°†å®ƒä»¬åˆ†å¼€ä¹¦å†™ã€‚è€Œåœ¨ Go ä¸­ï¼Œåˆ™å¯ä»¥å’Œè½»æ¾åœ°å°†å®ƒä»¬éƒ½å£°æ˜ä¸ºæŒ‡é’ˆç±»å‹ï¼š</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">var</span> a<span class="token punctuation">,</span> b <span class="token operator">*</span><span class="token builtin">int</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote>
<blockquote>
<p>å˜é‡å£°æ˜ä¹Ÿæœ‰æ‰€ä¸åŒï¼š</p>
<ol>
<li>
<p>æ˜¾å¼å£°æ˜ï¼šé€šè¿‡varå…³é”®å­—å£°æ˜å˜é‡ï¼Œä¹Ÿå¯ä»¥ä¸åŠ æ•°æ®ç±»å‹ï¼Œç³»ç»Ÿä¼šè‡ªè¡Œæ¨å¯¼</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// var æ˜¯å£°æ˜å˜é‡çš„å…³é”®å­—ï¼Œname æ˜¯å˜é‡åï¼Œtype æ˜¯å˜é‡çš„ç±»å‹</span>
<span class="token comment">// var name type</span>
<span class="token keyword">var</span> key <span class="token builtin">string</span>
<span class="token keyword">var</span> value <span class="token builtin">int</span>

<span class="token comment">// å¤šä¸ªå£°æ˜</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>
	firstName<span class="token punctuation">,</span> lastName <span class="token builtin">string</span>
    age <span class="token builtin">int</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>éšå¼å£°æ˜ï¼šç®€åŒ–æ˜¾å¼å£°æ˜ï¼Œç§»é™¤äº†varå…³é”®å­—</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// name æ˜¯å˜é‡åï¼Œvalue æ˜¯å˜é‡çš„æ•°å€¼</span>
<span class="token comment">// name := value</span>
num <span class="token operator">:=</span> <span class="token number">100</span>
name <span class="token operator">:=</span> <span class="token string">"Tom"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€èˆ¬æ¥è¯´éƒ½æ˜¯ç”¨éšå¼å£°æ˜ï¼Œä½†æ˜¯éšå¼å£°æ˜åªèƒ½åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ï¼Œå¦‚æœè¦åœ¨å‡½æ•°ä½“å¤–å£°æ˜å˜é‡åªèƒ½ä½¿ç”¨æ˜¾å¼å£°æ˜ã€‚</p>
</li>
</ol>
</blockquote>
<p>Goè¯­è¨€çš„åŸºæœ¬ç±»å‹æœ‰ï¼š</p>
<ul>
<li>bool</li>
<li>string</li>
<li>intã€int8ã€int16ã€int32ã€int64</li>
<li>uintã€uint8ã€uint16ã€uint32ã€uint64ã€uintptr</li>
<li>byte // uint8 çš„åˆ«å</li>
<li>rune // int32 çš„åˆ«å ä»£è¡¨ä¸€ä¸ª Unicode ç </li>
<li>float32ã€float64</li>
<li>complex64ã€complex128</li>
</ul>
<blockquote>
<p>å½“ä¸€ä¸ªå˜é‡è¢«å£°æ˜ä¹‹åï¼Œç³»ç»Ÿè‡ªåŠ¨èµ‹äºˆå®ƒè¯¥ç±»å‹çš„é›¶å€¼ï¼šint ä¸º 0ï¼Œfloat ä¸º 0.0ï¼Œbool ä¸º falseï¼Œstring ä¸ºç©ºå­—ç¬¦ä¸²ï¼ŒæŒ‡é’ˆä¸º nil ç­‰ã€‚<strong>æ‰€æœ‰çš„å†…å­˜åœ¨ Go ä¸­éƒ½æ˜¯ç»è¿‡åˆå§‹åŒ–çš„ã€‚</strong></p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"math"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ˜¾å¼å£°æ˜</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">"initial"</span>
    <span class="token keyword">var</span> b<span class="token punctuation">,</span>c <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>
    <span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">var</span> e <span class="token builtin">float64</span>
    <span class="token comment">// ä¹Ÿå¯è¿›è¡Œæ‰¹é‡å£°æ˜å˜é‡</span>
    <span class="token keyword">var</span> <span class="token punctuation">(</span>
        a <span class="token operator">=</span> <span class="token string">"initial"</span>
        b<span class="token punctuation">,</span>c <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>
        d <span class="token operator">=</span> <span class="token boolean">true</span>
        e <span class="token builtin">float64</span>
    <span class="token punctuation">)</span>
    <span class="token comment">// éšå¼å£°æ˜</span>
    f <span class="token operator">:=</span> <span class="token function">float32</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    g <span class="token operator">:=</span> a <span class="token operator">+</span> <span class="token string">"foo"</span>
    <span class="token comment">// Goä¸­ä¸å…è®¸å˜é‡ä¸è¢«ä½¿ç”¨ï¼Œå¦‚æœä½ å®šä¹‰äº†ä¸ä½¿ç”¨ä¼šæŠ¥é”™</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token comment">// initial 1 2 true 0 0</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token comment">// initialfoo</span>
    <span class="token comment">// Goä¸­çš„å¸¸é‡å°±æ˜¯æŠŠvaræ”¹æˆconstantï¼Œæ²¡æœ‰ç‰¹å®šçš„ç±»å‹ï¼Œè€Œæ˜¯æ ¹æ®ä½¿ç”¨çš„ä¸Šä¸‹æ–‡æ¥è‡ªåŠ¨ç¡®å®šç±»å‹</span>
    <span class="token keyword">const</span> s <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"JMjiumu"</span> 
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token number">500000000</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> <span class="token number">3e20</span><span class="token operator">/</span>h
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>h<span class="token punctuation">,</span>i<span class="token punctuation">,</span>math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">,</span>math<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// JMjiumu 500000000 6e+11 -0.28470407323754404 0.7591864109375384</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-if-else" tabindex="-1"><a class="header-anchor" href="#_2-3-if-else" aria-hidden="true">#</a> 2.3 if-else</h4>
<blockquote>
<p>å’ŒCã€C++å·®ä¸å¤šï¼Œä¸è¿‡ifåé¢ä¸éœ€è¦å°æ‹¬å·ï¼Œå¦‚æœåŠ äº†ä¿å­˜æ—¶ä¼šè‡ªåŠ¨å¸®ä½ åˆ é™¤ï¼Œå¹¶ä¸”ifåçš„è¯­å¥å—å¿…é¡»è¦åŠ å¤§æ‹¬å·ï¼Œä¸åŠ ç¼–è¯‘éƒ½ä¼šå‡ºé”™ã€‚</p>
<p>åœ¨åˆ¤æ–­è¯­å¥å‰è¿˜å¯ä»¥æ·»åŠ ä¸€äº›ç®€å•çš„æ‰§è¡Œè¯­å¥ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// å°æ‹¬å·</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>âŒå“’å’©å“’å’©
<span class="token keyword">if</span> <span class="token number">7</span><span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>âœ…
<span class="token comment">// å¤§æ‹¬å·</span>
<span class="token keyword">if</span> <span class="token number">7</span><span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hhh"</span><span class="token punctuation">)</span> âŒå“’å’©å‘¦
<span class="token keyword">if</span> <span class="token number">7</span><span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>âœ…
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hhh"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token number">7</span><span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"7 is even"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"7 is odd"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ‰§è¡Œç®€å•è¯­å¥</span>
    <span class="token keyword">if</span> num <span class="token operator">:=</span> <span class="token number">9</span><span class="token punctuation">;</span> num <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"is negative"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> num <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"has 1 digit"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string">"has multiple digits"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#_2-4-å¾ªç¯" aria-hidden="true">#</a> 2.4 å¾ªç¯</h4>
<blockquote>
<p>Goè¯­è¨€ä¸­æ²¡æœ‰whileå¾ªç¯ï¼Œæ²¡æœ‰do-whileå¾ªç¯ï¼Œåªæœ‰forå¾ªç¯ï¼ŒåŒæ ·ä¸ç”¨åŠ å°æ‹¬å·ï¼Œå…¶ä½™å’ŒCã€C++ç­‰åŸºæœ¬ç›¸åŒï¼Œå¯ä»¥ç”¨breakè·³å‡ºï¼Œcontinueç»§ç»­å¾ªç¯ç­‰ç­‰æ“ä½œã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    i <span class="token operator">:=</span> <span class="token number">1</span>
    <span class="token comment">// ç›¸å½“äºwhileæ¡ä»¶ä¸ºtrueï¼Œæ­»å¾ªç¯</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"loop"</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">7</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">9</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> n <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> n<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> n<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">&lt;=</span> <span class="token number">3</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-5-switch" tabindex="-1"><a class="header-anchor" href="#_2-5-switch" aria-hidden="true">#</a> 2.5 switch</h4>
<blockquote>
<ol>
<li>switchæ²¡æœ‰breakä¸ä¼šç»§ç»­å¾€åæ‰§è¡Œï¼Œè€Œæ˜¯æ‰¾åˆ°ç›®æ ‡åç›´æ¥ä¼šè¿›è¡Œé€€å‡º</li>
<li>switchåé¢å¯ä»¥ä½¿ç”¨ä»»æ„çš„å˜é‡ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€ç»“æ„ä½“ï¼‰ï¼Œç”šè‡³å¯ä»¥å–ä»£ä»»ä½•if-elseè¯­å¥ï¼Œä¹Ÿå¯ä»¥ä¸åŠ å¦‚ä½•å˜é‡ï¼Œåœ¨caseé‡Œå†™æ¡ä»¶åˆ†æ”¯ï¼Œè¿™æ ·æ¯”ç”¨å¤šä¸ªif-elseé€»è¾‘ä¼šæ›´åŠ æ¸…æ™°</li>
</ol>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> <span class="token number">5</span>
    <span class="token keyword">switch</span> a <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­¦Goçš„ç¬¬1å¤©..."</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­¦Goçš„ç¬¬5å¤©..."</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token number">10</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­¦Goçš„ç¬¬10å¤©..."</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­¦ä¸ªé”¤å­ï¼Œä¸å­¦äº†ğŸ¥³"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    t <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">switch</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> t<span class="token punctuation">.</span><span class="token function">Hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">12</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"It's before noon"</span><span class="token punctuation">)</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"It's after noon"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-6-æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#_2-6-æ•°ç»„" aria-hidden="true">#</a> 2.6 æ•°ç»„</h4>
<blockquote>
<p>æ•°ç»„å’Œå…¶ä»–è¯­è¨€å¤§ä½“ç›¸åŒï¼Œä½†æ˜¯åœ¨çœŸå®ä¸šåŠ¡ä»£ç é‡Œé¢ï¼Œæˆ‘ä»¬å¾ˆå°‘ç›´æ¥ä½¿ç”¨æ•°ç»„ï¼Œå› ä¸ºå®ƒé•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬ç”¨çš„æ›´å¤šçš„æ˜¯åˆ‡ç‰‡</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 0 100 5</span>

    b <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment">// [1 2 3 4 5]</span>

    <span class="token keyword">var</span> twoD <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{</span>
            twoD<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> j
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>twoD<span class="token punctuation">)</span><span class="token comment">// [[0 1 2] [1 2 3]]æœ‰ä¸€è¯´ä¸€ï¼Œæ²¡æœ‰é€—å·çœ‹å¾—æœ‰ç‚¹ä¸ä¹ æƒ¯ğŸ˜‚</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-7-åˆ‡ç‰‡" tabindex="-1"><a class="header-anchor" href="#_2-7-åˆ‡ç‰‡" aria-hidden="true">#</a> 2.7 åˆ‡ç‰‡</h4>
<blockquote>
<p>åˆ‡ç‰‡ä¸åŒäºæ•°ç»„å¯ä»¥ä»»æ„æ›´æ”¹é•¿åº¦ï¼Œä¹Ÿæœ‰æ›´å¤šä¸°å¯Œçš„æ“ä½œï¼Œæœ‰ç‚¹åƒPythonçš„åˆ‡ç‰‡ã€‚</p>
<p>sliceçš„å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„å­˜å‚¨äº†ä¸€ä¸ªé•¿åº¦å’Œä¸€ä¸ªå®¹é‡ï¼ŒåŠ ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼ŒGo æ”¯æŒåˆ‡ç‰‡è¿ç®—ç¬¦ <code v-pre>s[i:p]</code>ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code v-pre>s</code> è¡¨ç¤ºæ•°ç»„ã€‚</li>
<li><code v-pre>i</code> è¡¨ç¤ºæŒ‡å‘è¦æ·»åŠ åˆ°æ–°åˆ‡ç‰‡çš„åŸºç¡€æ•°ç»„ï¼ˆæˆ–å¦ä¸€ä¸ªåˆ‡ç‰‡ï¼‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚ å˜é‡ <code v-pre>i</code> å¯¹åº”äºæ•°ç»„ <code v-pre>array[i]</code> ä¸­ç´¢å¼•ä½ç½® <code v-pre>i</code> å¤„çš„å…ƒç´ ã€‚ è¯·è®°ä½ï¼Œæ­¤å…ƒç´ ä¸ä¸€å®šæ˜¯åŸºç¡€æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´  <code v-pre>array[0]</code>ã€‚</li>
<li><code v-pre>p</code> è¡¨ç¤ºåˆ›å»ºæ–°åˆ‡ç‰‡æ—¶è¦ä½¿ç”¨çš„åŸºç¡€æ•°ç»„ä¸­çš„å…ƒç´ æ•°ç›®ã€‚ å˜é‡ <code v-pre>p</code> å¯¹åº”äºå¯ç”¨äºæ–°åˆ‡ç‰‡çš„åŸºç¡€æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚ å¯åœ¨ä½ç½® <code v-pre>array[i+1]</code> æ‰¾åˆ°åŸºç¡€æ•°ç»„ä¸­ä½ç½® <code v-pre>p</code> å¤„çš„å…ƒç´ ã€‚ è¯·æ³¨æ„ï¼Œæ­¤å…ƒç´ ä¸ä¸€å®šæ˜¯åŸºç¡€æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´  <code v-pre>array[len(array)-1]</code>ã€‚</li>
</ul>
<p>åˆ‡ç‰‡å®¹é‡æ˜¯<code v-pre>p - i</code>ï¼Œä½†æ˜¯åˆ‡ç‰‡é•¿åº¦æ˜¯<code v-pre>len(s) - i</code>ï¼Œä¸è¦å¿˜è®°<code v-pre>i</code>æ˜¯æŒ‡é’ˆï¼Œ<code v-pre>p</code>åªæ˜¯æ˜¾ç¤ºçš„æœ«å°¾è€Œå·²ï¼Œå®é™…ä¸Šçš„æœ«å°¾æ˜¯æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚</p>
<p>åˆ‡ç‰‡å¯ä»¥é€šè¿‡å†…ç½®å‡½æ•°<code v-pre>make()</code>æ¥åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åƒæ•°ç»„ä¸€æ ·åˆ›å»ºï¼š</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// nameä¸ºå˜é‡åï¼Œtypeä¸ºæ•°æ®ç±»å‹ï¼Œlenä¸ºåˆ‡ç‰‡é•¿åº¦ï¼Œcapä¸ºåˆ‡ç‰‡å®¹é‡</span>
name <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">type</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">,</span> <span class="token builtin">cap</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> name <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
name <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ‡ç‰‡ä¹Ÿå¯ä»¥é€šè¿‡å†…ç½®å‡½æ•°<code v-pre>append()</code>æ¥åŠ¨æ€åœ°å¢åŠ å…ƒç´ </p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code>slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
slice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment">// slice[1 2 3 4 5]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä½¿ç”¨makeåˆ›å»ºåˆ‡ç‰‡</span>
    s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"a"</span>
    s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"b"</span>
    s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"c"</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"get:"</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment">// c</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"len:"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
    <span class="token comment">// æ·»åŠ å…ƒç´ </span>
    s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">)</span>
    s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"f"</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// [a b c d e f]</span>
    <span class="token comment">// åˆ›å»ºåˆ‡ç‰‡</span>
    c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">copy</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// [a b c d e f]</span>
    <span class="token comment">// å°†sä»2åˆ‡åˆ°5</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [c d e]</span>
    <span class="token comment">// :å‰æ²¡æœ‰æ•°å€¼é»˜è®¤ä»0å¼€å§‹</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// [a b c d e]</span>
    <span class="token comment">// :åæ²¡æœ‰æ•°å€¼é»˜è®¤åˆ°æœ€åä¸€ä½</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// [c d e f]</span>
    <span class="token comment">// åƒåˆ›å»ºæ•°ç»„ä¸€æ ·åˆ›å»ºåˆ‡ç‰‡ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åšæ˜¯æ•°ç»„</span>
    good <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"g"</span><span class="token punctuation">,</span> <span class="token string">"o"</span><span class="token punctuation">,</span> <span class="token string">"o"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>good<span class="token punctuation">)</span> <span class="token comment">// [g o o d]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-8-map" tabindex="-1"><a class="header-anchor" href="#_2-8-map" aria-hidden="true">#</a> 2.8 map</h4>
<blockquote>
<p>mapï¼ˆæ˜ å°„ï¼‰åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€é‡Œé¢ï¼Œå®ƒå¯èƒ½å¯ä»¥å«åšå“ˆå¸Œæˆ–è€…å­—å…¸ï¼Œmapæ˜¯å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­æœ€é¢‘ç¹ç”¨åˆ°çš„æ•°æ®ç»“æ„ã€‚</p>
<p>åŒæ ·æ˜¯ä½¿ç”¨<code v-pre>make</code>è¿›è¡Œåˆ›å»ºï¼š</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// ç¬¬ä¸€ä¸ªç±»å‹ä¸ºkeyçš„ç±»å‹ï¼Œç¬¬äºŒä¸ªä¸ºvalueçš„ç±»å‹</span>
temp <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥ä»é‡Œé¢å»å­˜å‚¨æˆ–è€…å–å‡ºé”®å€¼å¯¹ã€‚å¯ä»¥ç”¨delete ä»é‡Œé¢åˆ é™¤é”®å€¼å¯¹ï¼š</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code>temp <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
<span class="token comment">// æ·»åŠ ï¼Œç›´æ¥æ·»åŠ </span>
temp<span class="token punctuation">[</span><span class="token string">"ä¹ç‰§"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
temp<span class="token punctuation">[</span><span class="token string">"Tom"</span><span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">]</span>
<span class="token comment">// åˆ é™¤ï¼Œä½¿ç”¨deleteå‡½æ•°</span>
<span class="token function">delete</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token string">"Tom"</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>golangçš„mapæ˜¯å®Œå…¨æ— åºçš„ï¼Œéå†çš„æ—¶å€™ä¸ä¼šæŒ‰ç…§å­—æ¯é¡ºåºï¼Œä¹Ÿä¸ä¼šæŒ‰ç…§æ’å…¥é¡ºåºè¾“å‡ºï¼Œè€Œæ˜¯éšæœºé¡ºåºã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    m<span class="token punctuation">[</span><span class="token string">"one"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    m<span class="token punctuation">[</span><span class="token string">"two"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>           <span class="token comment">// map[one:1 two:2]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// 2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">"one"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">// 1</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">"unknow"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>

    r<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">"unknow"</span><span class="token punctuation">]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> ok<span class="token punctuation">)</span> <span class="token comment">// 0 false</span>

    <span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"one"</span><span class="token punctuation">)</span>

    m2 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">"one"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"two"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
    <span class="token keyword">var</span> m3 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">"one"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"two"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m2<span class="token punctuation">,</span> m3<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-9-range" tabindex="-1"><a class="header-anchor" href="#_2-9-range" aria-hidden="true">#</a> 2.9 range</h4>
<blockquote>
<p>å¯¹äºä¸€ä¸ªsliceæˆ–è€…ä¸€ä¸ªmapçš„è¯ï¼Œå¯ä»¥ç”¨rangeæ¥å¿«é€Ÿè¿½å†ï¼Œè¿™æ ·ä»£ç èƒ½å¤Ÿæ›´åŠ ç®€æ´ã€‚rangeéå†çš„æ—¶å€™ï¼Œå¯¹äºæ•°ç»„ä¼šè¿”å›ä¸¤ä¸ªå€¼ã€‚ç¬¬ä¸€ä¸ªæ˜¯ç´¢å¼•ï¼Œç¬¬äºŒä¸ªæ˜¯å¯¹åº”ä½ç½®çš„å€¼ã€‚å¦‚æœæˆ‘ä»¬ä¸éœ€è¦ç´¢å¼•çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹åˆ’çº¿æ¥å¿½ç•¥ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
    sum <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> num
        <span class="token keyword">if</span> num <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"index:"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token string">"num:"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span> <span class="token comment">// index: 0 num: 2</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 9</span>

    m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">:</span> <span class="token string">"B"</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token comment">// b 8; a A</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> k <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token comment">// key a; key b</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-10-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_2-10-å‡½æ•°" aria-hidden="true">#</a> 2.10 å‡½æ•°</h4>
<blockquote>
<p>è¿™ä¸ªæ˜¯Golangé‡Œé¢ä¸€ä¸ªç®€å•çš„å®ç°ä¸¤ä¸ªå˜é‡ç›¸åŠ çš„å‡½æ•°ã€‚Golangå’Œå…¶ä»–å¾ˆå¤šè¯­è¨€ä¸ä¸€æ ·çš„æ˜¯ï¼Œå˜æ˜Ÿç±»å‹æ˜¯åç½®çš„ã€‚</p>
<p>Golangé‡Œé¢çš„å‡½æ•°åŸç”Ÿæ”¯æŒè¿”å›å¤šä¸ªå€¼ã€‚åœ¨å®é™…çš„ä¸šåŠ¡é€»è¾‘ä»£ç é‡Œé¢å‡ ä¹æ‰€æœ‰çš„å‡½æ•°éƒ½è¿”å›ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªæ˜¯çœŸæ­£çš„è¿”å›ç»“æœï¼Œç¬¬äºŒä¸ªå€¼æ˜¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">add2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">exists</span><span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> k <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>v <span class="token builtin">string</span><span class="token punctuation">,</span> ok <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v<span class="token punctuation">,</span> ok <span class="token operator">=</span> m<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
    <span class="token keyword">return</span> v<span class="token punctuation">,</span> ok
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">:=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 3</span>

    v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token function">exists</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"A"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> ok<span class="token punctuation">)</span> <span class="token comment">// A True</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-11-æŒ‡é’ˆ" tabindex="-1"><a class="header-anchor" href="#_2-11-æŒ‡é’ˆ" aria-hidden="true">#</a> 2.11 æŒ‡é’ˆ</h4>
<blockquote>
<p>goé‡Œé¢ä¹Ÿæ”¯æŒæŒ‡é’ˆã€‚å½“ç„¶ï¼Œç›¸æ¯”Cå’ŒC++é‡Œé¢çš„æŒ‡é’ˆï¼Œæ”¯æŒçš„æ“ä½œå¾ˆæœ‰é™ã€‚æŒ‡é’ˆçš„ä¸€ä¸ªä¸»è¦ç”¨é€”å°±æ˜¯å¯¹äºä¼ å…¥å‚æ•°è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°è¯•å›¾æŠŠä¸€ä¸ªå˜é‡+2ï¼Œä½†æ˜¯å•çº¯åƒä¸Šé¢è¿™ç§å†™æ³•å…¶å®æ˜¯æ— æ•‘çš„ï¼Œå› ä¸ºä¼ å…¥å‡½æ•°çš„å‚æ•°å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ‹·è´ï¼Œé‚£ä¹Ÿè¯´è¿™ä¸ª+2ï¼Œæ˜¯å¯¹é‚£ä¸ªæ‹·è´è¿›è¡Œäº†+2ï¼Œå¹¶ä¸èµ·ä½œç”¨ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦èµ·ä½œç”¨çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŠŠé‚£ä¸ªç±»å‹å†™æˆæŒ‡é’ˆç±»å‹ï¼Œé‚£ä¹ˆä¸ºäº†ç±»å‹åŒ¹é…ï¼Œè°ƒç”¨çš„æ—¶å€™ä¼šåŠ ä¸€ä¸ª&amp;ç¬¦å·ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">add2</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">+=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">add2ptr</span><span class="token punctuation">(</span>n <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span>n <span class="token operator">+=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    n <span class="token operator">:=</span> <span class="token number">5</span>
    <span class="token function">add2</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 5</span>
    <span class="token function">add2ptr</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 7</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-12-ç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#_2-12-ç»“æ„ä½“" aria-hidden="true">#</a> 2.12 ç»“æ„ä½“</h4>
<blockquote>
<p>ç»“æ„ä½“çš„è¯æ˜¯å¸¦ç±»å‹çš„å­—æ®µçš„é›†åˆï¼Œæ¯”åŠ è¿™é‡Œuserç»“æ„åŒ…å«äº†ä¸¤ä¸ªå­—æ®µ,ï¼Œnameå’Œpasswordï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç»“æ„ä½“çš„åç§°å»åˆå§‹åŒ–ä¸€ä¸ªç»“æ„ä½“å˜é‡ï¼Œæ„é€ çš„æ—¶å€™éœ€è¦ä¼ å…¥æ¯ä¸ªå­—æ®µçš„åˆå§‹å€¼ã€‚ä¹Ÿå¯ä»¥ç”¨è¿™ç§é”®å€¼å¯¹çš„æ–¹å¼å»æŒ‡å®šåˆå§‹å€¼ï¼Œè¿™ç§å¯ä»¥åªå¯¹ä¸€éƒ¨ä»½å­—æ®µè¿›è¡Œåˆå§‹åŒ–ã€‚åŒæ ·çš„ç»“æ„ä½“æˆ‘ä»¬ä¹Ÿèƒ½æ”¯æŒæŒ‡é’ˆï¼Œè¿™æ ·èƒ½å¤Ÿå®ç°å¯¹äºç»“æ„ä½“çš„ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥åœ¨æŸäº›æƒ…å†µä¸‹é¿å…ä¸€äº›å¤§ç»“æ„ä½“çš„æ‹·è´å¼€é”€ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name     <span class="token builtin">string</span>
    password <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> user<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"wang"</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">"1024"</span><span class="token punctuation">}</span>
    b <span class="token operator">:=</span> user<span class="token punctuation">{</span><span class="token string">"wang"</span><span class="token punctuation">,</span> <span class="token string">"1024"</span><span class="token punctuation">}</span>
    c <span class="token operator">:=</span> user<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"wang"</span><span class="token punctuation">}</span>
    c<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token string">"1024"</span>
    <span class="token keyword">var</span> d user
    d<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"wang"</span>
    d<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token string">"1024"</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span>                 <span class="token comment">// {wang 1024} {wang 1024} {wang 1024} {wang 1024}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">checkPassword</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// false</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">checkPassword2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">checkPassword</span><span class="token punctuation">(</span>u user<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> u<span class="token punctuation">.</span>password <span class="token operator">==</span> password
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">checkPassword2</span><span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> u<span class="token punctuation">.</span>password <span class="token operator">==</span> password
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-13-ç»“æ„ä½“æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2-13-ç»“æ„ä½“æ–¹æ³•" aria-hidden="true">#</a> 2.13 ç»“æ„ä½“æ–¹æ³•</h4>
<blockquote>
<p>åœ¨Golangé‡Œé¢å¯ä»¥ä¸ºç»“æ„ä½“å»å®šä¹‰ä¸€äº›æ–¹æ³•ã€‚ä¼šæœ‰ä¸€ç‚¹ç±»ä¼¼å…¶ä»–è¯­è¨€é‡Œé¢çš„ç±»æˆå‘˜å‡½æ•°ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name     <span class="token builtin">string</span>
    password <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u user<span class="token punctuation">)</span> <span class="token function">checkPassword</span><span class="token punctuation">(</span>password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> u<span class="token punctuation">.</span>password <span class="token operator">==</span> password
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">resetPassword</span><span class="token punctuation">(</span>password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    u<span class="token punctuation">.</span>password <span class="token operator">=</span> password
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> user<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"wang"</span><span class="token punctuation">,</span> password<span class="token punctuation">:</span> <span class="token string">"1024"</span><span class="token punctuation">}</span>
    a<span class="token punctuation">.</span><span class="token function">resetPassword</span><span class="token punctuation">(</span><span class="token string">"2048"</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">checkPassword</span><span class="token punctuation">(</span><span class="token string">"2048"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-14-é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-14-é”™è¯¯å¤„ç†" aria-hidden="true">#</a> 2.14 é”™è¯¯å¤„ç†</h4>
<h4 id="_2-15-å­—ç¬¦ä¸²æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2-15-å­—ç¬¦ä¸²æ“ä½œ" aria-hidden="true">#</a> 2.15 å­—ç¬¦ä¸²æ“ä½œ</h4>
<blockquote>
<p>å…¶å®ä¸‹é¢éƒ½çœ‹å¾—æ‡‚çš„ï¼Œå’Œå…¶ä»–è¯­è¨€éƒ½å¾ˆç›¸ä¼¼</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"strings"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> <span class="token string">"hello"</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"ll"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment">// true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"l"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token comment">// 2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"he"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token comment">// true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"llo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token comment">// true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"ll"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                   <span class="token comment">// 2</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"he"</span><span class="token punctuation">,</span> <span class="token string">"llo"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// he-llo</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Repeat</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                     <span class="token comment">// hellohello</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment">// hEllo</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">"a-b-c"</span><span class="token punctuation">,</span> <span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token comment">// [a b c]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>                       <span class="token comment">// hello</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>                       <span class="token comment">// HELLO</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>                                   <span class="token comment">// 5</span>
    b <span class="token operator">:=</span> <span class="token string">"ä½ å¥½"</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-16-å­—ç¬¦ä¸²æ ¼å¼åŒ–" tabindex="-1"><a class="header-anchor" href="#_2-16-å­—ç¬¦ä¸²æ ¼å¼åŒ–" aria-hidden="true">#</a> 2.16 å­—ç¬¦ä¸²æ ¼å¼åŒ–</h4>
<blockquote>
<p>%væ¥æ‰“å°ä»»æ„ç±»å‹çš„å˜é‡ï¼Œå¯ä»¥ç”¨%+væ‰“å°è¯¦ç»†ç»“æœï¼Œ%#våˆ™æ›´è¯¦ç»†</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> point <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">,</span> y <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s <span class="token operator">:=</span> <span class="token string">"hello"</span>
    n <span class="token operator">:=</span> <span class="token number">123</span>
    p <span class="token operator">:=</span> point<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token comment">// hello 123</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>    <span class="token comment">// {1 2}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"s=%v\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>  <span class="token comment">// s=hello</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"n=%v\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>  <span class="token comment">// n=123</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p=%v\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span>  <span class="token comment">// p={1 2}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p=%+v\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token comment">// p={x:1 y:2}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"p=%#v\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token comment">// p=main.point{x:1, y:2}</span>

    f <span class="token operator">:=</span> <span class="token number">3.141592653</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>          <span class="token comment">// 3.141592653</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%.2f\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span> <span class="token comment">// 3.14</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-17-jsonå¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-17-jsonå¤„ç†" aria-hidden="true">#</a> 2.17 JSONå¤„ç†</h4>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨<code v-pre>json.Marshal</code>å‡½æ•°å°†å­—æ®µè¿›è¡Œåºåˆ—åŒ–ï¼Œåºåˆ—åŒ–ä¹‹åçš„å­—ç¬¦ä¸²ä¹Ÿèƒ½å¤Ÿç”¨<code v-pre>JSON.unmarshaler</code>å»ååºåˆ—åŒ–åˆ°ä¸€ä¸ªç©ºçš„å˜é‡é‡Œé¢</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"encoding/json"</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> userInfo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name  <span class="token builtin">string</span>
	Age   <span class="token builtin">int</span> <span class="token string">`json:"age"`</span>
	Hobby <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> userInfo<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"wang"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span> Hobby<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"Golang"</span><span class="token punctuation">,</span> <span class="token string">"TypeScript"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>         <span class="token comment">// [123 34 78 97...]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {"Name":"wang","age":18,"Hobby":["Golang","TypeScript"]}</span>

	buf<span class="token punctuation">,</span> err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">MarshalIndent</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"\t"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">var</span> b userInfo
	err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token comment">// main.userInfo{Name:"wang", Age:18, Hobby:[]string{"Golang", "TypeScript"}}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-18-æ—¶é—´å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-18-æ—¶é—´å¤„ç†" aria-hidden="true">#</a> 2.18 æ—¶é—´å¤„ç†</h4>
<blockquote>
<p>Goé‡ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä½¿ç”¨timeæ¥å¤„ç†æ—¶é—´æœ‰å…³æ“ä½œï¼Œæœ‰éå¸¸å¤šæœ‰å…³æ—¶é—´çš„æ–¹æ³•ï¼Œå¾—åˆ°çš„æ—¶é—´éƒ½æ˜¯æ—¶é—´æˆ³ï¼Œä¹Ÿå°±æ˜¯ä»¥çº³ç§’ä¸ºå•ä½çš„ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    now <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span> <span class="token comment">// 2022-03-27 18:04:59.433297 +0800 CST m=+0.000087933</span>
    t <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span>
    t2 <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>                                                  <span class="token comment">// 2022-03-27 01:25:36 +0000 UTC</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Minute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2022 March 27 1 25</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"2006-01-02 15:04:05"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token comment">// 2022-03-27 01:25:36</span>
    diff <span class="token operator">:=</span> t2<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>diff<span class="token punctuation">)</span>                           <span class="token comment">// 1h5m0s</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>diff<span class="token punctuation">.</span><span class="token function">Minutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> diff<span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 65 3900</span>
    t3<span class="token punctuation">,</span> err <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token string">"2006-01-02 15:04:05"</span><span class="token punctuation">,</span> <span class="token string">"2022-03-27 01:25:36"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t3 <span class="token operator">==</span> t<span class="token punctuation">)</span>    <span class="token comment">// true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1648738080</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-19-æ•°å­—è§£æ" tabindex="-1"><a class="header-anchor" href="#_2-19-æ•°å­—è§£æ" aria-hidden="true">#</a> 2.19 æ•°å­—è§£æ</h4>
<blockquote>
<p>æœ‰å…³å­—ç¬¦ä¸²ä¸æ•°å­—ä¹‹é—´è½¬æ¢å°±è¦ç”¨åˆ°<code v-pre>strconv</code>åŒ…äº†ï¼Œå®ƒæä¾›äº†è®¸å¤šå‡½æ•°æ¥å®ç°å­—ç¬¦ä¸²å’Œæ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ä¹‹é—´çš„è½¬æ¢</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    f<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span><span class="token string">"1.234"</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token comment">// 1.234</span>

    n<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 111</span>

    n<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span><span class="token string">"0x1000"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 4096</span>

    n2<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token comment">// 123</span>

    n2<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span><span class="token string">"AAA"</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n2<span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">// 0 strconv.Atoi: parsing "AAA": invalid syntax</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-20-è¿›ç¨‹ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2-20-è¿›ç¨‹ä¿¡æ¯" aria-hidden="true">#</a> 2.20 è¿›ç¨‹ä¿¡æ¯</h4>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"os"</span>
    <span class="token string">"os/exec"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// go run example/20-env/main.go a b c d</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span>           <span class="token comment">// [/var/folders/8p/n34xxfnx38dg8bv_x8l62t_m0000gn/T/go-build3406981276/b001/exe/main a b c d]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">Getenv</span><span class="token punctuation">(</span><span class="token string">"PATH"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// /usr/local/go/bin...</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">Setenv</span><span class="token punctuation">(</span><span class="token string">"AA"</span><span class="token punctuation">,</span> <span class="token string">"BB"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> exec<span class="token punctuation">.</span><span class="token function">Command</span><span class="token punctuation">(</span><span class="token string">"grep"</span><span class="token punctuation">,</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token string">"/etc/hosts"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CombinedOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 127.0.0.1       localhost</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-é¡¹ç›®å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_3-é¡¹ç›®å®æˆ˜" aria-hidden="true">#</a> 3. é¡¹ç›®å®æˆ˜</h3>
<h4 id="_3-1-çŒœè°œæ¸¸æˆ" tabindex="-1"><a class="header-anchor" href="#_3-1-çŒœè°œæ¸¸æˆ" aria-hidden="true">#</a> 3.1 çŒœè°œæ¸¸æˆ</h4>
<blockquote>
<p>åœ¨è¿™ä¸ªæ¸¸æˆé‡Œé¢ï¼Œç¨‹åºé¦–å…ˆä¼šç”Ÿæˆä¸€ä¸ªä»‹äº1åˆ°100ä¹‹é—´çš„éšæœºæ•´æ•°ï¼Œç„¶åæç¤ºç©å®¶è¿›è¡ŒçŒœæµ‹ã€‚ç©å®¶æ¯æ¬¡è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œç¨‹åºä¼šå‘Šè¯‰ç©å®¶è¿™ä¸ªçŒœæµ‹çš„å€¼æ˜¯é«˜äºè¿˜æ˜¯ä½äºé‚£ä¸ªç§˜å¯†çš„éšæœºæ•°ï¼Œå¹¶ä¸”è®©ç©å®¶å†æ¬¡çŒœæµ‹ã€‚å¦‚æœçŒœå¯¹äº†ï¼Œå°±å‘Šè¯‰ç©å®¶èƒœåˆ©å¹¶ä¸”é€€å‡ºç¨‹åºã€‚</p>
</blockquote>
<h5 id="_3-1-1-ç”Ÿæˆéšæœºæ•°" tabindex="-1"><a class="header-anchor" href="#_3-1-1-ç”Ÿæˆéšæœºæ•°" aria-hidden="true">#</a> 3.1.1 ç”Ÿæˆéšæœºæ•°</h5>
<blockquote>
<p><code v-pre>math/rand</code>æ˜¯ Go è¯­è¨€ä¸­ä¸“é—¨ç”¨æ¥åšä¸éšæœºæ•°ç›¸å…³æ“ä½œçš„åŒ…ï¼Œä¸»è¦æœ‰ç”Ÿæˆéšæœºæ•°ã€éšæœºç§å­ç­‰æ–¹æ³•</p>
<ul>
<li><code v-pre>rand.Intn(n)</code>ç”Ÿæˆä¸€ä¸ªå€¼åœ¨ [0, n) åŒºé—´çš„éšæœºæ•´æ•°</li>
<li><code v-pre>rand.Seed(seed)</code>ä»¥è®¾ç½®éšæœºç§å­ï¼Œseed ä¸º <code v-pre>int64</code> ç±»å‹</li>
</ul>
<p><code v-pre>time.Now().UnixNano()</code>æ˜¯è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆä»¥çº³ç§’ä¸ºå•ä½ï¼‰</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"math/rand"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è§„å®šéšæœºæ•°çš„æœ€å¤§åŒºé—´èŒƒå›´</span>
    maxNum <span class="token operator">:=</span> <span class="token number">100</span>
    <span class="token comment">// éšæœºç”Ÿæˆ[0, maxNum)åŒºé—´ä¸­çš„ä¸€ä¸ªæ•´æ•°</span>
    secretNumber <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span>maxNum<span class="token punctuation">)</span>
    <span class="token comment">// æ‰“å°è¯¥éšæœºæ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The secret number is "</span><span class="token punctuation">,</span> secretNumber<span class="token punctuation">)</span>
    <span class="token comment">// ä½†æ˜¯å¦‚æœä½ å¤šæ‰§è¡Œå‡ æ¬¡ï¼Œä¼šå‘ç°ä¸€ç›´éƒ½æ˜¯81è¿™ä¸ªæ•°å­—ï¼Œwhyï¼Ÿå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®éšæœºæ•°ç§å­</span>
    <span class="token comment">// ä½¿ç”¨math/randä¹‹å‰éœ€è¦è®¾ç½®éšæœºæ•°ç§å­ï¼Œå¦åˆ™çš„è¯æ¯ä¸€æ¬¡éƒ½ä¼šç”Ÿæˆç›¸åŒçš„éšæœºæ•°åºåˆ—ã€‚</span>
    <span class="token comment">// ä¸€èˆ¬æƒ¯ä¾‹ç”¨æ³•æ˜¯åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œç”¨å¯åŠ¨çš„æ—¶é—´æˆ³æ¥åˆå§‹åŒ–éšæœºæ•°ç§å­ã€‚</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"math/rand"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è§„å®šéšæœºæ•°çš„æœ€å¤§åŒºé—´èŒƒå›´</span>
    maxNum <span class="token operator">:=</span> <span class="token number">100</span>
    <span class="token comment">// è®¾ç½®éšæœºæ•°ç§å­ï¼Œå°†ç§å­è®¾ç½®ä¸ºå½“å‰æ—¶é—´æˆ³</span>
    rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// éšæœºç”Ÿæˆ[0, maxNum)åŒºé—´ä¸­çš„ä¸€ä¸ªæ•´æ•°</span>
    secretNumber <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span>maxNum<span class="token punctuation">)</span>
    <span class="token comment">// æ‰“å°è¯¥éšæœºæ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The secret number is "</span><span class="token punctuation">,</span> secretNumber<span class="token punctuation">)</span>
    <span class="token comment">// å¤šæ‰§è¡Œå‡ æ¬¡ï¼Œå°±ä¸å†ä¼šæ˜¯åŒä¸€ä¸ªæ•°å­—äº†</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-2-è¯»å–ç”¨æˆ·è¾“å…¥" tabindex="-1"><a class="header-anchor" href="#_3-1-2-è¯»å–ç”¨æˆ·è¾“å…¥" aria-hidden="true">#</a> 3.1.2 è¯»å–ç”¨æˆ·è¾“å…¥</h5>
<blockquote></blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"bufio"</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"math/rand"</span>
    <span class="token string">"os"</span>
    <span class="token string">"strconv"</span>
    <span class="token string">"strings"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ------ç³»ç»Ÿç”Ÿæˆéšæœºæ•°éƒ¨åˆ†-----</span>
    maxNum <span class="token operator">:=</span> <span class="token number">100</span>
    rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    secretNumber <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span>maxNum<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The secret number is "</span><span class="token punctuation">,</span> secretNumber<span class="token punctuation">)</span>
    <span class="token comment">// ------è¯»å–ç”¨æˆ·è¾“å…¥éƒ¨åˆ†--------</span>
    <span class="token comment">// æç¤ºç”¨æˆ·è¾“å…¥çŒœæµ‹æ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Please input your guess"</span><span class="token punctuation">)</span>
    reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">)</span>
    <span class="token comment">// è¿›è¡Œé”™è¯¯å¤„ç†</span>
    input<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token char">'\n'</span><span class="token punctuation">)</span>
    <span class="token comment">// å¦‚æœerrä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±è¯´æ˜æ‰§è¡Œè¿‡ç¨‹ä¸­è¿”å›äº†é”™è¯¯ä¿¡æ¯ï¼Œé‚£å°±ç›´æ¥æ‰“å°å‡ºæ¥</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"An error occured while reading input. Please try again"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å»æ‰æ¢è¡Œç¬¦ï¼Œå°†å­—ç¬¦ä¸²é¦–å°¾çš„ \r å’Œ \n å»æ‰</span>
    input <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">"\r\n"</span><span class="token punctuation">)</span>
    <span class="token comment">// å°†inputè½¬åŒ–ä¸ºæ•°å­—</span>
    guess<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
    <span class="token comment">// è¿›è¡Œé”™è¯¯å¤„ç†</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰“å°é”™è¯¯ä¿¡æ¯</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Invalid input. Please enter an integer value"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è¾“å‡ºç”¨æˆ·è¾“å…¥æ•°å­—</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"You guess is"</span><span class="token punctuation">,</span> guess<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-3-å®ç°åˆ¤æ–­é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#_3-1-3-å®ç°åˆ¤æ–­é€»è¾‘" aria-hidden="true">#</a> 3.1.3 å®ç°åˆ¤æ–­é€»è¾‘</h5>
<blockquote>
<p>å°±å¤šåŠ äº†ä¸€ä¸ªifå¤§å°åˆ¤æ–­</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"bufio"</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"math/rand"</span>
    <span class="token string">"os"</span>
    <span class="token string">"strconv"</span>
    <span class="token string">"strings"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œéƒ½æ˜¯3.1.2ä¸­çš„ä»£ç </span>
    <span class="token comment">// ä¸‹é¢æ˜¯å®ç°åˆ¤æ–­é€»è¾‘çš„ä»£ç </span>
    <span class="token comment">// å°†ç”¨æˆ·çŒœæµ‹æ•°å­—ä¸ç³»ç»Ÿç”Ÿæˆçš„éšæœºæ•°è¿›è¡Œå¯¹æ¯”</span>
    <span class="token keyword">if</span> guess <span class="token operator">></span> secretNumber <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœç”¨æˆ·çŒœæµ‹è¾ƒå¤§ï¼Œæç¤ºç”¨æˆ·éšæœºæ•°åº”è¯¥è¾ƒå°ä¸€äº›</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Your guess is bigger than the secret number. Please try again"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> guess <span class="token operator">&lt;</span> secretNumber <span class="token punctuation">{</span>
         <span class="token comment">// å¦‚æœç”¨æˆ·çŒœæµ‹è¾ƒå°ï¼Œæç¤ºç”¨æˆ·éšæœºæ•°åº”è¯¥è¾ƒå¤§ä¸€äº›</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Your guess is smaller than the secret number. Please try again"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// æœ€åå‰©ä¸‹çš„æƒ…å†µå°±åªæœ‰ä¸¤è€…ç›¸ç­‰ï¼Œè¿™æ—¶ç›´æ¥è¾“å‡ºç»“æœå³å¯</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Correct, you Legend!"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-4-å®ç°æ¸¸æˆå¾ªç¯" tabindex="-1"><a class="header-anchor" href="#_3-1-4-å®ç°æ¸¸æˆå¾ªç¯" aria-hidden="true">#</a> 3.1.4 å®ç°æ¸¸æˆå¾ªç¯</h5>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"bufio"</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"math/rand"</span>
    <span class="token string">"os"</span>
    <span class="token string">"strconv"</span>
    <span class="token string">"strings"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//-------ç³»ç»Ÿç”Ÿæˆéšæœºæ•°--------</span>
    maxNum <span class="token operator">:=</span> <span class="token number">100</span>
    rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    secretNumber <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span>maxNum<span class="token punctuation">)</span>
    <span class="token comment">// fmt.Println("The secret number is ", secretNumber)</span>
    <span class="token comment">// ------è¯»å–ç”¨æˆ·è¾“å…¥éƒ¨åˆ†-------</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Please input your guess"</span><span class="token punctuation">)</span>
    reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">)</span>
    <span class="token comment">// è¿™é‡Œforä¸åŠ ä»»ä½•ä¸œè¥¿å°±ç›¸å½“äºwhileå¾ªç¯ï¼Œä¸”æ˜¯while(true)æ­»å¾ªç¯</span>
    <span class="token comment">// å°†ä¹‹å‰æ‰€è¯´çš„æ‰€æœ‰æ“ä½œæ•´åˆåˆ°ä¸‹è¿°forå¾ªç¯ä¸­</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        input<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token char">'\n'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"An error occured while reading input. Please try again"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
            <span class="token comment">// å°†breakæ¢æˆäº†continueï¼Œå› ä¸ºè€ƒè™‘åˆ°breakä¼šç»ˆæ­¢forå¾ªç¯çš„ï¼Œåªéœ€è¦è·³è¿‡æœ¬æ¬¡å¾ªç¯å°±è¡Œäº†</span>
            <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        input <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token string">"\r\n"</span><span class="token punctuation">)</span>

        guess<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Invalid input. Please enter an integer value"</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"You guess is"</span><span class="token punctuation">,</span> guess<span class="token punctuation">)</span>
        <span class="token keyword">if</span> guess <span class="token operator">></span> secretNumber <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Your guess is bigger than the secret number. Please try again"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> guess <span class="token operator">&lt;</span> secretNumber <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Your guess is smaller than the secret number. Please try again"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Correct, you Legend!"</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-åœ¨çº¿è¯å…¸" tabindex="-1"><a class="header-anchor" href="#_3-2-åœ¨çº¿è¯å…¸" aria-hidden="true">#</a> 3.2 åœ¨çº¿è¯å…¸</h4>
<blockquote>
<p>ç”¨æˆ·åœ¨å‘½ä»¤è¡Œé‡Œé¢æŸ¥è¯¢ä¸€ä¸ªå•è¯ï¼Œé€šè¿‡è°ƒç”¨ç¬¬ä¸‰æ–¹çš„ API æŸ¥è¯¢åˆ°å•è¯çš„ç¿»è¯‘å¹¶æ‰“å°å‡ºæ¥ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­æˆ‘ä»¬å°†å­¦ä¼šå¦‚ä½•ä½¿ç”¨ Go è¯­è¨€æ¥å‘é€ HTTP è¯·æ±‚ã€è§£æ JSONï¼Œè¿˜ä¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ä»£ç ç”Ÿæˆæ¥æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<h5 id="_3-2-1-æŠ“åŒ…" tabindex="-1"><a class="header-anchor" href="#_3-2-1-æŠ“åŒ…" aria-hidden="true">#</a> 3.2.1 æŠ“åŒ…</h5>
<blockquote>
<p>ä»¥å½©äº‘ç§‘æŠ€æä¾›çš„åœ¨çº¿ç¿»è¯‘ä¸ºä¾‹ï¼Œç›´æ¥å³é”®æ£€æŸ¥æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ˆè¿™ä¸ªåº”è¯¥éƒ½æ‡‚å§ï¼‰ã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230119163401893.png" alt="image-20230119163401893"></p>
<p>è¿™æ˜¯ HTTP çš„ä¸€ä¸ª post è¯·æ±‚ï¼ŒAPI çš„è¿”å›ç»“æœé‡Œä¼šæœ‰ dictionary å’Œ wiki ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬æƒ³è¦çš„æ•°æ®å°±åœ¨ dictionary.explanations å­—æ®µé‡Œï¼Œå…¶ä»–å­—å…¸è¿˜åŒ…æ‹¬è¯¥å•è¯çš„å…¶ä»–ä¿¡æ¯ï¼Œä¾‹å¦‚éŸ³æ ‡ã€‚ã€‚ã€‚</p>
<p>å³é”® dictï¼Œä»¥ cURL æ ¼å¼è¿›è¡Œå¤åˆ¶ï¼Œåœ¨å‘½ä»¤è¡Œç²˜è´´å‡ºæ¥ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°ä¸€å¤§ä¸²çš„ json</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code> <span class="token function">curl</span> <span class="token string">'https://api.interpreter.caiyunai.com/v1/dict'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'authority: api.interpreter.caiyunai.com'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="99", "Google Chrome";v="99"'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'os-version: '</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'sec-ch-ua-mobile: ?0'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'app-name: xy'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'content-type: application/json;charset=UTF-8'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json, text/plain, */*'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'device-id: '</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'os-type: web'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'x-authorization: token:qgemv4jr1y38jyq6vhvi'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'sec-ch-ua-platform: "Windows"'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'origin: https://fanyi.caiyunapp.com'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'sec-fetch-site: cross-site'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'sec-fetch-mode: cors'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'sec-fetch-dest: empty'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'referer: https://fanyi.caiyunapp.com/'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'accept-language: zh-CN,zh;q=0.9,zh-TW;q=0.8'</span> <span class="token punctuation">\</span>
  --data-raw <span class="token string">'{"trans_type":"en2zh","source":"good"}'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--compressed</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h5 id="_3-2-2-ä»£ç ç”Ÿæˆ" tabindex="-1"><a class="header-anchor" href="#_3-2-2-ä»£ç ç”Ÿæˆ" aria-hidden="true">#</a> 3.2.2 ä»£ç ç”Ÿæˆ</h5>
<blockquote>
<p>è¿™é‡Œè¦ç”¨åˆ°ä¸€ä¸ªåœ¨çº¿ä»£ç è‡ªåŠ¨ç”Ÿæˆçš„ç½‘ç«™<a href="https://curlconverter.com/go/%EF%BC%8C%E6%B7%BB%E5%8A%A0" target="_blank" rel="noopener noreferrer">https://curlconverter.com/go/ï¼Œæ·»åŠ <ExternalLinkIcon/></a> curl å‘½ä»¤ï¼Œè‡ªåŠ¨ç”Ÿæˆç›¸åº”å‘½ä»¤æ“ä½œçš„ go ä»£ç ï¼Œå¾ˆå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// å°†ä¸Šé¢çš„curlä»£ç é€šè¿‡ä»£ç ç”Ÿæˆç½‘ç«™è½¬åŒ–ä¸ºçš„goä»£ç </span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"io/ioutil"</span>
    <span class="token string">"log"</span>
    <span class="token string">"net/http"</span>
    <span class="token string">"strings"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºHTTP clientï¼Œå¯ä»¥æŒ‡å®šå¾ˆå¤šå‚æ•°ï¼Œä¾‹å¦‚è¯·æ±‚è¶…æ—¶æ˜¯å¦ä½¿ç”¨cookieã€‚ã€‚ã€‚</span>
    client <span class="token operator">:=</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// æ„é€ HTTPè¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œè‡ªå®šä¹‰ç›¸å…³å‚æ•°</span>
    <span class="token comment">// trans_type: ç¿»è¯‘æ–¹å¼ï¼Œen2zhï¼šè‹±è¯­ç¿»è¯‘ä¸ºä¸­æ–‡</span>
    <span class="token comment">// source: æƒ³è¦æŸ¥è¯¢çš„å•è¯</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">`{"trans_type":"en2zh","source":"good"}`</span><span class="token punctuation">)</span>
    <span class="token comment">// æ„é€ ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œå¹¶ä¸”çš„postè¯·æ±‚ï¼Œhttps://api.interpreter.caiyunai.com/v1/dictä¸ºå‘é€è¯·æ±‚çš„url</span>
    req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"https://api.interpreter.caiyunai.com/v1/dict"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token comment">// é”™è¯¯å¤„ç†ï¼Œè¯·æ±‚æ— å¼‚å¸¸errä¸ºnilï¼Œå¦‚æœä¸­é€”å‡ºç°é—®é¢˜ï¼Œerrä¸ºè¿”å›é”™è¯¯ä¿¡æ¯</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯å¹¶ç»“æŸç¨‹åº</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¾ç½®è¯·æ±‚ä½“ä¸­çš„ä¸€å¤§å †å‚æ•°</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"authority"</span><span class="token punctuation">,</span> <span class="token string">"api.interpreter.caiyunai.com"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"sec-ch-ua"</span><span class="token punctuation">,</span> `<span class="token string">" Not A;Brand"</span><span class="token punctuation">;</span>v<span class="token operator">=</span><span class="token string">"99"</span><span class="token punctuation">,</span> <span class="token string">"Chromium"</span><span class="token punctuation">;</span>v<span class="token operator">=</span><span class="token string">"99"</span><span class="token punctuation">,</span> <span class="token string">"Google Chrome"</span><span class="token punctuation">;</span>v<span class="token operator">=</span><span class="token string">"99"</span><span class="token string">`)
    req.Header.Set("sec-ch-ua-mobile", "?0")
    req.Header.Set("user-agent", "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36")
    req.Header.Set("app-name", "xy")
    req.Header.Set("content-type", "application/json;charset=UTF-8")
    req.Header.Set("accept", "application/json, text/plain, */*")
    req.Header.Set("os-type", "web")
    req.Header.Set("x-authorization", "token:qgemv4jr1y38jyq6vhvi")
    req.Header.Set("sec-ch-ua-platform", `</span>"Windows"`<span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"origin"</span><span class="token punctuation">,</span> <span class="token string">"https://fanyi.caiyunapp.com"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"sec-fetch-site"</span><span class="token punctuation">,</span> <span class="token string">"cross-site"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"sec-fetch-mode"</span><span class="token punctuation">,</span> <span class="token string">"cors"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"sec-fetch-dest"</span><span class="token punctuation">,</span> <span class="token string">"empty"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"referer"</span><span class="token punctuation">,</span> <span class="token string">"https://fanyi.caiyunapp.com/"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"accept-language"</span><span class="token punctuation">,</span> <span class="token string">"zh-CN,zh;q=0.9,zh-TW;q=0.8"</span><span class="token punctuation">)</span>
    <span class="token comment">// å‘é€è¯·æ±‚</span>
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token comment">// é”™è¯¯å¤„ç†ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦å‘é€æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨å“åº”</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœå‡ºç°é—®é¢˜ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶ç»“æŸç¨‹åº</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å…³é—­clientï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// è¯»å–æœåŠ¡å™¨çš„å“åº”ç»“æœ</span>
    bodyText<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token comment">// é”™è¯¯å¤„ç†</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ‰“å°å‡ºæœåŠ¡å™¨çš„å“åº”ç»“æœï¼Œä¹Ÿå°±æ˜¯è¾“å…¥å•è¯çš„ä¸­æ–‡ç¿»è¯‘</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> bodyText<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-ext="json"><pre v-pre class="language-json"><code><span class="token comment">// æ ¼å¼åŒ–åçš„bodyText</span>
<span class="token punctuation">{</span>
    <span class="token property">"rc"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"wiki"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"known_in_laguages"</span><span class="token operator">:</span> <span class="token number">63</span><span class="token punctuation">,</span>
        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"tangible and intangible thing, except labor tied services, that satisfies human wants and provides utility"</span><span class="token punctuation">,</span>
            <span class="token property">"target"</span><span class="token operator">:</span> <span class="token null keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"Q28877"</span><span class="token punctuation">,</span>
        <span class="token property">"item"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"good"</span><span class="token punctuation">,</span>
            <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"\u5546\u54c1"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"image_url"</span><span class="token operator">:</span> <span class="token string">"http://www.caiyunapp.com/imgs/link_default_img.png"</span><span class="token punctuation">,</span>
        <span class="token property">"is_subject"</span><span class="token operator">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
        <span class="token property">"sitelink"</span><span class="token operator">:</span> <span class="token string">"https://www.caiyunapp.com/read_mode/?id=6354777915466339550246c5"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"dictionary"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"prons"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"en-us"</span><span class="token operator">:</span> <span class="token string">"[g\u028ad]"</span><span class="token punctuation">,</span>
            <span class="token property">"en"</span><span class="token operator">:</span> <span class="token string">"[gud]"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">"explanations"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"a.\u597d\u7684;\u5584\u826f\u7684;\u5feb\u4e50\u7684;\u771f\u6b63\u7684;\u5bbd\u5927\u7684;\u6709\u76ca\u7684;\u8001\u7ec3\u7684;\u5e78\u798f\u7684;\u5fe0\u5b9e\u7684;\u4f18\u79c0\u7684;\u5b8c\u6574\u7684;\u5f7b\u5e95\u7684;\u4e30\u5bcc\u7684"</span><span class="token punctuation">,</span> <span class="token string">"n.\u5229\u76ca;\u597d\u5904;\u5584\u826f;\u597d\u4eba"</span><span class="token punctuation">,</span> <span class="token string">"ad.=well"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"synonym"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"excellent"</span><span class="token punctuation">,</span> <span class="token string">"fine"</span><span class="token punctuation">,</span> <span class="token string">"nice"</span><span class="token punctuation">,</span> <span class="token string">"splendid"</span><span class="token punctuation">,</span> <span class="token string">"proper"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"antonym"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"bad"</span><span class="token punctuation">,</span> <span class="token string">"wrong"</span><span class="token punctuation">,</span> <span class="token string">"evil"</span><span class="token punctuation">,</span> <span class="token string">"harmful"</span><span class="token punctuation">,</span> <span class="token string">"poor"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"wqx_example"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token string">"to the good"</span><span class="token punctuation">,</span> <span class="token string">"\u6709\u5229,\u6709\u597d\u5904"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"good, bad and indifferent"</span><span class="token punctuation">,</span> <span class="token string">"\u597d\u7684,\u574f\u7684\u548c\u4e00\u822c\u7684"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"good innings"</span><span class="token punctuation">,</span> <span class="token string">"\u957f\u5bff"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"good and ..."</span><span class="token punctuation">,</span> <span class="token string">"\u5f88,\u9887;\u5b8c\u5168,\u5f7b\u5e95"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"do somebody's heart good"</span><span class="token punctuation">,</span> <span class="token string">"\u5bf9\u67d0\u4eba\u7684\u5fc3\u810f\u6709\u76ca,\u4f7f\u67d0\u4eba\u611f\u5230\u6109\u5feb"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"do somebody good"</span><span class="token punctuation">,</span> <span class="token string">"\u5bf9\u67d0\u4eba\u6709\u76ca"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"be good for"</span><span class="token punctuation">,</span> <span class="token string">"\u5bf9\u2026\u6709\u6548,\u9002\u5408,\u80dc\u4efb"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"be good at"</span><span class="token punctuation">,</span> <span class="token string">"\u5728\u2026\u65b9\u9762(\u5b66\u5f97,\u505a\u5f97)\u597d;\u5584\u4e8e"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"as good as one's word"</span><span class="token punctuation">,</span> <span class="token string">"\u4fe1\u5b88\u8bfa\u8a00,\u503c\u5f97\u4fe1\u8d56"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"as good as"</span><span class="token punctuation">,</span> <span class="token string">"\u5b9e\u9645\u4e0a,\u51e0\u4e4e\u7b49\u4e8e"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"all well and good"</span><span class="token punctuation">,</span> <span class="token string">"\u4e5f\u597d,\u8fd8\u597d,\u5f88\u4e0d\u9519"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"a good"</span><span class="token punctuation">,</span> <span class="token string">"\u76f8\u5f53,\u8db3\u8db3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token string">"He is good at figures . "</span><span class="token punctuation">,</span> <span class="token string">"\u4ed6\u5584\u4e8e\u8ba1\u7b97\u3002"</span><span class="token punctuation">]</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"entry"</span><span class="token operator">:</span> <span class="token string">"good"</span><span class="token punctuation">,</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"word"</span><span class="token punctuation">,</span>
        <span class="token property">"related"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"wenquxing"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-3-ç”Ÿæˆ-request-body" tabindex="-1"><a class="header-anchor" href="#_3-2-3-ç”Ÿæˆ-request-body" aria-hidden="true">#</a> 3.2.3 ç”Ÿæˆ request body</h5>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€æ®µ JSONï¼Œå¸¸ç”¨çš„æ–¹å¼æ˜¯æˆ‘ä»¬å…ˆæ„é€ å‡ºæ¥ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“å’Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆçš„JSON çš„ç»“æ„æ˜¯â€”â€”å¯¹åº”çš„</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"bytes"</span>
    <span class="token string">"encoding/json"</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"io/ioutil"</span>
    <span class="token string">"log"</span>
    <span class="token string">"net/http"</span>
<span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæ„é€ ä½“ï¼Œç±»å‹åçš„`json:name`æ˜¯JSONåºåˆ—åŒ–åçš„åç§°</span>
<span class="token keyword">type</span> DictRequest <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    TransType <span class="token builtin">string</span> <span class="token string">`json:"trans_type"`</span>
    Source    <span class="token builtin">string</span> <span class="token string">`json:"source"`</span>
    UserID    <span class="token builtin">string</span> <span class="token string">`json:"user_id"`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client <span class="token operator">:=</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// åˆå§‹åŒ–è¯·æ±‚ç»“æ„ä½“</span>
    request <span class="token operator">:=</span> DictRequest<span class="token punctuation">{</span>TransType<span class="token punctuation">:</span> <span class="token string">"en2zh"</span><span class="token punctuation">,</span> Source<span class="token punctuation">:</span> <span class="token string">"good"</span><span class="token punctuation">}</span>
    <span class="token comment">// ä½¿ç”¨json.Marshalå¾—åˆ°ç»“æ„ä½“åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²</span>
    buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
    req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"https://api.interpreter.caiyunai.com/v1/dict"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åé¢ä»£ç å’Œä¸Šé¢çš„è®¾ç½®è¯·æ±‚ä½“å‚æ•°åŠä»¥åä»£ç ä¸€æ ·</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-4-è§£æ-response-body" tabindex="-1"><a class="header-anchor" href="#_3-2-4-è§£æ-response-body" aria-hidden="true">#</a> 3.2.4 è§£æ response body</h5>
<blockquote>
<p><a href="https://oktools.net/" target="_blank" rel="noopener noreferrer">åœ¨çº¿å·¥å…·â€”OKTools<ExternalLinkIcon/></a> =&gt; ç‚¹å‡» <code v-pre>JSON è½¬ Go Struct</code>ï¼Œç„¶åç‚¹å‡» <code v-pre>è½¬åŒ–-åµŒå¥—</code></p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// å°†ä¹‹å‰çš„bodyTextè½¬åŒ–åçš„ç»“æ„ä½“</span>
<span class="token keyword">type</span> AutoGenerated <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Rc <span class="token builtin">int</span> <span class="token string">`json:"rc"`</span>
    Wiki <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        KnownInLaguages <span class="token builtin">int</span> <span class="token string">`json:"known_in_laguages"`</span>
        Description <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            Source <span class="token builtin">string</span> <span class="token string">`json:"source"`</span>
            Target <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token string">`json:"target"`</span>
        <span class="token punctuation">}</span> <span class="token string">`json:"description"`</span>
        ID <span class="token builtin">string</span> <span class="token string">`json:"id"`</span>
        Item <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            Source <span class="token builtin">string</span> <span class="token string">`json:"source"`</span>
            Target <span class="token builtin">string</span> <span class="token string">`json:"target"`</span>
        <span class="token punctuation">}</span> <span class="token string">`json:"item"`</span>
        ImageURL <span class="token builtin">string</span> <span class="token string">`json:"image_url"`</span>
        IsSubject <span class="token builtin">string</span> <span class="token string">`json:"is_subject"`</span>
        Sitelink <span class="token builtin">string</span> <span class="token string">`json:"sitelink"`</span>
    <span class="token punctuation">}</span> <span class="token string">`json:"wiki"`</span>
    Dictionary <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Prons <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            EnUs <span class="token builtin">string</span> <span class="token string">`json:"en-us"`</span>
            En <span class="token builtin">string</span> <span class="token string">`json:"en"`</span>
        <span class="token punctuation">}</span> <span class="token string">`json:"prons"`</span>
        Explanations <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:"explanations"`</span>
        Synonym <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:"synonym"`</span>
        Antonym <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:"antonym"`</span>
        WqxExample <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token string">`json:"wqx_example"`</span>
        Entry <span class="token builtin">string</span> <span class="token string">`json:"entry"`</span>
        Type <span class="token builtin">string</span> <span class="token string">`json:"type"`</span>
        Related <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token string">`json:"related"`</span>
        Source <span class="token builtin">string</span> <span class="token string">`json:"source"`</span>
    <span class="token punctuation">}</span> <span class="token string">`json:"dictionary"`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å°†è‡ªåŠ¨ç”Ÿæˆçš„æ„é€ ä½“æ›¿æ¢æ‰ä¹‹å‰æˆ‘ä»¬å‡å®šçš„æ„é€ ä½“ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹è¯­å¥</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// å®šä¹‰ç»“æ„ä½“å˜é‡</span>
<span class="token keyword">var</span> dictResponse DictRequest
<span class="token comment">// å°†å¾—åˆ°çš„å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºç»“æ„ä½“</span>
err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>bodyText<span class="token punctuation">,</span> <span class="token operator">&amp;</span>dictResponse<span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ›´åŠ è¯¦ç»†çš„æ‰“å°</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> dictResponse<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h5 id="_3-2-5-æ‰“å°ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3-2-5-æ‰“å°ç»“æœ" aria-hidden="true">#</a> 3.2.5 æ‰“å°ç»“æœ</h5>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// æœ€ç»ˆçš„å®Œæ•´ä»£ç </span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"bytes"</span>
    <span class="token string">"encoding/json"</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"io/ioutil"</span>
    <span class="token string">"log"</span>
    <span class="token string">"net/http"</span>
    <span class="token string">"os"</span>
<span class="token punctuation">)</span>
<span class="token comment">// åŒ…å«ç”¨æˆ·æŸ¥è¯¢å•è¯çš„è¯·æ±‚ç»“æ„ä½“</span>
<span class="token keyword">type</span> DictRequest <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    TransType <span class="token builtin">string</span> <span class="token string">`json:"trans_type"`</span>
    Source    <span class="token builtin">string</span> <span class="token string">`json:"source"`</span>
    UserID    <span class="token builtin">string</span> <span class="token string">`json:"user_id"`</span>
<span class="token punctuation">}</span>
<span class="token comment">// æœåŠ¡å™¨è¿”å›çš„å“åº”ç»“æ„ä½“</span>
<span class="token keyword">type</span> DictResponse <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Rc   <span class="token builtin">int</span> <span class="token string">`json:"rc"`</span>
    Wiki <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        KnownInLaguages <span class="token builtin">int</span> <span class="token string">`json:"known_in_laguages"`</span>
        Description     <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            Source <span class="token builtin">string</span>      <span class="token string">`json:"source"`</span>
            Target <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token string">`json:"target"`</span>
        <span class="token punctuation">}</span> <span class="token string">`json:"description"`</span>
        ID   <span class="token builtin">string</span> <span class="token string">`json:"id"`</span>
        Item <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            Source <span class="token builtin">string</span> <span class="token string">`json:"source"`</span>
            Target <span class="token builtin">string</span> <span class="token string">`json:"target"`</span>
        <span class="token punctuation">}</span> <span class="token string">`json:"item"`</span>
        ImageURL  <span class="token builtin">string</span> <span class="token string">`json:"image_url"`</span>
        IsSubject <span class="token builtin">string</span> <span class="token string">`json:"is_subject"`</span>
        Sitelink  <span class="token builtin">string</span> <span class="token string">`json:"sitelink"`</span>
    <span class="token punctuation">}</span> <span class="token string">`json:"wiki"`</span>
    Dictionary <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Prons <span class="token keyword">struct</span> <span class="token punctuation">{</span>
            EnUs <span class="token builtin">string</span> <span class="token string">`json:"en-us"`</span>
            En   <span class="token builtin">string</span> <span class="token string">`json:"en"`</span>
        <span class="token punctuation">}</span> <span class="token string">`json:"prons"`</span>
        Explanations <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>      <span class="token string">`json:"explanations"`</span>
        Synonym      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>      <span class="token string">`json:"synonym"`</span>
        Antonym      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>      <span class="token string">`json:"antonym"`</span>
        WqxExample   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>    <span class="token string">`json:"wqx_example"`</span>
        Entry        <span class="token builtin">string</span>        <span class="token string">`json:"entry"`</span>
        Type         <span class="token builtin">string</span>        <span class="token string">`json:"type"`</span>
        Related      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token string">`json:"related"`</span>
        Source       <span class="token builtin">string</span>        <span class="token string">`json:"source"`</span>
    <span class="token punctuation">}</span> <span class="token string">`json:"dictionary"`</span>
<span class="token punctuation">}</span>
<span class="token comment">// æå–å‡ºæ ¸å¿ƒä»£ç ï¼Œæ•´åˆä¸ºä¸€ä¸ªå‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">query</span><span class="token punctuation">(</span>word <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client <span class="token operator">:=</span> <span class="token operator">&amp;</span>http<span class="token punctuation">.</span>Client<span class="token punctuation">{</span><span class="token punctuation">}</span>
    request <span class="token operator">:=</span> DictRequest<span class="token punctuation">{</span>TransType<span class="token punctuation">:</span> <span class="token string">"en2zh"</span><span class="token punctuation">,</span> Source<span class="token punctuation">:</span> word<span class="token punctuation">}</span>
    buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è¿™é‡Œè¿”å›çš„æ˜¯byteæ•°ç»„</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> bytes<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
    req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"https://api.interpreter.caiyunai.com/v1/dict"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Connection"</span><span class="token punctuation">,</span> <span class="token string">"keep-alive"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"DNT"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"os-version"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"sec-ch-ua-mobile"</span><span class="token punctuation">,</span> <span class="token string">"?0"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">,</span> <span class="token string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"app-name"</span><span class="token punctuation">,</span> <span class="token string">"xy"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"application/json;charset=UTF-8"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">,</span> <span class="token string">"application/json, text/plain, */*"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"device-id"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"os-type"</span><span class="token punctuation">,</span> <span class="token string">"web"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"X-Authorization"</span><span class="token punctuation">,</span> <span class="token string">"token:qgemv4jr1y38jyq6vhvi"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Origin"</span><span class="token punctuation">,</span> <span class="token string">"https://fanyi.caiyunapp.com"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Sec-Fetch-Site"</span><span class="token punctuation">,</span> <span class="token string">"cross-site"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Sec-Fetch-Mode"</span><span class="token punctuation">,</span> <span class="token string">"cors"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Sec-Fetch-Dest"</span><span class="token punctuation">,</span> <span class="token string">"empty"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Referer"</span><span class="token punctuation">,</span> <span class="token string">"https://fanyi.caiyunapp.com/"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Accept-Language"</span><span class="token punctuation">,</span> <span class="token string">"zh-CN,zh;q=0.9"</span><span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Cookie"</span><span class="token punctuation">,</span> <span class="token string">"_ym_uid=16456948721020430059; _ym_d=1645694872"</span><span class="token punctuation">)</span>
    resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    bodyText<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åˆ¤æ–­æ¥å£çš„çŠ¶æ€ç æ˜¯å¦ä¸º200</span>
    <span class="token keyword">if</span> resp<span class="token punctuation">.</span>StatusCode <span class="token operator">!=</span> <span class="token number">200</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">"bad StatusCode:"</span><span class="token punctuation">,</span> resp<span class="token punctuation">.</span>StatusCode<span class="token punctuation">,</span> <span class="token string">"body"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>bodyText<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> dictResponse DictResponse
    err <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>bodyText<span class="token punctuation">,</span> <span class="token operator">&amp;</span>dictResponse<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ‰“å°éœ€æ±‚çš„éƒ¨åˆ†</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token string">"UK:"</span><span class="token punctuation">,</span> dictResponse<span class="token punctuation">.</span>Dictionary<span class="token punctuation">.</span>Prons<span class="token punctuation">.</span>En<span class="token punctuation">,</span> <span class="token string">"US:"</span><span class="token punctuation">,</span> dictResponse<span class="token punctuation">.</span>Dictionary<span class="token punctuation">.</span>Prons<span class="token punctuation">.</span>EnUs<span class="token punctuation">)</span>
    <span class="token comment">// å¾ªç¯éå†æ‰“å°</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> item <span class="token operator">:=</span> <span class="token keyword">range</span> dictResponse<span class="token punctuation">.</span>Dictionary<span class="token punctuation">.</span>Explanations <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ¤æ–­å‘½ä»¤å’Œå‚æ•°çš„ä¸ªæ•°</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">2</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸æ˜¯2ä¸ªï¼Œç›´æ¥æç¤ºé”™è¯¯</span>
        fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">`usage: simpleDict WORD
example: simpleDict hello
		`</span><span class="token punctuation">)</span>
        <span class="token comment">// å¹¶ç»“æŸç¨‹åº</span>
        os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¦åˆ™ï¼Œå¼€å§‹æŸ¥è¯¢å•è¯æ„æ€</span>
    word <span class="token operator">:=</span> os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token function">query</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>é¢„æœŸç»“æœ</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230119193532646.png" alt="image-20230119193532646"></p>
</blockquote>
<h4 id="_3-3-socket5" tabindex="-1"><a class="header-anchor" href="#_3-3-socket5" aria-hidden="true">#</a> 3.3 Socket5</h4>
<h2 id="goè¿›é˜¶-å·¥ç¨‹å®è·µ-é’è®­è¥ç¬”è®°" tabindex="-1"><a class="header-anchor" href="#goè¿›é˜¶-å·¥ç¨‹å®è·µ-é’è®­è¥ç¬”è®°" aria-hidden="true">#</a> Goè¿›é˜¶-å·¥ç¨‹å®è·µ | é’è®­è¥ç¬”è®°</h2>
<h3 id="_1-è¯­è¨€è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#_1-è¯­è¨€è¿›é˜¶" aria-hidden="true">#</a> 1. è¯­è¨€è¿›é˜¶</h3>
<h4 id="_1-1-å¹¶å‘-vs-å¹¶è¡Œ" tabindex="-1"><a class="header-anchor" href="#_1-1-å¹¶å‘-vs-å¹¶è¡Œ" aria-hidden="true">#</a> 1.1 å¹¶å‘ VS å¹¶è¡Œ</h4>
<blockquote>
<p>ä½ å¯èƒ½å·²å¯¹ Go åœ¨å¹¶å‘æ–¹é¢çš„å‡ºè‰²è¡¨ç°æœ‰æ‰€è€³é—»ã€‚ ä¹Ÿè®¸æ­£æ˜¯è¿™ä¸€æœ€çªå‡ºçš„åŠŸèƒ½ä½¿ Go å¦‚æ­¤å—æ¬¢è¿ï¼Œè®©å®ƒæˆä¸ºäº†ç¼–å†™ <code v-pre>Docker</code>ã€<code v-pre>Kubernetes</code> å’Œ <code v-pre>Terraform</code> ç­‰å…¶ä»–è½¯ä»¶çš„ç†æƒ³ä¹‹é€‰ã€‚</p>
<p>ä½†æ˜¯åœ¨å¼€å§‹äº†è§£ Go å¹¶å‘ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦å¿˜è®°ä»å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­å·²ç»äº†è§£çš„çŸ¥è¯†ï¼Œå› ä¸ºGo ä½¿ç”¨çš„æ–¹æ³•æˆªç„¶ä¸åŒã€‚</p>
</blockquote>
<ol>
<li>å¤šçº¿ç¨‹ç¨‹åºåœ¨ä¸€ä¸ªæ ¸çš„cpuä¸Šè¿è¡Œ</li>
</ol>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230116130558267.png" alt="image-20230116130558267"></p>
<ol start="2">
<li>
<p>å¤šçº¿ç¨‹ç¨‹åºåœ¨å¤šä¸ªæ ¸çš„cpuä¸Šè¿è¡Œ</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230116130831560.png" alt="image-20230116130831560"></p>
</li>
</ol>
<blockquote>
<p>Goå¯ä»¥å……åˆ†å‘æŒ¥å¤šæ ¸ä¼˜åŠ¿ï¼Œé«˜æ•ˆè¿è¡Œ</p>
</blockquote>
<h4 id="_1-2-goroutine" tabindex="-1"><a class="header-anchor" href="#_1-2-goroutine" aria-hidden="true">#</a> 1.2 Goroutine</h4>
<blockquote>
<p><code v-pre>Goroutine</code> æ˜¯è½»é‡çº¿ç¨‹ä¸­çš„å¹¶å‘æ´»åŠ¨ï¼Œè€Œä¸æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œçš„ä¼ ç»Ÿæ´»åŠ¨ã€‚ å‡è®¾ä½ æœ‰ä¸€ä¸ªå†™å…¥è¾“å‡ºçš„ç¨‹åºå’Œå¦ä¸€ä¸ªè®¡ç®—ä¸¤ä¸ªæ•°å­—ç›¸åŠ çš„å‡½æ•°ã€‚ ä¸€ä¸ªå¹¶å‘ç¨‹åºå¯ä»¥æœ‰æ•°ä¸ª <code v-pre>Goroutine</code> åŒæ—¶è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¯´ï¼Œç¨‹åºæ‰§è¡Œçš„ç¬¬ä¸€ä¸ª <code v-pre>Goroutine</code> æ˜¯ <code v-pre>main()</code> å‡½æ•°ã€‚ å¦‚æœè¦åˆ›å»ºå…¶ä»– <code v-pre>Goroutine</code> ï¼Œåˆ™å¿…é¡»åœ¨è°ƒç”¨è¯¥å‡½æ•°ä¹‹å‰ä½¿ç”¨ <code v-pre>go</code> å…³é”®å­—ï¼š</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">go</span> <span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">HelloGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ‰“å°å½“å‰æ•°å€¼</span>
<span class="token keyword">func</span> <span class="token function">hello</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"hello goroutine:"</span> <span class="token operator">+</span> fmt<span class="token punctuation">.</span><span class="token function">Sprint</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// å¹¶å‘</span>
<span class="token keyword">func</span> <span class="token function">HelloGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>j <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">hello</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
    <span class="token comment">// ç¡çœ ä¸€ç§’</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-channel" tabindex="-1"><a class="header-anchor" href="#_1-3-channel" aria-hidden="true">#</a> 1.3 Channel</h4>
<blockquote>
<p>Go ä¸­çš„ <code v-pre>channel</code> æ˜¯ <code v-pre>goroutine</code> ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¹‹å‰è¯´è¿‡ Go å®ç°å¹¶å‘çš„æ–¹å¼æ˜¯ï¼šâ€œ<strong>ä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡é€šä¿¡å…±äº«å†…å­˜</strong>ã€‚â€éœ€è¦å°†å€¼ä»ä¸€ä¸ª <code v-pre>goroutine</code> å‘é€åˆ°å¦ä¸€ä¸ªæ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€šé“ã€‚</p>
<p>ç”±äº <code v-pre>channel</code> æ˜¯å‘é€å’Œæ¥æ”¶æ•°æ®çš„é€šä¿¡æœºåˆ¶ï¼Œå› æ­¤å®ƒä¹Ÿæœ‰ç±»å‹ä¹‹åˆ†ã€‚è¿™æ„å‘³ç€ä½ åªèƒ½å‘é€ <code v-pre>channel</code> æ”¯æŒçš„æ•°æ®ç±»å‹ã€‚ é™¤ä½¿ç”¨å…³é”®å­— <code v-pre>chan</code> ä½œä¸º <code v-pre>channel</code> çš„æ•°æ®ç±»å‹å¤–ï¼Œè¿˜éœ€æŒ‡å®šå°†é€šè¿‡ <code v-pre>channel</code> ä¼ é€’çš„æ•°æ®ç±»å‹ï¼Œå¦‚ <code v-pre>int</code> ç±»å‹ã€‚</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// åŸºæœ¬å½¢å¼</span>
<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">type</span><span class="token punctuation">)</span>
<span class="token comment">// æ— ç¼“å†²é€šé“</span>
<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
<span class="token comment">// æœ‰ç¼“å†²é€šé“</span>
<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// ç¼“å†²é€šé“å¯ä»¥ç†è§£ä¸ºå¯ä»¥åŒæ—¶æœ‰å‡ ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ä¸ª <code v-pre>channel</code> å¯ä»¥æ‰§è¡Œä¸¤é¡¹æ“ä½œï¼šå‘é€æ•°æ®å’Œæ¥æ”¶æ•°æ®ã€‚ è‹¥è¦æŒ‡å®š <code v-pre>channel</code> å…·æœ‰çš„æ“ä½œç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ <code v-pre>channel</code> è¿ç®—ç¬¦ <code v-pre>&lt;-</code>ã€‚</p>
<p>å¦‚æœå¸Œæœ› <code v-pre>channel</code> ä»…å‘é€æ•°æ®ï¼Œåˆ™å¿…é¡»åœ¨ <code v-pre>channel</code> ä¹‹åä½¿ç”¨ <code v-pre>&lt;-</code> è¿ç®—ç¬¦ï¼Œå¦‚æœå¸Œæœ› <code v-pre>channel</code> æ¥æ”¶æ•°æ®ï¼Œåˆ™å¿…é¡»åœ¨ <code v-pre>channel</code> ä¹‹å‰ä½¿ç”¨ <code v-pre>&lt;-</code> è¿ç®—ç¬¦æ­¤å¤–ï¼Œè€Œåœ¨ <code v-pre>channel</code> ä¸­å‘é€æ•°æ®å’Œæ¥æ”¶æ•°æ®å±äºé˜»æ­¢æ“ä½œã€‚</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code>ch <span class="token operator">&lt;-</span> x <span class="token comment">// é€šè¿‡é€šé“chå‘é€ï¼ˆæˆ–å†™å…¥ï¼‰æ•°æ®x</span>
x <span class="token operator">=</span> <span class="token operator">&lt;-</span>ch <span class="token comment">// xæ¥æ”¶ï¼ˆæˆ–è¯»å–ï¼‰æ•°æ®ï¼Œå‘é€åˆ°é€šé“ch</span>
<span class="token operator">&lt;-</span>ch <span class="token comment">// æ¥å—æ•°æ®ï¼Œä½†æ˜¯ç»“æœè¢«ä¸¢å¼ƒï¼Œç›¸å½“äºä¸´æ—¶å˜é‡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åæ˜¯å…³é—­é€šé“ï¼Œå’Œå…¶ä»–è¯­è¨€ä¸­çš„æ–‡ä»¶æ“ä½œä¸€æ ·ï¼Œç”¨å®Œéœ€è¦è¿›è¡Œæœ€åçš„å…³é—­æ“ä½œï¼Œé‡Šæ”¾èµ„æºã€‚</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºæ— ç¼“å†²é€šé“</span>
    src <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token comment">// åˆ›å»ºæœ‰ç¼“å†²é€šé“</span>
    dest <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æœ€åæ‰§è¡Œå…³é—­é€šé“</span>
        <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span>
        <span class="token comment">// å‘é€0~9åˆ°é€šé“srcä¸­</span>
        <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
            src <span class="token operator">&lt;-</span> i
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æœ€åæ‰§è¡Œå…³é—­é€šé“</span>
        <span class="token keyword">defer</span> <span class="token function">close</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span>
        <span class="token comment">// ä»é€šé“srcä¸­å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®å¹³æ–¹åå­˜å…¥é€šé“destä¸­</span>
        <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> src <span class="token punctuation">{</span>
            dest <span class="token operator">&lt;-</span> i <span class="token operator">*</span> i
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// è¾“å‡ºæœ€åçš„å¹³æ–¹æ•°</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> dest <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-4-å¹¶å‘å®‰å…¨lock" tabindex="-1"><a class="header-anchor" href="#_1-4-å¹¶å‘å®‰å…¨lock" aria-hidden="true">#</a> 1.4 å¹¶å‘å®‰å…¨Lock</h4>
<blockquote>
<p>å¤šçº¿ç¨‹ä¸­éƒ½æœ‰çš„é—®é¢˜ï¼Œå¹¶å‘ä¸­çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œç„¶åä¿è¯å¤šä¸ªçº¿ç¨‹ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œé”çš„åº”ç”¨å°±å‡ºæ¥äº†ã€‚</p>
</blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"sync"</span>
    <span class="token string">"time"</span>
<span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºå…¨å±€å˜é‡</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span>
    x    <span class="token builtin">int64</span>
    lock sync<span class="token punctuation">.</span>Mutex
<span class="token punctuation">)</span>
<span class="token comment">// å¯¹å˜é‡è¿›è¡Œ2000æ¬¡çš„+1æ“ä½œï¼Œå¹¶åœ¨æ¯æ¬¡æ“ä½œéƒ½åŠ ä¸Šé”ï¼Œä¿è¯ä¸ä¼šæœ‰å…¶ä»–çº¿ç¨‹å½±å“æœ¬çº¿ç¨‹æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token function">addWithLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token comment">// åŠ é”</span>
        lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        x <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token comment">// è§£é”</span>
        lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// åŒæ ·å¯¹å˜é‡è¿›è¡Œ2000æ¬¡çš„+1æ“ä½œï¼Œä½†æ˜¯ä¸åŠ é”</span>
<span class="token keyword">func</span> <span class="token function">addWithoutLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        x <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆå§‹åŒ–å˜é‡</span>
    x <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token comment">// åˆ›å»º5ä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token function">addWithoutLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"WithoutLock:"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token comment">// è¿™ä¸ªçœ‹æƒ…å†µï¼Œä¸€èˆ¬å°äº10000</span>
    <span class="token comment">// é‡ç½®</span>
    x <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token comment">// åˆ›å»º5ä¸ªåç¨‹å¹¶å‘æ‰§è¡Œ</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        <span class="token function">addWithLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"WithLock:"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token comment">// 10000</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ä¾èµ–ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_2-ä¾èµ–ç®¡ç†" aria-hidden="true">#</a> 2. ä¾èµ–ç®¡ç†</h3>
<h4 id="_2-1-goä¾èµ–ç®¡ç†æ¼”è¿›" tabindex="-1"><a class="header-anchor" href="#_2-1-goä¾èµ–ç®¡ç†æ¼”è¿›" aria-hidden="true">#</a> 2.1 Goä¾èµ–ç®¡ç†æ¼”è¿›</h4>
<blockquote>
<p>Goçš„ä¾èµ–ç®¡ç†åˆ†åˆ«ç»å†äº†GOPATH -&gt; Go Vendor -&gt; Go Moduleï¼Œç›®å‰è¢«å¹¿æ³›é‡‡ç”¨çš„æ˜¯Go Moduleï¼Œæ•´ä¸ªæ¼”è¿›è·¯çº¿ä¸»è¦å›´ç»•ä¸¤ä¸ªç›®æ ‡æ¥è¿­ä»£å‘å±•ï¼šä¸åŒç¯å¢ƒï¼ˆé¡¹ç›®ï¼‰ä¾èµ–çš„ç‰ˆæœ¬ä¸åŒã€æ§åˆ¶ä¾èµ–åº“çš„ç‰ˆæœ¬ã€‚</p>
</blockquote>
<h5 id="_2-1-1-gopath" tabindex="-1"><a class="header-anchor" href="#_2-1-1-gopath" aria-hidden="true">#</a> 2.1.1 GOPATH</h5>
<blockquote>
<p>GOPATHæ˜¯Goè¯­è¨€æ”¯æŒçš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œæœ‰ä»¥ä¸‹ç»“æ„ï¼š</p>
<ul>
<li>srcï¼šå­˜æ”¾Goé¡¹ç›®çš„æºç </li>
<li>pkgï¼šå­˜æ”¾ç¼–ç çš„ä¸­é—´äº§ç‰©ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦</li>
<li>binï¼šå­˜æ”¾Goé¡¹ç›®ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶</li>
</ul>
<p>å¼Šç«¯ï¼š</p>
<p>å¦‚æœå¤šä¸ªé¡¹ç›®ä¾èµ–åŒä¸€ä¸ªåº“ï¼Œåˆ™ä¾èµ–è¯¥åº“çš„åŒä¸€ä»½ä»£ç ï¼Œæ‰€ä»¥ä¸åŒé¡¹ç›®ä¸èƒ½ä¾èµ–åŒä¸€ä¸ªåº“çš„ä¸åŒç‰ˆæœ¬ï¼Œè¿™å¾ˆæ˜¾ç„¶ä¸èƒ½æ»¡è¶³é¡¹ç›®ä¾èµ–éœ€è¦ï¼Œä¸ºè§£å†³è¯¥é—®é¢˜ï¼ŒGo Vendorå‡ºç°äº†ã€‚</p>
</blockquote>
<h5 id="_2-1-2-go-vendor" tabindex="-1"><a class="header-anchor" href="#_2-1-2-go-vendor" aria-hidden="true">#</a> 2.1.2 Go Vendor</h5>
<blockquote>
<p>vendoræ˜¯å½“å‰é¡¹ç›®ä¸­çš„ä¸€ä¸ªç›®å½•ï¼Œå…¶ä¸­å­˜æ”¾äº†å½“å‰é¡¹ç›®ä¾èµ–çš„ç‰ˆæœ¬ã€‚åœ¨Vendoræœºåˆ¶ä¸‹ï¼Œå¦‚æœå½“å‰é¡¹ç›®å­˜åœ¨Vendorç›®å½•ï¼Œä¼šä¼˜å…ˆä½¿ç”¨è¯¥ç›®å½•ä¸‹çš„ä¾èµ–ï¼Œå¦‚æœä¾èµ–ä¸å­˜åœ¨ï¼Œä¼šä»GOPATHä¸­å¯»æ‰¾ã€‚ä½†venderä¸èƒ½å¾ˆå¥½è§£å†³ä¾èµ–åŒ…çš„ç‰ˆæœ¬å˜åŠ¨é—®é¢˜å’Œä¸€ä¸ªé¡¹ç›®ä¾èµ–åŒä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬çš„é—®é¢˜ã€‚</p>
</blockquote>
<h5 id="_2-1-3-go-module" tabindex="-1"><a class="header-anchor" href="#_2-1-3-go-module" aria-hidden="true">#</a> 2.1.3 Go Module</h5>
<blockquote>
<p>Go Moldulesæ˜¯GOè¯­è¨€å®˜æ–¹æ¨å‡ºçš„ä¾èµ–ç®¡ç†ç³»ç»Ÿï¼Œè§£å†³äº†ä¹‹å‰ä¾èµ–ç®¡ç†ç³»ç»Ÿå­˜åœ¨çš„è¯¸åŠ æ— æ³•ä¾èµ–åŒä¸€ä¸ªåº“çš„å¤šä¸ªç‰ˆæœ¬ç­‰é—®é¢˜ï¼Œé€šè¿‡<code v-pre>go.mod</code>æ–‡ä»¶ç®¡ç†ä¾èµ–åŒ…ç‰ˆæœ¬ï¼Œé€šè¿‡<code v-pre>go get/go mod</code>æŒ‡ä»¤å·¥å…·ç®¡ç†ä¾èµ–åŒ…ã€‚</p>
</blockquote>
<h3 id="_3-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•" aria-hidden="true">#</a> 3. æµ‹è¯•</h3>
<h4 id="_3-1-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-1-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 3.1 å•å…ƒæµ‹è¯•</h4>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117210326162.png" alt="image-20230117210326162"></p>
<blockquote>
<p>å•å…ƒæµ‹è¯•ä¸»è¦åŒ…æ‹¬ã€è¾“å…¥ã€æµ‹è¯•å•å…ƒã€è¾“å‡ºä»¥åŠæ ¡å¯¹ï¼Œå•å…ƒçš„æ¦‚å¿µæ¯”è¾ƒå¹¿ï¼ŒåŒ…æ‹¬æ¥å£ã€å‡½æ•°ã€æ¨¡å—ç­‰ï¼›ç”¨æœ€åçš„æ ¡å¯¹æ¥ä¿è¯ä»£ç çš„åŠŸèƒ½ä¸æˆ‘ä»¬çš„é¢„æœŸç›¸ç¬¦ï¼š</p>
<ol>
<li>
<p>å•æµ‹ä¸€æ–¹é¢å¯ä»¥ä¿è¯è´¨é‡ï¼Œåœ¨æ•´ä½“è¦†ç›–ç‡è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œä¸€å®šç¨‹åº¦ä¸Šæ—¢ä¿è¯äº†æ–°åŠŸèƒ½æœ¬èº«çš„æ­£ç¡®æ€§ï¼Œåˆæœªç ´ååŸæœ‰ä»£ç çš„æ­£ç¡®æ€§ã€‚</p>
</li>
<li>
<p>å¦ä¸€æ–¹é¢å¯ä»¥æå‡æ•ˆç‡ï¼Œåœ¨ä»£ç æœ‰bugçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç¼–å†™å•æµ‹ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªè¾ƒçŸ­å‘¨æœŸå†…å®šä½å’Œä¿®å¤é—®é¢˜ã€‚</p>
</li>
</ol>
</blockquote>
<h5 id="_3-1-1-è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_3-1-1-è§„åˆ™" aria-hidden="true">#</a> 3.1.1 è§„åˆ™</h5>
<blockquote>
<ol>
<li>
<p>æ‰€æœ‰æµ‹è¯•æ–‡ä»¶éƒ½ä»¥<code v-pre>_test.go</code>ç»“å°¾</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117211654885.png" alt="image-20230117211654885"></p>
</li>
<li>
<p><code v-pre>func TestXxx(t *testing.T)</code></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117211736761.png" alt="image-20230117211736761"></p>
</li>
<li>
<p>åˆå§‹åŒ–é€»è¾‘æ”¾åˆ° <code v-pre>TestMain</code> é‡Œ</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117213220135.png" alt="image-20230117213220135"></p>
</li>
</ol>
</blockquote>
<h5 id="_3-1-2-ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#_3-1-2-ä¾‹å­" aria-hidden="true">#</a> 3.1.2 ä¾‹å­</h5>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// hello.goæ–‡ä»¶ä¸­çš„å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">HelloTom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œæ¨¡æ‹Ÿå› ä¸ºä¸šåŠ¡ä¸Šçš„é”™è¯¯ï¼Œå¯¼è‡´æœ€åè¾“å‡ºçš„æ˜¯é”™è¯¯ç»“æœ</span>
    <span class="token keyword">return</span> <span class="token string">"helloJerry"</span>
<span class="token punctuation">}</span>

<span class="token comment">// hello_test.goæ–‡ä»¶ä¸­å¯¹åº”çš„æµ‹è¯•å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">TestHelloTom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¥æ”¶ç›®æ ‡æµ‹è¯•å‡½æ•°è¿”å›çš„ç»“æœ</span>
    output <span class="token operator">:=</span> <span class="token function">HelloTom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// æœŸå¾…ç›®æ ‡å‡½æ•°è¿”å›çš„ç»“æœ</span>
    expect <span class="token operator">:=</span> <span class="token string">"helloTom"</span>
    <span class="token comment">// å¦‚æœä¸¤è€…ä¸åŒ¹é…ï¼Œç›´æ¥æŠ›é”™ï¼Œå¹¶ä¸”æ‰“å°å‡ºæ¥è¿™ä¸¤ä¸ªç»“æœ</span>
    <span class="token keyword">if</span> output <span class="token operator">!=</span> expect <span class="token punctuation">{</span>
        t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"ä¸åŒ¹é…ï¼Œoutput:%vï¼Œexpect:%v"</span><span class="token punctuation">,</span> output<span class="token punctuation">,</span> expect<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-3-è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#_3-1-3-è¿è¡Œ" aria-hidden="true">#</a> 3.1.3 è¿è¡Œ</h5>
<blockquote>
<p>è¿è¡Œæµ‹è¯•å‡½æ•°çš„æ–¹æ³•æœ‰å‡ ç§ï¼Œ</p>
<ol>
<li>æ–¹å¼ä¸€ï¼ˆ<code v-pre>goland</code>ï¼‰ï¼š</li>
</ol>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117215202920.png" alt="image-20230117215202920"></p>
<p>æ³¨æ„è¦é€‰ä¸­ç›®æ ‡æ–‡ä»¶å’Œæµ‹è¯•æ–‡ä»¶ä¸¤ä¸ªï¼Œå¦‚æœåªé€‰ä¸­ä¸€ä¸ª<code v-pre>Run</code>ä¸ä¼šæœ‰è¿™ç§é€‰é¡¹ã€‚</p>
<ol start="2">
<li>æ–¹å¼äºŒï¼ˆ<code v-pre>Terminal</code>ï¼‰ï¼š</li>
</ol>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// æµ‹è¯•æ–‡ä»¶å†…çš„æ‰€æœ‰å‡½æ•°</span>
<span class="token keyword">go</span> test <span class="token punctuation">[</span>flags<span class="token punctuation">]</span> <span class="token punctuation">[</span>packages<span class="token punctuation">]</span>
<span class="token comment">// æƒ³åªæµ‹è¯•æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°</span>
<span class="token comment">// å‰ææ˜¯å½“å‰ä½ç½®æ˜¯æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä½ç½®</span>
<span class="token keyword">go</span> test <span class="token operator">-</span>v <span class="token operator">-</span>run <span class="token punctuation">[</span>å‡½æ•°åç§°<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117215811504.png" alt="image-20230117215811504"></p>
</blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117214909374.png" alt="image-20230117214909374"></p>
<blockquote>
<p>è¿™é‡Œè‚¯å®šæ˜¯æµ‹è¯•ä¸é€šè¿‡çš„ï¼Œå› ä¸ºä¸¤ä¸ªç»“æœä¸åŒï¼Œå¦‚æœæŠŠç›®æ ‡å‡½æ•°ä¸­çš„è¿”å›ç»“æœæ”¹æ­£ï¼Œé‚£ä¹ˆ</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117215901181.png" alt="image-20230117215901181"></p>
</blockquote>
<h5 id="_3-1-4-assert" tabindex="-1"><a class="header-anchor" href="#_3-1-4-assert" aria-hidden="true">#</a> 3.1.4 assert</h5>
<blockquote>
<p>ä¸ç”¨å¤šå†™ä»£ç çš„æµ‹è¯•æ¯”è¾ƒå·¥å…·â€”â€”<code v-pre>assertï¼ˆæ–­è¨€ï¼‰</code>ï¼Œ</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// å®‰è£…å·¥å…·åŒ…</span>
<span class="token keyword">go</span> get <span class="token operator">-</span>i github<span class="token punctuation">.</span>com<span class="token operator">/</span>stretchr<span class="token operator">/</span>testify<span class="token operator">/</span>assert
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117220319302.png" alt="image-20230117220319302"></p>
</blockquote>
<h5 id="_3-1-5-è¦†ç›–ç‡" tabindex="-1"><a class="header-anchor" href="#_3-1-5-è¦†ç›–ç‡" aria-hidden="true">#</a> 3.1.5 è¦†ç›–ç‡</h5>
<blockquote>
<p>ç›®å‰æˆ‘ä»¬äº†è§£äº†å¦‚ä½•å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆå¦‚ä½•è¡¡é‡ä»£ç æ˜¯å¦ç»è¿‡äº†è¶³å¤Ÿçš„æµ‹è¯•ï¼Ÿå¦‚ä½•è¯„ä»·é¡¹ç›®çš„æµ‹è¯•æ°´å‡†ï¼Ÿ
å¦‚ä½•è¯„ä¼°é¡¹ç›®æ˜¯å¦è¾¾åˆ°äº†é«˜æ°´å‡†æµ‹è¯•ç­‰çº§ï¼Ÿï¼ˆè‡´å‘½ä¸‰è¿ğŸ˜†ï¼‰â€”â€”â€”â€”é‚£å°±æ˜¯ä»£ç è¦†ç›–ç‡</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117220902643.png" alt="image-20230117220902643"></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117220920158.png" alt="image-20230117220920158"></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117221144424.png" alt="image-20230117221144424"></p>
<blockquote>
<p>å—¯å“¼ï¼Œè§£é‡Šä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œè¿™ä¹ˆä½çš„è¦†ç›–ç‡ï¼Œæ˜¯å› ä¸ºè¿˜æœ‰å¾ˆå¤šå‡½æ•°æ²¡æœ‰æµ‹è¯•åˆ°ï¼Œæˆ‘åªæµ‹è¯•äº† <code v-pre>TestScoreCheck</code> è¿™ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœä½ æ–‡ä»¶ä¸­åªæœ‰è¿™ä¸€ä¸ªå‡½æ•°ï¼Œè¦†ç›–ç‡åº”è¯¥æ˜¯<code v-pre>100%</code>ã€‚</p>
<p>ä½†æ˜¯å¦‚æœ <code v-pre>ScoreCheck</code>ä¸­æ˜¯</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">if</span> score <span class="token operator">>=</span> <span class="token number">60</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆè¦†ç›–ç‡åº”è¯¥æ˜¯ <code v-pre>66.7%</code>ï¼Œå…¶å®è¦†ç›–ç‡å°±æ˜¯å½“å‰æ‰€ä¸¾ç”¨ä¾‹å¯ä»¥<code v-pre>æ‰§è¡Œç›®æ ‡å‡½æ•°çš„ä»£ç è¡Œæ•°çš„å æ¯”</code></p>
</blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117222027630.png" alt="image-20230117222027630"></p>
<p>å†åŠ ä¸ªç”¨ä¾‹ï¼Œè¦†ç›–ç‡å°±è¾¾åˆ°ç™¾åˆ†ä¹‹ç™¾äº†ã€‚</p>
</blockquote>
<p>tipsï¼š</p>
<ul>
<li>ä¸€èˆ¬çš„è¦æ±‚æ˜¯50%~60%è¦†ç›–ç‡ï¼Œè€Œå¯¹äºèµ„é‡‘å‹æœåŠ¡ï¼Œè¦†ç›–ç‡å¯èƒ½è¦æ±‚è¾¾åˆ°80%+</li>
<li>æˆ‘ä»¬åšå•å…ƒæµ‹è¯•ï¼Œæµ‹è¯•åˆ†æ”¯ç›¸äº’ç‹¬ç«‹ã€å…¨é¢è¦†ç›–</li>
<li>è¦æ±‚å‡½æ•°ä½“è¶³å¤Ÿå°ï¼Œè¿™æ ·å°±æ¯”è¾ƒç®€å•çš„æå‡è¦†ç›–ç‡ï¼Œä¹Ÿç¬¦åˆå‡½æ•°è®¾è®¡çš„å•ä¸€èŒè´£</li>
</ul>
<h4 id="_3-2-æ–‡ä»¶å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_3-2-æ–‡ä»¶å¤„ç†" aria-hidden="true">#</a> 3.2 æ–‡ä»¶å¤„ç†</h4>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// read.goä¸­çš„ç›®æ ‡å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">ReadFirstLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ“ä½œæ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦æå‰åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸€å†™æ•°æ®</span>
    <span class="token comment">// line11</span>
    <span class="token comment">// line22</span>
    <span class="token comment">// line33</span>
    <span class="token comment">// line44</span>
    open<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">"log.txt"</span><span class="token punctuation">)</span>
    <span class="token comment">// æœ€åå…³é—­æ–‡ä»¶ï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token keyword">defer</span> open<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// å¦‚æœæœ‰å¼‚å¸¸ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">""</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åˆ›å»ºæ‰«æå™¨</span>
    scanner <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewScanner</span><span class="token punctuation">(</span>open<span class="token punctuation">)</span>
    <span class="token keyword">for</span> scanner<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> scanner<span class="token punctuation">.</span><span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">""</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">ProcessFirstLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¯»å–ç¬¬ä¸€è¡Œæ•°æ®</span>
	line <span class="token operator">:=</span> <span class="token function">ReadFirstLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// å°†æ•°æ®ä¸­çš„â€œ11â€å…¨éƒ¨æ›¿æ¢ä¸ºâ€œ00â€</span>
	destLine <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">ReplaceAll</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"11"</span><span class="token punctuation">,</span> <span class="token string">"00"</span><span class="token punctuation">)</span>
    <span class="token comment">// è¿”å›ä¿®æ”¹åçš„æ•°æ®</span>
	<span class="token keyword">return</span> destLine
<span class="token punctuation">}</span>

<span class="token comment">// read_test.goä¸­çš„æµ‹è¯•å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">TestProcess</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    firstLine <span class="token operator">:=</span> <span class="token function">ProcessFirstLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token string">"line00"</span><span class="token punctuation">,</span> firstLine<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117223233564.png" alt="image-20230117223233564"></p>
<h4 id="_3-3-mock" tabindex="-1"><a class="header-anchor" href="#_3-3-mock" aria-hidden="true">#</a> 3.3 Mock</h4>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨äº†Monkeyï¼Œmonkeyæ˜¯ä¸€ä¸ªå¼€æºçš„mockæµ‹è¯•åº“ï¼Œå¯ä»¥å¯¹methodï¼Œæˆ–è€…å®ä¾‹çš„æ–¹æ³•è¿›è¡Œmockï¼Œ
åå°„ï¼ŒæŒ‡é’ˆèµ‹å€¼ã€‚Mockey Patchçš„ä½œç”¨åŸŸåœ¨Runtimeï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡é€šè¿‡Goçš„unsafeåŒ…ï¼Œèƒ½å¤Ÿå°†å†…å­˜ä¸­å‡½æ•°çš„åœ°å€æ›¿æ¢ä¸ºè¿è¡Œæ—¶å‡½æ•°çš„åœ°å€ï¼Œå°†å¾…æ‰“æ¡©å‡½æ•°æˆ–æ–¹æ³•çš„å®ç°è·³è½¬åˆ°ã€‚</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// ä¸‹è½½monkeyåŒ…</span>
<span class="token keyword">go</span> get <span class="token operator">-</span>i github<span class="token punctuation">.</span>com<span class="token operator">/</span>bouk<span class="token operator">/</span>monkey
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestWithMock</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹ReadFirstLineæ‰“æ¡©æµ‹è¯•ï¼Œä¸å†ä¾èµ–æœ¬åœ°æ–‡ä»¶</span>
    monkey<span class="token punctuation">.</span><span class="token function">Patch</span><span class="token punctuation">(</span>ReadFirstLine<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"line110"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// é‡Šæ”¾èµ„æº</span>
    <span class="token keyword">defer</span> monkey<span class="token punctuation">.</span><span class="token function">Unpatch</span><span class="token punctuation">(</span>ReadFirstLine<span class="token punctuation">)</span>
    line <span class="token operator">:=</span> <span class="token function">ProcessFirstLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// æ¯”è¾ƒç»“æœ</span>
    assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token string">"line000"</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-4-åŸºå‡†æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-4-åŸºå‡†æµ‹è¯•" aria-hidden="true">#</a> 3.4 åŸºå‡†æµ‹è¯•</h4>
<blockquote>
<p>Go è¯­è¨€è¿˜æä¾›äº†åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼ŒåŸºå‡†æµ‹è¯•æ˜¯æŒ‡æµ‹è¯•ä¸€æ®µç¨‹åºçš„è¿è¡Œæ€§èƒ½åŠè€—è´¹CPUçš„ç¨‹åº¦ï¼Œè€Œæˆ‘ä»¬åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä»£ç æ€§èƒ½ç“¶é¢ˆï¼Œä¸ºäº†å®šä½é—®é¢˜ç»å¸¸è¦å¯¹ä»£ç åšæ€§èƒ½åˆ†æï¼Œè¿™å°±ç”¨åˆ°äº†åŸºå‡†æµ‹è¯•ï¼Œä½¿ç”¨æ–¹æ³•ç±»ä¼¼äºå•å…ƒæµ‹è¯•,</p>
</blockquote>
<h5 id="_3-4-1-ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#_3-4-1-ä¾‹å­" aria-hidden="true">#</a> 3.4.1 ä¾‹å­</h5>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// jizhun.goæ–‡ä»¶å‡½æ•°è¯¦æƒ…</span>
<span class="token comment">// æ¨¡æ‹Ÿéšæœºé€‰æ‹©æ‰§è¡ŒæœåŠ¡å™¨</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"math/rand"</span>
<span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæœåŠ¡å™¨æ•°ç»„</span>
<span class="token keyword">var</span> ServerIndex <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token comment">// åˆå§‹åŒ–æœåŠ¡å™¨ä¸­çš„æ•°æ®</span>
<span class="token keyword">func</span> <span class="token function">InitServerIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        ServerIndex<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ¨¡æ‹Ÿéšæœºé€‰æ‹©æœåŠ¡å™¨</span>
<span class="token keyword">func</span> <span class="token function">Select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ServerIndex<span class="token punctuation">[</span>rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// jizhun_test.goæ–‡ä»¶å‡½æ•°è¯¦æƒ…</span>
<span class="token comment">// åŸºå‡†æµ‹è¯•ä¸ºbenchmarkï¼Œæ‰€ä»¥æ˜¯*testing.B</span>
<span class="token keyword">func</span> <span class="token function">BenchmarkSelect</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆå§‹åŒ–æ•°æ®</span>
	<span class="token function">InitServerIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// é‡ç½®å› ä¸ºåˆå§‹åŒ–è€—è´¹çš„æ—¶é—´ï¼Œè¿™äº›æ“ä½œä¸åº”è¯¥ä½œä¸ºåŸºå‡†æµ‹è¯•çš„èŒƒå›´</span>
	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// å¯¹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹çš„é»˜è®¤æµ‹è¯•æ—¶é—´æ˜¯1ç§’ï¼Œå½“æµ‹è¯•ç”¨ä¾‹å‡½æ•°è¿”å›æ—¶è¿˜ä¸åˆ°1ç§’ï¼Œé‚£ä¹ˆ testing.Bä¸­çš„Nå€¼å°†æŒ‰1ã€2ã€5ã€10ã€20ã€50...é€’å¢ï¼Œå¹¶ä»¥é€’å¢åçš„å€¼é‡æ–°è¿›è¡Œç”¨ä¾‹å‡½æ•°æµ‹è¯•</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token function">Select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// runparallelæ˜¯å¤šåç¨‹å¹¶å‘æµ‹è¯•ï¼Œæ‰§è¡Œ2ä¸ªåŸºå‡†æµ‹è¯•ï¼Œå‘ç°ä»£ç åœ¨å¹¶å‘æƒ…å†µä¸‹å­˜åœ¨åŠ£åŒ–ï¼Œä¸»è¦åŸå› æ˜¯randä¸ºäº†ä¿è¯å…¨å±€çš„éšæœºæ€§å’Œå¹¶å‘å®‰å…¨ï¼ŒæŒæœ‰äº†ä¸€æŠŠå…¨å±€é”ã€‚</span>
<span class="token keyword">func</span> <span class="token function">BenchmarkSelectParallel</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆå§‹åŒ–</span>
	<span class="token function">InitServerIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// é‡ç½®æ—¶é—´</span>
	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// å¤šåç¨‹å¹¶å‘æµ‹è¯•</span>
	b<span class="token punctuation">.</span><span class="token function">RunParallel</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>pb <span class="token operator">*</span>testing<span class="token punctuation">.</span>PB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> pb<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">Select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117225445580.png" alt="image-20230117225445580"></p>
<h5 id="_3-4-2-ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-4-2-ä¼˜åŒ–" aria-hidden="true">#</a> 3.4.2 ä¼˜åŒ–</h5>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117225617960.png" alt="image-20230117225617960"></p>
<blockquote>
<p>ä¸ºäº†è§£å†³è¿™ä¸€éšæœºæ€§èƒ½é—®é¢˜ï¼Œå­—èŠ‚å¼€æºäº†ä¸€ä¸ªé«˜æ€§èƒ½è„‘åŠ æ•°æ–¹æ³•<code v-pre>fastrand</code>ï¼Œå†åšä¸€ä¸‹åŸºå‡†æµ‹è¯•ï¼Œæ€§èƒ½æå‡äº†ç™¾å€ã€‚ä¸»è¦çš„æ€è·¯æ˜¯ç‰ºç‰²äº†ä¸€å®šçš„æ•°åˆ—ä¸€è‡´æ€§ï¼Œåœ¨å¤§å¤šæ•°åœºåˆæ˜¯é€‚åˆçš„ï¼Œå¦‚æœåœ¨åé¢é‡åˆ°éšæœºçš„åœºæ™¯å¯ä»¥å°è¯•ç”¨ä¸€ä¸‹ã€‚</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">go</span> get <span class="token operator">-</span>i github<span class="token punctuation">.</span>com<span class="token operator">/</span>bytedance<span class="token operator">/</span>gopkg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230117225930669.png" alt="image-20230117225930669"></p>
</blockquote>
<h3 id="_4-é¡¹ç›®å®è·µ" tabindex="-1"><a class="header-anchor" href="#_4-é¡¹ç›®å®è·µ" aria-hidden="true">#</a> 4. é¡¹ç›®å®è·µ</h3>
<h4 id="_4-1-éœ€æ±‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_4-1-éœ€æ±‚åˆ†æ" aria-hidden="true">#</a> 4.1 éœ€æ±‚åˆ†æ</h4>
<ul>
<li>å±•ç¤ºè¯é¢˜ï¼ˆæ ‡é¢˜ï¼Œæ–‡å­—æè¿°ï¼‰å’Œå›å¸–åˆ—è¡¨</li>
<li>æš‚ä¸è€ƒè™‘å‰ç«¯é¡µé¢å®ç°ï¼Œä»…ä»…å®ç°ä¸€ä¸ªæœ¬åœ°webæœåŠ¡</li>
<li>è¯é¢˜å’Œå›å¸–æ•°æ®ç”¨æ–‡ä»¶å­˜å‚¨</li>
</ul>
<h4 id="_4-2-éœ€æ±‚ç”¨ä¾‹" tabindex="-1"><a class="header-anchor" href="#_4-2-éœ€æ±‚ç”¨ä¾‹" aria-hidden="true">#</a> 4.2 éœ€æ±‚ç”¨ä¾‹</h4>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230118194327077.png" alt="image-20230118194327077 " style="zoom:67%;" />
<blockquote>
<p>ä»ç”¨ä¾‹åˆ†æä¸€æ­¥æ­¥æ‹†è§£å®ç°ï¼Œä¸»è¦æ¶‰åŠ21åŠŸèƒ½ç‚¹ï¼Œç”¨æˆ·æµè§ˆæ¶ˆè´¹ï¼Œæ¶‰åŠé¡µé¢çš„å±•ç¤ºï¼ŒåŒ…æ‹¬åˆ’é¢˜å†…å®¹å’Œå›å¸–çš„åˆ—è¡¨ï¼Œå…¶å®ä»å›¾ä¸­æˆ‘ä»¬åº”è¯¥ä¼šæŠ½å‡º2ä¸ªå®ä½“çš„ï¼Œè€Œå®ä½“çš„å±æ€§ä»¥åŠå®ƒä»¬ä¹‹é—´çš„è”ç³»ä¹Ÿéœ€è¦å¥½å¥½è€ƒè™‘ã€‚</p>
</blockquote>
<h4 id="_4-3-e-rå›¾" tabindex="-1"><a class="header-anchor" href="#_4-3-e-rå›¾" aria-hidden="true">#</a> 4.3 E-Rå›¾</h4>
<blockquote>
<p>ä¸‹é¢æ˜¯ä¸ªE-Rå›¾ï¼Œç”¨æ¥æè¿°ç°å®ä¸–ç•Œçš„æ¦‚å¿µæ‘¸å‹ï¼Œæœ‰äº†æ¨¡å‹å®ä½“ï¼Œå±æ€§ä»¥åŠä¹‹é—´çš„è”ç³»ï¼Œå¯¹æˆ‘ä»¬åç»­åšå¼€å‘å°±æä¾›äº†æ¯”è¾ƒæ¸…æ™°çš„æ€è·¯ã€‚å›åˆ°éœ€æ±‚ï¼Œä¸¤ä¸ªå®ä½“ä¸»è¦åŒ…æ‹¬ï¼Œå®ä½“çš„å±æ€§ï¼Œå®ä½“çš„è”ç³»ï¼Œæœ‰äº†å®ä½“æ¨¡å‹ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ€è€ƒä»£ç ç»“æ„è®¾è®¡ï¼Œæˆ‘ä»¬é‡‡ç”¨å…¸å‹çš„åˆ†å±‚ç»“æ„è®¾è®¡ã€‚</p>
<ul>
<li>Topicï¼ˆoneâ€”è¯é¢˜ï¼‰ï¼š</li>
<li>id</li>
<li>title</li>
<li>content</li>
<li>create_time</li>
<li>Postï¼ˆmanyâ€”å¸–å­ï¼‰ï¼š</li>
<li>id</li>
<li>topic_id</li>
<li>content</li>
<li>create_time</li>
</ul>
</blockquote>
<h4 id="_4-4-åˆ†æˆç»“æ„" tabindex="-1"><a class="header-anchor" href="#_4-4-åˆ†æˆç»“æ„" aria-hidden="true">#</a> 4.4 åˆ†æˆç»“æ„</h4>
<blockquote>
<p>æ•´ä½“åˆ†ä¸ºä¸‰å±‚ï¼Œrepositoryæ•°æ®å±‚ï¼Œserviceé€»è¾‘å±‚ï¼Œcontroolerè§†å›¾å±‚ã€‚</p>
<p>Repositoryæ•°æ®å±‚å…³è”åº•å±‚æ•°æ®æ‘¸å‹ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„modelï¼Œå°è£…å¤–éƒ¨æ•°æ®çš„å¢åˆ æ”¹æŸ¥ï¼Œæˆ‘ä»¬çš„æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ï¼Œé€šè¿‡æ–‡ä»¶æ“ä½œæ‹‰å–è¯é¢˜ã€å¸–å­æ•°æ®ï¼›æ•°æ®å±‚é¢å‘é€»è¾‘å±‚ï¼Œå¯¹serviceå±‚é€æ˜ï¼Œå±è”½ä¸‹æ¸¸æ•°æ®å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯ä¸ç®¡ä¸‹æ¸¸æ˜¯æ–‡ä»¶ï¼Œè¿˜æ˜¯æ•°æ®åº“ï¼Œè¿˜æ˜¯å¾®æœåŠ¡ç­‰ï¼Œå¯¹serviceå±‚çš„æ¥å£æ¨¡å‹æ˜¯ä¸å˜çš„ã€‚</p>
<p>Servcieé€»è¾‘å±‚å¤„ç†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œè®¡ç®—æ‰“åŒ…ä¸šåŠ¡å®ä½“entityï¼Œå¯¹åº”æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå°±æ˜¯è¯é¢˜é¡µé¢ï¼ŒåŒ…æ‹¬è¯é¢˜å’Œå›å¸–åˆ—è¡¨ï¼Œå¹¶ä¸Šé€ç»™è§†å›¾å±‚ã€‚</p>
<p>Controllerè§†å›¾å±‚è´Ÿè´£å¤„ç†å’Œå¤–éƒ¨çš„äº¤äº’é€»è¾‘ï¼Œä»¥viewè§†å›¾çš„å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¯¹äºæˆ‘ä»¬éœ€æ±‚ï¼Œæˆ‘ä»¬å°è£…jsonæ ¼å¼åŒ–çš„è¯·æ±‚ç»“æœï¼Œapiå½¢å¼è®¿é—®å°±å¥½ã€‚</p>
<ul>
<li>æ•°æ®å±‚ï¼šæ•°æ® Modelï¼Œå¤–éƒ¨æ•°æ®çš„å¢åˆ æ”¹æŸ¥</li>
<li>é€»è¾‘å±‚ï¼šä¸šåŠ¡ Entityï¼Œå¤„ç†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¾“å‡º</li>
<li>è§†å›¾å±‚ï¼šè§†å›¾ Viewï¼Œå¤„ç†å’Œå¤–éƒ¨çš„äº¤äº’é€»è¾‘</li>
</ul>
</blockquote>
<h4 id="_4-5-ç»„ä»¶å·¥å…·" tabindex="-1"><a class="header-anchor" href="#_4-5-ç»„ä»¶å·¥å…·" aria-hidden="true">#</a> 4.5 ç»„ä»¶å·¥å…·</h4>
<blockquote>
<ul>
<li>Gin é«˜æ€§èƒ½ go web æ¡†æ¶
<ul>
<li><a href="https://github.com/gin-gonic/gin#installation" target="_blank" rel="noopener noreferrer">https://github.com/gin-gonic/gin#installation<ExternalLinkIcon/></a></li>
</ul>
</li>
<li>Go Mod
<ul>
<li>go mod init</li>
<li>go get</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="_4-6-repository" tabindex="-1"><a class="header-anchor" href="#_4-6-repository" aria-hidden="true">#</a> 4.6 Repository</h4>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">type</span> Topic <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    id
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="goæ€§èƒ½ä¼˜åŒ–-é«˜è´¨é‡ç¼–ç¨‹-é’è®­è¥ç¬”è®°" tabindex="-1"><a class="header-anchor" href="#goæ€§èƒ½ä¼˜åŒ–-é«˜è´¨é‡ç¼–ç¨‹-é’è®­è¥ç¬”è®°" aria-hidden="true">#</a> Goæ€§èƒ½ä¼˜åŒ–-é«˜è´¨é‡ç¼–ç¨‹ | é’è®­è¥ç¬”è®°</h2>
<h3 id="_1-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_1-ç®€ä»‹" aria-hidden="true">#</a> 1. ç®€ä»‹</h3>
<blockquote>
<p>ä»€ä¹ˆæ˜¯<strong>é«˜è´¨é‡ç¼–ç¨‹</strong>ï¼Ÿ</p>
<blockquote>
<p>ç¼–å†™çš„ä»£ç èƒ½å¤Ÿè¾¾åˆ°æ­£ç¡®å¯é ã€ç®€æ´æ¸…æ™°çš„ç›®æ ‡å¯ç§°ä¹‹ä¸ºé«˜è´¨é‡ä»£ç </p>
</blockquote>
<ul>
<li>æ­£ç¡®æ€§ï¼šæ˜¯å¦è€ƒè™‘å„ç§è¾¹ç•Œæ¡ä»¶ï¼Œé”™è¯¯çš„è°ƒç”¨æ˜¯å¦èƒ½å¤Ÿå¤„ç†</li>
<li>å¯é æ€§ï¼šå¼‚å¸¸æƒ…å†µæˆ–è€…é”™è¯¯çš„å¤„ç†ç­–ç•¥æ˜¯å¦æ˜ç¡®ï¼Œä¾èµ–çš„æœåŠ¡å‡ºç°å¼‚å¸¸æ˜¯å¦èƒ½å¤Ÿå¤„ç†</li>
<li>ç®€æ´ï¼šé€»è¾‘æ˜¯å¦ç®€å•ï¼Œåç»­è°ƒæ•´åŠŸèƒ½æˆ–æ–°å¢åŠŸèƒ½æ˜¯å¦èƒ½å¤Ÿå¿«é€Ÿæ”¯æŒ</li>
<li>æ¸…æ™°ï¼šå…¶ä»–äººåœ¨é˜…è¯»ç†è§£ä»£ç çš„æ—¶å€™æ˜¯å¦èƒ½æ¸…æ¥šæ˜ç™½ï¼Œé‡æ„æˆ–è€…ä¿®æ”¹åŠŸèƒ½æ˜¯å¦ä¸ä¼šæ‹…å¿ƒå‡ºç°æ— æ³•é¢„æ–™çš„é—®é¢˜</li>
</ul>
</blockquote>
<blockquote>
<p><strong>ç¼–ç¨‹åŸåˆ™</strong></p>
<blockquote>
<p>å®é™…åº”ç”¨åœºæ™¯åƒå˜ä¸‡åŒ–ï¼Œå„ç§è¯­è¨€çš„ç‰¹æ€§å’Œè¯­æ³•å„ä¸ç›¸åŒä½†æ˜¯é«˜è´¨é‡ç¼–ç¨‹éµå¾ªçš„åŸåˆ™æ˜¯ç›¸é€šçš„</p>
</blockquote>
<p><strong>ç®€å•æ€§</strong></p>
<ul>
<li>æ¶ˆé™¤â€å¤šä½™çš„å¤æ‚æ€§â€ï¼Œä»¥ç®€å•æ¸…æ™°çš„é€»è¾‘ç¼–å†™ä»£ç </li>
<li>ä¸ç†è§£çš„ä»£ç æ— æ³•ä¿®å¤æ”¹è¿›ï¼ˆä¹Ÿå°±æ˜¯å¸¸è¯´çš„â€œå±å±±â€ï¼‰</li>
</ul>
<p><strong>å¯è¯»æ€§</strong></p>
<ul>
<li>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œè€Œä¸æ˜¯æœºå™¨</li>
<li>ç¼–å†™å¯ç»´æŠ¤ä»£ç çš„ç¬¬ä¸€æ­¥æ˜¯ç¡®ä¿ä»£ç å¯è¯»</li>
</ul>
<p><strong>ç”Ÿäº§åŠ›</strong></p>
<ul>
<li>å›¢é˜Ÿæ•´ä½“å·¥ä½œæ•ˆç‡éå¸¸é‡è¦
<ul>
<li>ä¾‹å¦‚ä»£ç è§„èŒƒ</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="_2-ç¼–ç è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_2-ç¼–ç è§„èŒƒ" aria-hidden="true">#</a> 2. ç¼–ç è§„èŒƒ</h3>
<h4 id="_2-1-ä»£ç æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_2-1-ä»£ç æ ¼å¼" aria-hidden="true">#</a> 2.1 ä»£ç æ ¼å¼</h4>
<blockquote>
<p>é¦–å…ˆæ˜¯æ¨èä½¿ç”¨ <code v-pre>gofmt</code> è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œä¿è¯æ‰€æœ‰çš„Goä»£ç ä¸å®˜æ–¹æ¨èæ ¼å¼ä¿æŒä¸€è‡´ï¼Œè€Œä¸”å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé…ç½®ï¼Œåƒ <code v-pre>Goland</code> å†…ç½®äº†ç›¸å…³åŠŸèƒ½ï¼Œç›´æ¥å¼€å¯å³å¯åœ¨ä¿å­˜æ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨æ ¼å¼åŒ–</p>
<p>å¦å¤–å¯ä»¥è€ƒè™‘ <code v-pre>goimports</code>ï¼Œä¼šå¯¹ä¾èµ–åŒ…è¿›è¡Œç®¡ç†ï¼Œè‡ªåŠ¨å¢åˆ ä¾èµ–çš„åŒ…å¼•ç”¨ï¼ŒæŒ‰å­—æ¯åºæ’åºåˆ†ç±»ï¼Œå…·ä½“å¯ä»¥æ ¹æ®å›¢é˜Ÿå®é™…æƒ…å†µé…ç½®ä½¿ç”¨ä¹‹æ‰€ä»¥å°†æ ¼å¼åŒ–æ”¾åœ¨ç¬¬ä¸€æ¡ï¼Œå› ä¸ºè¿™æ˜¯åç»­è§„èŒƒçš„åŸºç¡€ï¼Œå›¢é˜Ÿåˆä½œ <code v-pre>review</code> å…¶ä»–äººçš„ä»£ç æ—¶å°±èƒ½ä½“ä¼šåˆ°è¿™æ¡è§„èŒƒçš„ä½œç”¨äº†</p>
</blockquote>
<h4 id="_2-2-æ³¨é‡Š" tabindex="-1"><a class="header-anchor" href="#_2-2-æ³¨é‡Š" aria-hidden="true">#</a> 2.2 æ³¨é‡Š</h4>
<blockquote>
<p>å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½åœ¨å…³æ³¨ä»£ç å®ç°ï¼Œä½†æ˜¯æ³¨é‡Šçš„é‡è¦æ€§å®¹æ˜“è¢«å¿½è§†</p>
<ul>
<li>æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä½œç”¨</li>
<li>æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å¦‚ä½•åšçš„</li>
<li>æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å®ç°çš„åŸå› </li>
<li>æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä»€ä¹ˆæƒ…å†µä¼šå‡ºé”™</li>
</ul>
<blockquote>
<p>å¥½çš„ä»£ç æœ‰å¾ˆå¤šæ³¨é‡Šï¼Œåä»£ç éœ€è¦å¾ˆå¤šæ³¨é‡Š</p>
</blockquote>
</blockquote>
<h5 id="_1ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_1ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä½œç”¨" aria-hidden="true">#</a> 1ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä½œç”¨</h5>
<blockquote>
<p>é€‚åˆæ³¨é‡Šå…¬å…±ç¬¦å·</p>
</blockquote>
<blockquote>
<p>é¦–å…ˆæ˜¯æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä½œç”¨ï¼Œè¿™ç§æ³¨é‡Šé€‚åˆè¯´æ˜å…¬å…±ç¬¦å·ï¼Œæ¯”å¦‚å¯¹å¤–æä¾›çš„å‡½æ•°æ³¨é‡Šæè¿°å®ƒçš„åŠŸèƒ½å’Œç”¨é€”ã€‚åªæœ‰åœ¨å‡½æ•°çš„åŠŸèƒ½ç®€å•è€Œæ˜æ˜¾æ—¶æ‰èƒ½çœè·¯è¿™äº›æ³¨é‡Šï¼ˆä¾‹å¦‚ï¼Œç®€å•çš„å–å€¼å’Œè®¾å€¼å‡½æ•™ï¼‰å¦å¤–æ³¨é‡Šè¦é¿å…å•°å—¦ï¼Œä¸è¦å¯¹æ˜¾è€Œæ˜“è§çš„å†…å®¹è¿›è¡Œè¯´æ˜ã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124111936110.png" alt="image-20230124111936110"></p>
<p>ä¸‹é¢çš„ä»£ç ä¸­æ³¨é‡Šå°±æ²¡æœ‰å¿…è¦åŠ ä¸Šï¼Œé€šè¿‡åç§°å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“ä½œç”¨ã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124111956892.png" alt="image-20230124111956892"></p>
</blockquote>
<h5 id="_2ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å¦‚ä½•åšçš„" tabindex="-1"><a class="header-anchor" href="#_2ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å¦‚ä½•åšçš„" aria-hidden="true">#</a> 2ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å¦‚ä½•åšçš„</h5>
<blockquote>
<p>é€‚åˆæ³¨é‡Šå®ç°è¿‡ç¨‹</p>
</blockquote>
<blockquote>
<p>ç¬¬äºŒç§æ³¨é‡Šæ˜¯å¯¹ä»£ç ä¸­å¤æ‚çš„ï¼Œå¹¶ä¸æ˜æ˜¾çš„é€»è¾‘è¿›è¡Œè¯´æ˜ï¼Œé€‚åˆæ³¨é‡Šå®ç°è¿‡ç¨‹</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124112205871.png" alt="image-20230124112205871"></p>
<p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯ç»™æ–° <code v-pre>url</code> åŠ ä¸Šæœ€è¿‘çš„ <code v-pre>referer</code> ä¿¡æ¯ï¼Œå¹¶ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾ï¼Œæ‰€ä»¥æ³¨é‡Šè¯´æ˜äº†ä¸€ä¸‹</p>
<p>ä¸‹é¢çš„æ˜¯ä¸€ä¸ªåä¾‹ï¼Œè™½ç„¶æ˜¯å¯¹è¿‡ç¨‹æ³¨é‡Šï¼Œä½†æ˜¯æè¿°çš„æ˜¯æ˜¾è€Œæ˜“è§çš„æµç¨‹ï¼Œæ³¨æ„ä¸è¦ç”¨è‡ªç„¶è¯­è¨€ç›´æ¥ç¿»è¯‘ä»£ç ä½œä¸ºæ³¨é‡Šï¼Œä¿¡æ¯å†—ä½™è¿˜å¥½ï¼Œæœ‰æ—¶å€™è¡¨è¿°ä¸ä¸€å®šå’Œä»£ç ä¸€è‡´</p>
<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124112230700.png" alt="image-20230124112230700 " style="zoom:50%;" />
</blockquote>
<h5 id="_3ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å®ç°çš„åŸå› " tabindex="-1"><a class="header-anchor" href="#_3ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å®ç°çš„åŸå› " aria-hidden="true">#</a> 3ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç å®ç°çš„åŸå› </h5>
<blockquote>
<ul>
<li>é€‚åˆè§£é‡Šä»£ç çš„å¤–éƒ¨å› ç´ </li>
<li>æä¾›é¢å¤–ä¸Šä¸‹æ–‡</li>
</ul>
</blockquote>
<blockquote>
<p>ç¬¬ä¸‰æ¡ï¼Œæ³¨é‡Šå¯ä»¥è§£é‡Šä»£ç çš„å¤–éƒ¨å› ç´ ï¼Œè¿™äº›å› ç´ è„±ç¦»ä¸Šä¸‹æ–‡åé€šå¸¸å¾ˆéš¾ç†è§£</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124112735125.png" alt="image-20230124112735125"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/net/http/client.go#L521" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/net/http/client.go#L521<ExternalLinkIcon/></a></p>
</blockquote>
<p>ç¤ºä¾‹ä¸­æœ‰ä¸€è¡Œ <code v-pre>shouldRedirect=false</code> çš„è¯­å¥ï¼Œå¦‚æœæ²¡æœ‰æ³¨é‡Šï¼Œæ— æ³•æ¸…æ¥šåœ°æ˜ç™½ä¸ºä»€ä¹ˆä¼šè®¾ç½® <code v-pre>false</code> ï¼Œæ‰€ä»¥æ³¨é‡Šé‡Œæåˆ°äº†è¿™ä¹ˆåšçš„åŸå› ï¼Œç»™å‡ºäº†ä¸Šä¸‹æ–‡è¯´æ˜</p>
</blockquote>
<h5 id="_4ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä»€ä¹ˆæƒ…å†µä¼šå‡ºé”™" tabindex="-1"><a class="header-anchor" href="#_4ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä»€ä¹ˆæƒ…å†µä¼šå‡ºé”™" aria-hidden="true">#</a> 4ã€æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç ä»€ä¹ˆæƒ…å†µä¼šå‡ºé”™</h5>
<blockquote>
<p>é€‚åˆè§£é‡Šä»£ç çš„é™åˆ¶æ¡ä»¶</p>
</blockquote>
<blockquote>
<p>ç¬¬å››ï¼Œæ³¨é‡Šåº”è¯¥æé†’ä½¿ç”¨è€…â€”äº›æ½œåœ¨çš„é™åˆ¶æ¡ä»¶æˆ–è€…ä¼šæ— æ³•å¤„ç†çš„æƒ…å†µ</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124112946747.png" alt="image-20230124112946747"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/time/format.go#L1411" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/time/format.go#L1411<ExternalLinkIcon/></a></p>
</blockquote>
<p>ä¾‹å¦‚å‡½æ•°çš„æ³¨é‡Šä¸­å¯ä»¥è¯´æ˜æ˜¯å¦å­˜åœ¨æ€§èƒ½éšæ‚£ï¼Œè¾“å…¥çš„é™åˆ¶æ¡ä»¶ï¼Œå¯èƒ½å­˜åœ¨å“ªäº›é”™è¯¯æƒ…å†µï¼Œè®©ä½¿ç”¨è€…æ— éœ€äº†è§£å®ç°ç»†èŠ‚ï¼Œç¤ºä¾‹ä»‹ç»äº†è§£ææ—¶åŒºå­—ç¬¦ä¸²çš„æµç¨‹ï¼ŒåŒæ—¶å¯¹å¯èƒ½é‡åˆ°çš„ä¸è§„èŒƒå­—ç¬¦ä¸²å¤„ç†è¿›è¡Œäº†è¯´æ˜</p>
</blockquote>
<h5 id="_5ã€å…¬å…±ç¬¦å·å§‹ç»ˆè¦æ³¨é‡Š" tabindex="-1"><a class="header-anchor" href="#_5ã€å…¬å…±ç¬¦å·å§‹ç»ˆè¦æ³¨é‡Š" aria-hidden="true">#</a> 5ã€å…¬å…±ç¬¦å·å§‹ç»ˆè¦æ³¨é‡Š</h5>
<blockquote>
<ul>
<li>åŒ…ä¸­å£°æ˜çš„æ¯ä¸ªå…¬å…±çš„ç¬¦å·:å˜é‡ã€å¸¸é‡ã€å‡½æ•°ä»¥åŠç»“æ„éƒ½éœ€è¦æ·»åŠ æ³¨é‡Š</li>
<li>ä»»ä½•æ—¢ä¸æ˜æ˜¾ä¹Ÿä¸ç®€çŸ­çš„å…¬å…±åŠŸèƒ½å¿…é¡»äºˆä»¥æ³¨é‡Š</li>
<li>æ— è®ºé•¿åº¦æˆ–å¤æ‚ç¨‹åº¦å¦‚ä½•,å¯¹åº“ä¸­çš„ä»»ä½•å‡½æ•°éƒ½å¿…é¡»è¿›è¡Œæ³¨é‡Š</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124113415472.png" alt="image-20230124113415472"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/io/io.go#L694" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/io/io.go#L694<ExternalLinkIcon/></a></p>
</blockquote>
<p>ç¤ºä¾‹æ˜¯ä¸€ä¸ªå…¬å…±å‡½æ•°çš„æ³¨é‡Šè¯´æ˜ï¼Œç»“åˆä¹‹å‰æåˆ°çš„è§„èŒƒï¼Œæ³¨é‡Šè¡¨è¿°äº†å‡½æ•°çš„åŠŸèƒ½å’Œå¦‚ä½•å·¥ä½œçš„</p>
<p><strong>å½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–</strong>ï¼Œå°±æ˜¯æ³¨é‡Šæ²¡æœ‰æä¾›æœ‰ç”¨çš„ä¿¡æ¯ã€‚å®ƒæ²¡æœ‰å‘Šè¯‰ä½ è¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆï¼Œæ›´ç³Ÿç³•æ˜¯å®ƒå‘Šè¯‰ä½ å»çœ‹å…¶ä»–åœ°æ–¹çš„æ–‡æ¡£ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®å®Œå…¨åˆ é™¤è¯¥æ³¨é‡Š</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124113717610.png" alt="image-20230124113717610"></p>
</blockquote>
<h5 id="_6ã€å°ç»“" tabindex="-1"><a class="header-anchor" href="#_6ã€å°ç»“" aria-hidden="true">#</a> 6ã€å°ç»“</h5>
<ul>
<li>ä»£ç æ˜¯æœ€å¥½çš„æ³¨é‡Š</li>
<li>æ³¨é‡Šåº”è¯¥æä¾›ä»£ç æœªè¡¨è¾¾å‡ºçš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ul>
<h4 id="_2-3-å‘½åè§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_2-3-å‘½åè§„èŒƒ" aria-hidden="true">#</a> 2.3 å‘½åè§„èŒƒ</h4>
<h5 id="_2-3-1-variable" tabindex="-1"><a class="header-anchor" href="#_2-3-1-variable" aria-hidden="true">#</a> 2.3.1 Variable</h5>
<blockquote>
<p>å†™ä»£ç ä¸­æœ€å¸¸è§çš„å°±æ˜¯å‘½åäº†ï¼Œæœ€å¤´ç–¼çš„ä¹Ÿæ˜¯å‘½åäº†ï¼Œæƒ³æƒ³å°±å¼€å§‹çº ç»“äº†ğŸ˜‚</p>
</blockquote>
<blockquote>
<ul>
<li><strong>ç®€æ´</strong>èƒœäºå†—é•¿</li>
<li><strong>ç¼©ç•¥è¯å…¨å¤§å†™</strong>ï¼Œä½†å½“å…¶ä½äºå˜é‡å¼€å¤´ä¸”ä¸éœ€è¦å¯¼å‡ºæ—¶ï¼Œä½¿ç”¨å…¨å°å†™</li>
<li>ä¾‹å¦‚ä½¿ç”¨ServeHTTPè€Œä¸æ˜¯ServeHttp</li>
<li>ä½¿ç”¨XMLHTTPRequest æˆ–è€…xmlHTTPRequest</li>
<li>å˜é‡è·ç¦»å…¶è¢«ä½¿ç”¨çš„åœ°æ–¹<strong>è¶Šè¿œ</strong>ï¼Œåˆ™éœ€è¦æºå¸¦<strong>è¶Šå¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯</strong></li>
<li>å…¨å±€å˜é‡åœ¨å…¶åå­—ä¸­éœ€è¦æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½¿å¾—åœ¨ä¸åŒåœ°æ–¹å¯ä»¥è½»æ˜“è¾¨è®¤å‡ºå…¶å«ä¹‰</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124114442404.png" alt="image-20230124114442404"></p>
<p>iå’Œindexçš„ä½œç”¨åŸŸèŒƒå›´ä»…é™äºforå¾ªç¯å†…éƒ¨æ—¶ï¼Œindexçš„é¢å¤–å†—é•¿å‡ ä¹æ²¡æœ‰å¢åŠ å¯¹äºç¨‹åºçš„ç†è§£ï¼Œæ‰€ä»¥æ›´åŠ ç®€å•çš„ä¸ºå¥½ã€‚ä½†æ˜¯ç´¢å¼•çš„ä½œç”¨åŸŸæ‰©å±•ï¼Œåœ¨å¾ªç¯å¤–ä¹Ÿä¼šç”¨åˆ°çš„æ—¶å€™ï¼Œå°±è¦è€ƒè™‘æ›´åŠ ç¬¦åˆéœ€æ±‚çš„åç§°äº†ã€‚</p>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124114710146.png" alt="image-20230124114710146"></p>
<ul>
<li>å°†deadlineæ›¿æ¢æˆté™ä½äº†å˜é‡åçš„ä¿¡æ¯é‡ã€‚tå¸¸ä»£æŒ‡ä»»æ„æ—¶é—´ï¼ŒdeadlineæŒ‡æˆªæ­¢æ—¶é—´ï¼Œæœ‰ç‰¹å®šçš„å«ä¹‰</li>
<li>å‡½æ•°æä¾›ç»™å¤–éƒ¨è°ƒç”¨æ—¶ï¼Œç­¾åçš„ä¿¡æ¯å¾ˆé‡è¦ï¼Œè¦å°†è‡ªå·±çš„åŠŸèƒ½å‡†ç¡®è¡¨ç°å‡ºæ¥ï¼Œè‡ªåŠ¨æç¤ºä¸€èˆ¬ä¹Ÿä¼šæç¤ºå‡½æ•°çš„æ–¹æ³•ç­¾åï¼Œé€šè¿‡å‚æ•°åæ›´å¥½çš„ç†è§£åŠŸèƒ½å¾ˆæœ‰å¿…è¦ï¼ŒèŠ‚çœæ—¶é—´</li>
</ul>
</blockquote>
<h5 id="_2-3-2-function" tabindex="-1"><a class="header-anchor" href="#_2-3-2-function" aria-hidden="true">#</a> 2.3.2 function</h5>
<blockquote>
<ul>
<li>å‡½æ•°åä¸æºå¸¦åŒ…åçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå› ä¸ºåŒ…åå’Œå‡½æ•°åæ€»æ˜¯æˆå¯¹å‡ºç°çš„</li>
<li>å‡½æ•°åå°½é‡ç®€çŸ­</li>
<li>å½“åä¸ºfooçš„åŒ…æŸä¸ªå‡½æ•°è¿”å›ç±»å‹Fooæ—¶ï¼Œå¯ä»¥çœç•¥ç±»å‹ä¿¡æ¯è€Œä¸å¯¼è‡´æ­§ä¹‰</li>
<li>å½“åä¸ºfooçš„åŒ…æŸä¸ªå‡½æ•°è¿”å›ç±»å‹â… æ—¶(Tå¹¶ä¸æ˜¯Foo)ï¼Œå¯ä»¥åœ¨å‡½æ•°åä¸­åŠ å…¥ç±»å‹ä¿¡æ¯</li>
</ul>
</blockquote>
<h5 id="_2-3-3-package" tabindex="-1"><a class="header-anchor" href="#_2-3-3-package" aria-hidden="true">#</a> 2.3.3 package</h5>
<blockquote>
<ul>
<li>åªç”±å°å†™å­—æ¯ç»„æˆã€‚ä¸åŒ…å«å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿ç­‰å­—ç¬¦</li>
<li>ç®€çŸ­å¹¶åŒ…å«ä¸€å®šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ <code v-pre>schema</code>ã€<code v-pre>task</code> ç­‰</li>
<li>ä¸è¦ä¸æ ‡å‡†åº“åŒåã€‚ä¾‹å¦‚ä¸è¦ä½¿ç”¨ <code v-pre>sync</code> æˆ–è€… <code v-pre>strings</code></li>
</ul>
<p>ä»¥ä¸‹è§„åˆ™å°½é‡æ»¡è¶³ï¼Œä»¥æ ‡å‡†åº“åŒ…åä¸ºä¾‹</p>
<ul>
<li>ä¸ä½¿ç”¨å¸¸ç”¨å˜é‡åä½œä¸ºåŒ…åã€‚ä¾‹å¦‚ä½¿ç”¨ <code v-pre>bufio</code> è€Œä¸æ˜¯ <code v-pre>buf</code></li>
<li>ä½¿ç”¨å•æ•°è€Œä¸æ˜¯å¤æ•°ã€‚ä¾‹å¦‚ä½¿ç”¨ <code v-pre>encoding</code> è€Œä¸æ˜¯ <code v-pre>encodings</code></li>
<li>è°¨æ…åœ°ä½¿ç”¨ç¼©å†™ã€‚ä¾‹å¦‚ä½¿ç”¨ <code v-pre>fmt</code> åœ¨ä¸ç ´åä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹æ¯” <code v-pre>format</code> æ›´åŠ ç®€çŸ­</li>
</ul>
</blockquote>
<h5 id="_2-3-4-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_2-3-4-å°ç»“" aria-hidden="true">#</a> 2.3.4 å°ç»“</h5>
<blockquote>
<ul>
<li>æ ¸å¿ƒç›®æ ‡æ˜¯é™ä½é˜…è¯»ç†è§£ä»£ç çš„æˆæœ¬</li>
<li>é‡ç‚¹è€ƒè™‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè®¾è®¡ç®€æ´æ¸…æ™°çš„åç§°</li>
</ul>
<p>æ€»ä½“æ¥è¯´ï¼Œå‘½åçš„æ ¸å¿ƒåœ¨äºé™ä½é˜…è¯»ç†è§£ä»£ç çš„æˆæœ¬ï¼Œäººä»¬åœ¨é˜…è¯»ç†è§£ä»£ç çš„æ—¶å€™ä¼šå°è¯•æ¨¡æ‹Ÿè®¡ç®—æœºè¿è¡Œç¨‹åºï¼Œå¥½çš„å‘½åèƒ½è®©äººæŠŠå…³æ³¨ç‚¹ç•™åœ¨ä¸»æµç¨‹ä¸Šï¼Œæ¸…æ™°åœ°ç†è§£ç¨‹åºçš„åŠŸèƒ½ï¼Œé¿å…é¢‘ç¹åˆ‡æ¢åˆ°åˆ†æ”¯ç»†èŠ‚ï¼Œå¢åŠ ç†è§£æˆæœ¬ã€‚</p>
<blockquote>
<p>å¥½çš„å‘½åå°±åƒä¸€ä¸ªå¥½ç¬‘è¯ã€‚å¦‚æœä½ å¿…é¡»è§£é‡Šå®ƒï¼Œé‚£å°±ä¸å¥½ç¬‘äº†</p>
</blockquote>
</blockquote>
<h4 id="_2-4-æ§åˆ¶æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2-4-æ§åˆ¶æµç¨‹" aria-hidden="true">#</a> 2.4 æ§åˆ¶æµç¨‹</h4>
<blockquote>
<p>é¿å…åµŒå¥—ï¼Œä¿æŒæ­£å¸¸æµç¨‹æ¸…æ™°</p>
</blockquote>
<blockquote>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124125335625.png" alt="image-20230124125335625 " style="zoom:50%;" />
<p>ä»æœ€ç®€å•çš„ä¸€ä¸ª <code v-pre>if else</code> æ¡ä»¶å¼€å§‹ï¼Œå¦‚æœä¸¤ä¸ªåˆ†æ”¯éƒ½åŒ…å« <code v-pre>return</code> è¯­å¥ï¼Œåˆ™å¯ä»¥å»é™¤å†—ä½™çš„ <code v-pre>else</code> æ–¹ä¾¿åç»­ç»´æŠ¤ï¼Œ<code v-pre>else</code> ä¸€èˆ¬æ˜¯æ­£å¸¸æµç¨‹ï¼Œå¦‚è¿‡éœ€è¦åœ¨æ­£å¸¸æµç¨‹æ–°å¢åˆ¤æ–­é€»è¾‘ï¼Œé¿å…åˆ†æ”¯åµŒå¥—</p>
</blockquote>
<blockquote>
<p>å°½é‡ä¿æŒæ­£å¸¸ä»£ç è·¯å¾„ä¸ºæœ€å°ç¼©è¿›ï¼Œä¼˜å…ˆå¤„ç†é”™è¯¯æƒ…å†µ / ç‰¹æ®Šæƒ…å†µï¼Œå°½æ—©è¿”å›æˆ–ç»§ç»­å¾ªç¯æ¥å‡å°‘åµŒå¥—</p>
</blockquote>
<blockquote>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124125657151.png" alt="image-20230124125657151 " style="zoom:67%;" />
<ul>
<li>æœ€å¸¸è§çš„æ­£å¸¸æµç¨‹çš„è·¯å¾„è¢«åµŒå¥—åœ¨ä¸¤ä¸ª if æ¡ä»¶å†…</li>
<li>æˆåŠŸçš„é€€å‡ºæ¡ä»¶æ˜¯ <code v-pre>return nil</code>ï¼Œå¿…é¡»ä»”ç»†åŒ¹é…å¤§æ‹¬å·æ¥å‘ç°</li>
<li>å‡½æ•°æœ€åä¸€è¡Œè¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œéœ€è¦è¿½æº¯åˆ°åŒ¹é…çš„å·¦æ‹¬å·ï¼Œæ‰èƒ½äº†è§£ä½•æ—¶ä¼šè§¦å‘é”™è¯¯</li>
<li>å¦‚æœåç»­æ­£å¸¸æµç¨‹éœ€è¦å¢åŠ ä¸€æ­¥æ“ä½œï¼Œè°ƒç”¨æ–°çš„å‡½æ•°ï¼Œåˆ™åˆä¼šå¢åŠ ä¸€å±‚åµŒå¥—</li>
</ul>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124125808582.png" alt="image-20230124125808582 " style="zoom:67%;" />
<blockquote>
<p>è°ƒæ•´å</p>
</blockquote>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124125855292.png" alt="image-20230124125855292 " style="zoom:67%;" />
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/bufio/bufio.go#L277" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/bufio/bufio.go#L277<ExternalLinkIcon/></a></p>
</blockquote>
<p>ä¸Šé¢æ˜¯goä»“åº“ä¸­çš„ä»£ç ç¤ºä¾‹ï¼Œä¹Ÿæ˜¯ä¼˜å…ˆå¤„ç†erræƒ…å†µï¼Œä¿æŒæ­£å¸¸æµç¨‹çš„ç»Ÿä¸€</p>
</blockquote>
<p>å°ç»“ï¼š</p>
<ul>
<li>çº¿æ€§åŸç†ï¼Œå¤„ç†é€»è¾‘å°½é‡èµ°ç›´çº¿ï¼Œé¿å…å¤æ‚çš„åµŒå¥—åˆ†æ”¯</li>
<li>æ­£å¸¸æµç¨‹ä»£ç æ²¿ç€å±å¹•å‘ä¸‹ç§»åŠ¨</li>
<li>æå‡ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§</li>
<li>æ•…éšœé—®é¢˜å¤§å¤šå‡ºç°åœ¨å¤æ‚çš„æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­</li>
</ul>
<h4 id="_2-5-é”™è¯¯å’Œå¼‚å¸¸å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-5-é”™è¯¯å’Œå¼‚å¸¸å¤„ç†" aria-hidden="true">#</a> 2.5 é”™è¯¯å’Œå¼‚å¸¸å¤„ç†</h4>
<h5 id="_2-5-1-ç®€å•é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_2-5-1-ç®€å•é”™è¯¯" aria-hidden="true">#</a> 2.5.1 ç®€å•é”™è¯¯</h5>
<blockquote>
<ul>
<li>ç®€å•çš„é”™è¯¯æŒ‡çš„æ˜¯ä»…å‡ºç°ä¸€æ¬¡çš„é”™è¯¯ï¼Œä¸”åœ¨å…¶ä»–åœ°æ–¹ä¸éœ€è¦æ•è·è¯¥é”™</li>
<li>ä¼˜å…ˆä½¿ç”¨ <code v-pre>errors.New</code> æ¥åˆ›å»ºåŒ¿åå˜é‡æ¥ç›´æ¥è¡¨ç¤ºç®€å•é”™è¯¯</li>
<li>å¦‚æœæœ‰æ ¼å¼åŒ–çš„éœ€æ±‚ï¼Œä½¿ç”¨ <code v-pre>fmt.Errorf</code></li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124130336256.png" alt="image-20230124130336256"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/net/http/client.go#L802" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/net/http/client.go#L802<ExternalLinkIcon/></a></p>
</blockquote>
</blockquote>
<h5 id="_2-5-2-é”™è¯¯çš„wrapå’Œunwrap" tabindex="-1"><a class="header-anchor" href="#_2-5-2-é”™è¯¯çš„wrapå’Œunwrap" aria-hidden="true">#</a> 2.5.2 é”™è¯¯çš„Wrapå’ŒUnwrap</h5>
<blockquote>
<ul>
<li>é”™è¯¯çš„ <code v-pre>Wrap</code> å®é™…ä¸Šæ˜¯æä¾›äº†ä¸€ä¸ª <code v-pre>error</code> åµŒå¥—å¦ä¸€ä¸ª <code v-pre>error</code> çš„èƒ½åŠ›ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ª <code v-pre>error</code> çš„è·Ÿè¸ªé“¾</li>
<li>åœ¨ <code v-pre>fmt.Errorf</code> ä¸­ä½¿ç”¨ï¼š<code v-pre>%w</code> å…³é”®å­—æ¥å°†ä¸€ä¸ªé”™è¯¯å…³è”è‡³é”™è¯¯é“¾ä¸­</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124130659770.png" alt="image-20230124130659770"></p>
<p>åŒæ—¶ç»“åˆé”™è¯¯çš„åˆ¤å®šæ–¹æ³•æ¥ç¡®è®¤è°ƒç”¨é“¾ä¸­æ˜¯å¦æœ‰å…³æ³¨çš„é”™è¯¯å‡ºç°ã€‚è¿™ä¸ªèƒ½åŠ›çš„å¥½å¤„æ˜¯æ¯ä¸€å±‚è°ƒç”¨æ–¹å¯ä»¥è¡¥å……è‡ªå·±å¯¹åº”çš„ä¸Šä¸‹æ–‡ï¼Œæ–¹ä¾¿è·Ÿè¸ªæ’æŸ¥é—®é¢˜ï¼Œç¡®å®šé—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨å“ªé‡Œ</p>
</blockquote>
<h5 id="_2-5-3-é”™è¯¯åˆ¤å®š" tabindex="-1"><a class="header-anchor" href="#_2-5-3-é”™è¯¯åˆ¤å®š" aria-hidden="true">#</a> 2.5.3 é”™è¯¯åˆ¤å®š</h5>
<blockquote>
<ul>
<li>åˆ¤å®šä¸€ä¸ªé”™è¯¯æ˜¯å¦ä¸ºç‰¹å®šé”™è¯¯ï¼Œä½¿ç”¨ <code v-pre>errors.ls</code></li>
<li>ä¸åŒäºä½¿ç”¨ <code v-pre>==</code>ï¼Œä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥åˆ¤å®šé”™è¯¯é“¾ä¸Šçš„æ‰€æœ‰é”™è¯¯æ˜¯å¦å«æœ‰ç‰¹å®šçš„é”™è¯¯</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124132323703.png" alt="image-20230124132323703"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/cmd/go/internal/modfetch/sumdb.go#L208" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/cmd/go/internal/modfetch/sumdb.go#L208<ExternalLinkIcon/></a></p>
</blockquote>
</blockquote>
<blockquote>
<ul>
<li>åœ¨é”™è¯¯é“¾ä¸Šè·å–ç‰¹å®šç§ç±»çš„é”™è¯¯ï¼Œä½¿ç”¨ <code v-pre>errors.As</code></li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124132516245.png" alt="image-20230124132516245"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/errors/wrap_test.go#L255" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/errors/wrap_test.go#L255<ExternalLinkIcon/></a></p>
</blockquote>
<p>å®ƒå’Œisçš„åŒºåˆ«åœ¨äºasä¼šæå–å‡ºè°ƒç”¨é“¾ä¸­æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œå¹¶å°†é”™è¯¯èµ‹å€¼ç»™å®šä¹‰å¥½çš„å˜é‡ï¼Œæ–¹ä¾¿åç»­å¤„ç†ï¼Œç¤ºä¾‹ä¸­æ˜¯æŠŠé—®é¢˜çš„pathæ‰“å°å‡ºæ¥äº†</p>
</blockquote>
<h5 id="_2-5-4-panic" tabindex="-1"><a class="header-anchor" href="#_2-5-4-panic" aria-hidden="true">#</a> 2.5.4 panic</h5>
<blockquote>
<ul>
<li>ä¸å»ºè®®åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ <code v-pre>panic</code></li>
<li>è°ƒç”¨å‡½æ•°ä¸åŒ…å« <code v-pre>recover</code> ä¼šé€ æˆç¨‹åºå´©æºƒ</li>
<li>è‹¥é—®é¢˜å¯ä»¥è¢«å±è”½æˆ–è§£å†³ï¼Œå»ºè®®ä½¿ç”¨ <code v-pre>error</code> ä»£æ›¿ <code v-pre>panic</code></li>
<li>å½“ç¨‹åºå¯åŠ¨é˜¶æ®µå‘ç”Ÿä¸å¯é€†è½¬çš„é”™è¯¯æ—¶ï¼Œå¯ä»¥åœ¨ <code v-pre>init</code> æˆ– <code v-pre>main</code> å‡½æ•°ä¸­ä½¿ç”¨ <code v-pre>panic</code></li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124133105546.png" alt="image-20230124133105546"></p>
<blockquote>
<p><a href="https://github.com/Shopify/sarama/blob/main/examples/consumergroup/main.go#L94" target="_blank" rel="noopener noreferrer">https://github.com/Shopify/sarama/blob/main/examples/consumergroup/main.go#L94<ExternalLinkIcon/></a></p>
</blockquote>
<p>æ¯”é”™è¯¯æ›´åŠ ä¸¥é‡çš„å°±æ˜¯ <code v-pre>panic</code>ï¼Œå› ä¸ºå®ƒçš„å‡ºç°å°±æ„å‘³ç€ç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œäº†</p>
</blockquote>
<h5 id="_2-5-5-recover" tabindex="-1"><a class="header-anchor" href="#_2-5-5-recover" aria-hidden="true">#</a> 2.5.5 recover</h5>
<blockquote>
<ul>
<li><code v-pre>recover</code> åªèƒ½åœ¨è¢« <code v-pre>defer</code> çš„å‡½æ•°ä¸­ä½¿ç”¨</li>
<li>åµŒå¥—æ— æ³•ç”Ÿæ•ˆ</li>
<li>åªåœ¨å½“å‰ <code v-pre>goroutine</code> ç”Ÿæ•ˆ</li>
<li><code v-pre>defer</code> çš„è¯­å¥æ˜¯åè¿›å…ˆå‡º</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124133357745.png" alt="image-20230124133357745"></p>
<blockquote>
<p><a href="https://github.com/golang/go/blob/master/src/fmt/scan.go#L247" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/blob/master/src/fmt/scan.go#L247<ExternalLinkIcon/></a></p>
</blockquote>
</blockquote>
<blockquote>
<ul>
<li>å¦‚æœéœ€è¦æ›´å¤šçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯ä»¥ <code v-pre>recover</code> ååœ¨ <code v-pre>log</code> ä¸­è®°å½•å½“å‰çš„è°ƒç”¨æ ˆ</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124134040804.png" alt="image-20230124134040804"></p>
<blockquote>
<p><a href="https://github.com/golang/website/blob/master/internal/gitfs/fs.go#L228" target="_blank" rel="noopener noreferrer">https://github.com/golang/website/blob/master/internal/gitfs/fs.go#L228<ExternalLinkIcon/></a></p>
</blockquote>
</blockquote>
<h5 id="_2-5-6-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_2-5-6-å°ç»“" aria-hidden="true">#</a> 2.5.6 å°ç»“</h5>
<ul>
<li><code v-pre>error</code> å°½å¯èƒ½æä¾›ç®€æ˜çš„ä¸Šä¸‹æ–‡ä¿¡æ¯é“¾ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜</li>
<li><code v-pre>panic</code> ç”¨äºçœŸæ­£å¼‚å¸¸çš„æƒ…å†µ</li>
<li><code v-pre>recover</code> ç”Ÿæ•ˆèŒƒå›´ï¼Œåœ¨å½“å‰ <code v-pre>goroutine</code> çš„è¢« <code v-pre>defer</code> çš„å‡½æ•°ä¸­ç”Ÿæ•ˆ</li>
</ul>
<blockquote>
<p>å› ä¸ºé”™è¯¯å’Œå¼‚å¸¸æ˜¯ä¸æ­£å¸¸çš„æƒ…å†µï¼Œé™¤äº†å¸Œæœ›ç¨‹åºèƒ½å…¼å®¹è¿™äº›åœºæ™¯å¤–ï¼Œé‡è¦çš„ä¹Ÿæœ‰è®°å½•é—®é¢˜çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­å®šä½åŸå› åœ¨æ˜ç¡® <code v-pre>panic recover</code> è¿™äº›åŠŸèƒ½çš„ä½œç”¨èŒƒå›´çš„æƒ…å†µä¸‹ï¼Œç¼–å†™æ›´å¯é çš„ç¨‹åº</p>
</blockquote>
<h3 id="_3-æ€§èƒ½ä¼˜åŒ–å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_3-æ€§èƒ½ä¼˜åŒ–å»ºè®®" aria-hidden="true">#</a> 3. æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<h4 id="_3-0-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_3-0-ç®€ä»‹" aria-hidden="true">#</a> 3.0 ç®€ä»‹</h4>
<blockquote>
<p>é«˜è´¨é‡çš„ä»£ç èƒ½å¤Ÿå®ŒæˆåŠŸèƒ½ï¼Œä½†æ˜¯åœ¨å¤§è§„æ¨¡ç¨‹åºéƒ¨ç½²çš„åœºæ™¯ï¼Œä»…ä»…æ”¯æŒæ­£å¸¸åŠŸèƒ½è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜è¦å°½å¯èƒ½çš„æå‡æ€§èƒ½ï¼ŒèŠ‚çœèµ„æºæˆæœ¬ï¼Œæ¥ä¸‹æ¥å°±ä¸»è¦ä»‹ç»æ€§èƒ½ç›¸å…³çš„å»ºè®®</p>
<p>é«˜æ€§èƒ½ä»£ç ä¸ºäº†æ•ˆç‡ä¼šç”¨åˆ°è®¸å¤šæŠ€å·§ï¼Œæ²¡æœ‰ç›¸å…³èƒŒæ™¯çš„äººéš¾ä»¥ç†è§£ï¼Œä¸è¿‡æœ‰äº›åŸºç¡€æ€§èƒ½é—®é¢˜æ˜¯å’Œè¯­è¨€æœ¬èº«ç›¸å…³çš„ï¼Œæ¥ä¸‹æ¥ä¸»è¦ä»‹ç»è¿™ç±»å†…å®¹ï¼Œå¯¹åº”çš„è°ƒæ•´å¯¹å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å½±å“ä¸å¤§åœ¨æ»¡è¶³æ­£ç¡®æ€§ã€å¯é æ€§ã€å¥å£®æ€§ã€å¯è¯»æ€§ç­‰è´¨é‡å› ç´ çš„å‰æä¸‹ï¼Œè®¾æ³•æé«˜ç¨‹åºçš„æ€§èƒ½</p>
<p>æœ‰æ—¶å€™æ—¶é—´æ•ˆç‡å’Œç©ºé—´æ•ˆç‡å¯èƒ½å¯¹ç«‹ï¼Œæ­¤æ—¶åº”å½“åˆ†æé‚£ä¸ªæ›´é‡è¦ï¼Œä½œå‡ºé€‚å½“çš„æŠ˜è¡·ã€‚ä¾‹å¦‚å¤šèŠ±è´¹ä¸€äº›å†…å­˜æ¥æé«˜æ€§èƒ½é’ˆå¯¹Goè¯­è¨€ç¼–ç¨‹ï¼Œä»‹ç»Goç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–å»ºè®®</p>
</blockquote>
<blockquote>
<ul>
<li>æ€§èƒ½ä¼˜åŒ–çš„å‰ææ˜¯æ»¡è¶³æ­£ç¡®å¯é ã€ç®€æ´æ¸…æ™°ç­‰è´¨é‡å› ç´ </li>
<li>æ€§èƒ½ä¼˜åŒ–æ˜¯ç»¼åˆè¯„ä¼°ï¼Œæœ‰æ—¶å€™æ—¶é—´æ•ˆç‡å’Œç©ºé—´æ•ˆç‡å¯èƒ½å¯¹ç«‹</li>
<li>é’ˆå¯¹Goè¯­è¨€ç‰¹æ€§ï¼Œä»‹ç»Goç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–å»ºè®®</li>
</ul>
</blockquote>
<h4 id="_3-1-benchmark" tabindex="-1"><a class="header-anchor" href="#_3-1-benchmark" aria-hidden="true">#</a> 3.1 Benchmark</h4>
<blockquote>
<ul>
<li>æ€§èƒ½è¡¨ç°éœ€è¦å®é™…æ•°æ®è¡¡é‡</li>
<li>Goè¯­é«˜æä¾›äº†æ”¯æŒåŸºå‡†æ€§èƒ½æµ‹è¯•çš„ <code v-pre>benchmark</code> å·¥å…·</li>
</ul>
</blockquote>
<blockquote>
<p>æˆ‘ä»¬ä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‡½æ•°ä¸ºä¾‹ï¼Œç¼–å†™ <code v-pre>fib.go</code> å’Œæµ‹è¯•æ–‡ä»¶ <code v-pre>fib_test.go</code>ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œè¿è¡Œ 	<code v-pre>benchmark</code> å¯ä»¥å¾—åˆ°è¯¦ç»†çš„æµ‹è¯•ç»“æœï¼ˆ<code v-pre>-benchmem</code> è¡¨ç¤ºä¹Ÿç»Ÿè®¡å†…å­˜æ¶ˆæ¯ï¼‰</p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// åœ¨ä¸¤ä¸ªå‡½æ•°çš„å½“å‰æ–‡ä»¶ä¸‹æ‰§è¡Œæ­¤å‘½ä»¤ï¼ˆæœ€å¥½æ–‡ä»¶å†…åªæœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼‰</span>
<span class="token keyword">go</span> test <span class="token operator">-</span>bench <span class="token punctuation">.</span> <span class="token operator">-</span>benchmem
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div> <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124174116273.png" alt="image-20230124174116273 " style="zoom:50%;" />
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124180605252.png" alt="image-20230124180605252"></p>
<blockquote>
<p>ç®€å•ä»‹ç»ä¸€ä¸‹å„é¡¹çš„å«ä¹‰ï¼š</p>
<ul>
<li><code v-pre>BenchmarkFib10</code> æ˜¯æµ‹è¯•å‡½æ•°åï¼›-8è¡¨ç¤º <code v-pre>GOMAXPROCS</code> çš„å€¼ä¸º8</li>
<li>è¡¨ç¤ºä¸€å…±æ‰§è¡Œ <code v-pre>4786677</code> æ¬¡å³ <code v-pre>b.N</code> çš„å€¼</li>
<li>æ¯æ¬¡æ‰§è¡ŒèŠ±è´¹ <code v-pre>250.4ns</code></li>
<li>æ¯æ¬¡æ‰§è¡Œç”³è¯·å¤šå¤§çš„å†…å­˜</li>
<li>æ¯æ¬¡æ‰§è¡Œç”³è¯·å‡ æ¬¡å†…å­˜</li>
</ul>
</blockquote>
</blockquote>
<h4 id="_3-1-slice" tabindex="-1"><a class="header-anchor" href="#_3-1-slice" aria-hidden="true">#</a> 3.1 Slice</h4>
<blockquote>
<p><code v-pre>Slice</code> æ˜¯goä¸­æœ€å¸¸è§çš„ç»“æ„ï¼Œä¹Ÿéå¸¸çš„æ–¹ä¾¿ï¼ŒåŒæ ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„æ€§èƒ½çš„ç‚¹</p>
</blockquote>
<h5 id="_1ã€sliceé¢„åˆ†é…å†…å­˜" tabindex="-1"><a class="header-anchor" href="#_1ã€sliceé¢„åˆ†é…å†…å­˜" aria-hidden="true">#</a> 1ã€Sliceé¢„åˆ†é…å†…å­˜</h5>
<blockquote>
<p>å°½å¯èƒ½åœ¨ä½¿ç”¨ <code v-pre>make()</code> åˆå§‹åŒ–åˆ‡ç‰‡çš„æ—¶å€™æä¾›å®¹é‡ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿½åŠ åˆ‡ç‰‡çš„æ—¶å€™</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124184334270.png" alt="image-20230124184334270 " style="zoom:45%;" /><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124184355567.png" alt="image-20230124184355567 " style="zoom:45%;" /></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124185140964.png" alt="image-20230124185140964"></p>
<p>å¯¹æ¯”çœ‹ä¸‹ä¸¤ç§æƒ…å†µçš„æ€§èƒ½è¡¨ç°ï¼Œå·¦è¾¹æ˜¯æ²¡æœ‰æä¾›åˆå§‹åŒ–å®¹é‡ä¿¡æ¯ï¼Œå³è¾¹æ˜¯è®¾ç½®äº†å®¹é‡å¤§å°ç»“æœä¸­å¯ä»¥çœ‹å‡ºæ‰§è¡Œæ—¶é—´ç›¸å·®å¾ˆå¤šï¼ˆç¬¬äºŒä¸ªæ•°æ®å¯ä»¥ç®€å•çš„çœ‹æˆ1sæ‰§è¡Œäº†å‡ æ¬¡ï¼‰ï¼Œé¢„åˆ†é…åªæœ‰ä¸€æ¬¡å†…å­˜åˆ†é…</p>
</blockquote>
<blockquote>
<p>whyï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰æ€ä¹ˆå¤§çš„æ€§èƒ½å·®å¼‚ï¼Ÿ</p>
<ul>
<li>åˆ‡ç‰‡æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°ç»„ç‰‡æ®µçš„æè¿°
<ul>
<li>åŒ…æ‹¬æ•°ç»„æŒ‡é’ˆ</li>
<li>ç‰‡æ®µçš„é•¿åº¦</li>
<li>ç‰‡æ®µçš„å®¹é‡ï¼ˆä¸æ”¹å˜å†…å­˜åˆ†é…æƒ…å†µä¸‹çš„æœ€å¤§é•¿åº¦ï¼‰</li>
<li>åˆ‡ç‰‡æ“ä½œå¹¶ä¸å¤åˆ¶åˆ‡ç‰‡æŒ‡å‘çš„å…ƒç´ </li>
</ul>
</li>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ä¼šå¤ç”¨åŸæ¥åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„</li>
</ul>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124192410790.png" alt="image-20230124192410790 " style="zoom:50%;" /><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124192434534.png" alt="image-20230124192434534 " style="zoom:50%;" /></p>
<blockquote>
<p><a href="https://ueokande.github.io/go-slice-tricks/" target="_blank" rel="noopener noreferrer">https://ueokande.github.io/go-slice-tricks/<ExternalLinkIcon/></a></p>
</blockquote>
<blockquote>
<p>ä»¥åˆ‡ç‰‡çš„ <code v-pre>append</code> ä¸ºä¾‹ï¼Œ<code v-pre>append</code> æ—¶æœ‰ä¸¤ç§åœºæ™¯:</p>
<ul>
<li>
<p>å½“ <code v-pre>append</code> ä¹‹åçš„é•¿åº¦å°äºç­‰äº<code v-pre>cap</code>ï¼Œå°†ä¼šç›´æ¥åˆ©ç”¨åŸåº•å±‚æ•°ç»„å‰©ä½™çš„ç©ºé—´</p>
</li>
<li>
<p>å½“ <code v-pre>append</code> åçš„é•¿åº¦å¤§äº <code v-pre>cap</code> æ—¶ï¼Œåˆ™ä¼šåˆ†é…ä¸€å—æ›´å¤§çš„åŒºåŸŸæ¥å®¹çº³æ–°çš„åº•å±‚æ•°ç»„</p>
</li>
</ul>
<p>å› æ­¤ï¼Œä¸ºäº†é¿å…å†…å­˜å‘ç”Ÿæ‹·è´ï¼Œå¦‚æœèƒ½å¤ŸçŸ¥é“æœ€ç»ˆçš„åˆ‡ç‰‡çš„å¤§å°ï¼Œé¢„å…ˆè®¾ç½® <code v-pre>cap</code> çš„å€¼èƒ½å¤Ÿé¿å…é¢å¤–çš„å†…å­˜åˆ†é…ï¼Œè·å¾—æ›´å¥½çš„æ€§èƒ½</p>
</blockquote>
</blockquote>
<h5 id="_2ã€å¤§å†…å­˜æœªé‡Šæ”¾" tabindex="-1"><a class="header-anchor" href="#_2ã€å¤§å†…å­˜æœªé‡Šæ”¾" aria-hidden="true">#</a> 2ã€å¤§å†…å­˜æœªé‡Šæ”¾</h5>
<blockquote>
<ul>
<li>åœ¨å·²æœ‰åˆ‡ç‰‡åŸºç¡€ä¸Šåˆ›å»ºåˆ‡ç‰‡ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„åº•å±‚æ•°ç»„</li>
<li>åœºæ™¯</li>
<li>åŸåˆ‡ç‰‡è¾ƒå¤§ï¼Œä»£ç åœ¨åŸåˆ‡ç‰‡åŸºç¡€ä¸Šæ–°å»ºå°åˆ‡ç‰‡</li>
<li>åŸåº•å±‚æ•°ç»„åœ¨å†…å­˜ä¸­æœ‰å¼•ç”¨ï¼Œå¾—ä¸åˆ°é‡Šæ”¾</li>
<li>å¯ä½¿ç”¨ <code v-pre>copy</code> æ›¿ä»£ï¼Œ<code v-pre>re-slice</code></li>
</ul>
</blockquote>
<blockquote>
  <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124200032945.png" alt="image-20230124200032945 " style="zoom:50%;" />
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124200131291.png" alt="image-20230124200131291 " style="zoom:50%;" />
<blockquote>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>run<span class="token operator">=</span><span class="token punctuation">.</span> <span class="token operator">-</span>v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–ç›´æ¥é€‰ä¸­ä¸¤ä¸ªæ–‡ä»¶ä½¿ç”¨ <code v-pre>goland</code> ä¸­çš„ <code v-pre>run</code>ï¼Œé‡Œé¢æœ‰æµ‹è¯•åŠŸèƒ½</p>
</blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124200405982.png" alt="image-20230124200405982"></p>
<p>ä¸¤éƒ¨åˆ†ä»£ç ä½¿ç”¨äº†ä¸åŒçš„é€»è¾‘å– <code v-pre>slice</code> çš„æœ€åä¸¤ä½æ•°åˆ›å»ºæ–°æ•°ç»„ï¼ŒåŒæ—¶ç»Ÿè®¡è¾“å‡ºäº†å†…å­˜å ç”¨ä¿¡æ¯</p>
<p>ç»“æœå·®å¼‚éå¸¸æ˜æ˜¾ï¼Œ<code v-pre>lastBySlice</code> è€—è´¹äº†100.2MB å†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”³è¯·çš„ 100 ä¸ª 1MB å¤§å°çš„å†…å­˜æ²¡æœ‰è¢«å›æ”¶ã€‚å› ä¸ºåˆ‡ç‰‡è™½ç„¶åªä½¿ç”¨äº†æœ€å2ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å› ä¸ºåŸæ¥ 1M çš„åˆ‡ç‰‡å¼•ç”¨äº†ç›¸åŒçš„åº•å±‚æ•°ç»„ï¼Œåº•å±‚æ•°ç»„å¾—ä¸åˆ°é‡Šæ”¾ï¼Œå› æ­¤æœ€ç»ˆ 100MB çš„å†…å­˜å§‹ç»ˆå¾—ä¸åˆ°é‡Šæ”¾ï¼›è€Œ <code v-pre>lastByCopy</code> ä»…æ¶ˆè€—äº† 1.17MB çš„å†…å­˜ï¼Œè¿™æ˜¯å› ä¸ºï¼Œé€šè¿‡copyï¼ŒæŒ‡å‘äº†ä¸€ä¸ªæ–°çš„åº•å±‚æ•°ç»„ï¼Œå½“ <code v-pre>origin</code> ä¸å†è¢«å¼•ç”¨åï¼Œå†…å­˜ä¼šè¢«åƒåœ¾å›æ”¶</p>
</blockquote>
<h4 id="_3-2-map" tabindex="-1"><a class="header-anchor" href="#_3-2-map" aria-hidden="true">#</a> 3.2 Map</h4>
<blockquote>
<p><code v-pre>map</code> é¢„åˆ†é…å†…å­˜</p>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124201434669.png" alt="image-20230124201434669 " style="zoom:43%;" /><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124201457199.png" alt="image-20230124201457199 " style="zoom:43%;" /></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124202201351.png" alt="image-20230124202201351"></p>
<p><sub>å¯èƒ½æ˜¯ç”µè„‘çš„é—®é¢˜ï¼Œæ€»æ˜¯10000ï¼Œä¼°è®¡é…ç½®ä¸å¤ªè¡Œï¼Œè¿ç®—é€Ÿåº¦å¤ªæ…¢äº†</sub></p>
<blockquote>
<ul>
<li>ä¸æ–­å‘ <code v-pre>map</code> ä¸­æ·»åŠ å…ƒç´ çš„æ“ä½œä¼šè§¦å‘ <code v-pre>map</code> çš„æ‰©å®¹</li>
<li>æå‰åˆ†é…å¥½ç©ºé—´å¯ä»¥å‡å°‘å†…å­˜æ‹·è´å’Œ <code v-pre>Rehash</code> çš„æ¶ˆè€—</li>
<li>å»ºè®®æ ¹æ®å®é™…éœ€æ±‚æå‰é¢„ä¼°å¥½éœ€è¦çš„ç©ºé—´</li>
</ul>
</blockquote>
</blockquote>
<h4 id="_3-3-å­—ç¬¦ä¸²å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_3-3-å­—ç¬¦ä¸²å¤„ç†" aria-hidden="true">#</a> 3.3 å­—ç¬¦ä¸²å¤„ç†</h4>
<blockquote>
<p>ä½¿ç”¨ <code v-pre>strings.Builder</code></p>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124203330618.png" alt="image-20230124203330618 " style="zoom:37%;" /><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124203352486.png" alt="image-20230124203352486 " style="zoom:37%;" /></p>
<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124203506740.png" alt="image-20230124203506740 " style="zoom:37%;" />
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124204507640.png" alt="image-20230124204507640"></p>
<p><sub>å¯èƒ½æ˜¯ç”µè„‘å¤ªæ‹‰äº†ï¼Œè·‘Plusæ„Ÿè§‰è·‘äº†ä¸€ä¸‡å¹´ğŸ˜­</sub></p>
<blockquote>
<p>ä½¿ç”¨ï¼‹æ‹¼æ¥æ€§èƒ½æœ€å·®ï¼Œ<code v-pre>strings.Builder</code>ã€<code v-pre>bytes.Buffer</code> ç›¸è¿‘ï¼Œ<code v-pre>strings.Buffer</code> æ›´å¿«</p>
</blockquote>
<ul>
<li>å­—ç¬¦ä¸²åœ¨Goè¯­è¨€ä¸­æ˜¯ä¸å¯å˜ç±»å‹ï¼Œå ç”¨å†…å­˜å¤§å°æ˜¯å›ºå®šçš„</li>
<li>ä½¿ç”¨ï¼‹æ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ†é…å†…å­˜</li>
<li><code v-pre>strings.Builder</code>ã€<code v-pre>bytes.Buffer</code> åº•å±‚éƒ½æ˜¯ <code v-pre>[]byte</code> æ•°ç»„</li>
<li>å†…å­˜æ‰©å®¹ç­–ç•¥ï¼Œä¸éœ€è¦æ¯æ¬¡æ‹¼æ¥é‡æ–°åˆ†é…å†…å­˜</li>
</ul>
</blockquote>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124204853902.png" alt="image-20230124204853902 " style="zoom:32%;" /><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124204921317.png" alt="image-20230124204921317 " style="zoom:32%;" /></p>
<p>å­—ç¬¦ä¸²æ‹¼æ¥å’Œ <code v-pre>slice</code> ä¸€æ ·ï¼ŒåŒæ ·æ”¯æŒé¢„åˆ†é…ï¼Œåœ¨é¢„çŸ¥å­—ç¬¦ä¸²é•¿åº¦çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æå‡æ‹¼æ¥æ€§èƒ½æ³¨æ„è¿™é‡Œèƒ½ç¡®è®¤ <code v-pre>stringbuiler</code> åªæœ‰ä¸€æ¬¡å†…å­˜åˆ†é…ï¼Œ<code v-pre>bytebuffer</code> æœ‰ä¸¤æ¬¡</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124205409847.png" alt="image-20230124205409847"></p>
</blockquote>
<h4 id="_3-4-ç©ºç»“æ„å›¾" tabindex="-1"><a class="header-anchor" href="#_3-4-ç©ºç»“æ„å›¾" aria-hidden="true">#</a> 3.4 ç©ºç»“æ„å›¾</h4>
<blockquote>
<p>æ€§èƒ½ä¼˜åŒ–æœ‰æ—¶æ˜¯æ—¶é—´å’Œç©ºé—´çš„å¹³è¡¡ï¼Œä¹‹å‰æåˆ°çš„éƒ½æ˜¯æé«˜æ—¶é—´æ•ˆç‡çš„ç‚¹ï¼Œå¯¹äºç©ºé—´ä¸Šæ˜¯å¦æœ‰ä¼˜åŒ–çš„æ‰‹æ®µå‘¢ï¼Ÿç©ºç»“æ„ä½“æ˜¯èŠ‚çœå†…å­˜ç©ºé—´çš„ä¸€ä¸ªæ‰‹æ®µ</p>
<ul>
<li>ç©ºç»“æ„ä½“ <code v-pre>struct</code> å®ä¾‹ä¸å æ®ä»»ä½•çš„å†…å­˜ç©ºé—´</li>
<li>å¯ä½œä¸ºå„ç§åœºæ™¯ä¸‹çš„å ä½ç¬¦ä½¿ç”¨
<ul>
<li>èŠ‚çœèµ„æº</li>
<li>ç©ºç»“æ„ä½“æœ¬èº«å…·å¤‡å¾ˆå¼ºçš„è¯­ä¹‰ï¼Œå³è¿™é‡Œä¸éœ€è¦ä»»ä½•å€¼ï¼Œä»…ä½œä¸ºå ä½ç¬¦</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124205533423.png" alt="image-20230124205533423 " style="zoom:50%;" />
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124210454117.png" alt="image-20230124210454117"></p>
<p><sub>å¯èƒ½æ˜¯ç”µè„‘çš„é—®é¢˜ï¼Œæ€»æ˜¯10000ï¼Œä¼°è®¡é…ç½®ä¸å¤ªè¡Œï¼Œè¿ç®—é€Ÿåº¦å¤ªæ…¢äº†</sub></p>
<blockquote>
<ul>
<li>å®ç° <code v-pre>Set</code>ï¼Œå¯ä»¥è€ƒè™‘ç”¨ <code v-pre>map</code> æ¥ä»£æ›¿</li>
<li>å¯¹äºè¿™ä¸ªåœºæ™¯ï¼Œåªéœ€è¦ç”¨åˆ° <code v-pre>map</code> çš„é”®ï¼Œè€Œä¸éœ€è¦å€¼</li>
<li>å³ä½¿æ˜¯å°† <code v-pre>map</code> çš„å€¼è®¾ç½®ä¸º <code v-pre>bool</code> ç±»å‹ï¼Œä¹Ÿä¼šå¤šå æ® 1 ä¸ªå­—èŠ‚ç©ºé—´</li>
</ul>
</blockquote>
</blockquote>
<h4 id="_3-5-atomicåŒ…" tabindex="-1"><a class="header-anchor" href="#_3-5-atomicåŒ…" aria-hidden="true">#</a> 3.5 atomicåŒ…</h4>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124211908872.png" alt="image-20230124211908872 " style="zoom:45%;" /><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124211938735.png" alt="image-20230124211938735 " style="zoom:45%;" /></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230124211843297.png" alt="image-20230124211843297"></p>
<ul>
<li>é”çš„å®ç°æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæ¥å®ç°ï¼Œå±äºç³»ç»Ÿè°ƒç”¨</li>
<li><code v-pre>atomic</code> æ“ä½œæ˜¯é€šè¿‡ç¡¬ä»¶å®ç°ï¼Œæ•ˆç‡æ¯”é”é«˜</li>
<li><code v-pre>sync.Mutex</code> åº”è¯¥ç”¨æ¥ä¿æŠ¤ä¸€æ®µé€»è¾‘ï¼Œä¸ä»…ä»…ç”¨äºä¿æŠ¤ä¸€ä¸ªå˜é‡</li>
<li>å¯¹äºéæ•°å€¼æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ <code v-pre>atomic.Value</code>ï¼Œèƒ½æ‰¿è½½ä¸€ä¸ª <code v-pre>interface{}</code></li>
</ul>
</blockquote>
<h4 id="_3-6-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_3-6-å°ç»“" aria-hidden="true">#</a> 3.6 å°ç»“</h4>
<blockquote>
<ul>
<li>é¿å…å¸¸è§çš„æ€§èƒ½é™·é˜±å¯ä»¥ä¿è¯å¤§éƒ¨åˆ†ç¨‹åºçš„æ€§èƒ½</li>
<li>æ™®é€šåº”ç”¨ä»£ç ï¼Œä¸è¦ä¸€å‘³åœ°è¿½æ±‚ç¨‹åºçš„æ€§èƒ½</li>
<li>è¶Šé«˜çº§çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µè¶Šå®¹æ˜“å‡ºç°é—®é¢˜</li>
<li>åœ¨æ»¡è¶³æ­£ç¡®å¯é ã€ç®€æ´æ¸…æ™°çš„è´¨é‡è¦æ±‚çš„å‰æä¸‹æé«˜ç¨‹åºæ€§èƒ½</li>
</ul>
</blockquote>
<h2 id="goæ€§èƒ½ä¼˜åŒ–-æ€§èƒ½è°ƒä¼˜å®æˆ˜-é’è®­è¥ç¬”è®°" tabindex="-1"><a class="header-anchor" href="#goæ€§èƒ½ä¼˜åŒ–-æ€§èƒ½è°ƒä¼˜å®æˆ˜-é’è®­è¥ç¬”è®°" aria-hidden="true">#</a> Goæ€§èƒ½ä¼˜åŒ–-æ€§èƒ½è°ƒä¼˜å®æˆ˜ | é’è®­è¥ç¬”è®°</h2>
<h3 id="_1-ç®€ä»‹-1" tabindex="-1"><a class="header-anchor" href="#_1-ç®€ä»‹-1" aria-hidden="true">#</a> 1. ç®€ä»‹</h3>
<blockquote>
<p>æ€§èƒ½è°ƒä¼˜åŸåˆ™</p>
<ul>
<li>è¦<strong>ä¾é æ•°æ®</strong>ä¸æ˜¯çŒœæµ‹</li>
<li>è¦<strong>å®šä½æœ€å¤§ç“¶é¢ˆ</strong>è€Œä¸æ˜¯ç»†ææœ«èŠ‚</li>
<li>ä¸è¦<strong>è¿‡æ—©</strong>ä¼˜åŒ–</li>
<li>ä¸è¦<strong>è¿‡åº¦</strong>ä¼˜åŒ–</li>
</ul>
</blockquote>
<h3 id="_2-æ€§èƒ½åˆ†æå·¥å…·-pprof" tabindex="-1"><a class="header-anchor" href="#_2-æ€§èƒ½åˆ†æå·¥å…·-pprof" aria-hidden="true">#</a> 2. æ€§èƒ½åˆ†æå·¥å…·-pprof</h3>
<blockquote>
<p>æ€§èƒ½è°ƒä¼˜çš„å‰ææ˜¯å¯¹åº”ç”¨ç¨‹åºæ€§èƒ½è¡¨ç°æœ‰å®é™…çš„æ•°æ®æŒ‡æ ‡ï¼Œä¾‹å¦‚å¸Œæœ›çŸ¥é“åº”ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹è€—è´¹äº†å¤šå°‘<code v-pre>CPU</code>ã€<code v-pre>Memory</code>ï¼Œè€Œå¯¹ <code v-pre>go</code> æ¥è¯´ï¼Œ<code v-pre>pprof</code> æ˜¯ç”¨äºæ•°æ®å¯è§†åŒ–å’Œåˆ†ææ€§èƒ½åˆ†ææ•°æ®çš„éå¸¸æ–¹ä¾¿çš„å·¥å…·</p>
</blockquote>
<h4 id="_2-1-åŠŸèƒ½ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_2-1-åŠŸèƒ½ç®€ä»‹" aria-hidden="true">#</a> 2.1 åŠŸèƒ½ç®€ä»‹</h4>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125104945896.png" alt="image-20230125104945896"></p>
<ul>
<li>åˆ†æï¼šæœ‰ä¸¤ç§å¯è§†åŒ–æ–¹å¼</li>
<li>å·¥å…·ï¼šå¯ä»¥åœ¨ <code v-pre>runtime/pprof</code> ä¸­æ‰¾åˆ°æºç ï¼ŒåŒæ—¶ <code v-pre>Golang</code> çš„ <code v-pre>http</code> æ ‡å‡†åº“ä¸­ä¹Ÿå¯¹ <code v-pre>pprof</code> åšäº†ä¸€äº›å°è£…ï¼Œèƒ½è®©ä½ åœ¨ <code v-pre>http</code> æœåŠ¡ä¸­ç›´æ¥ä½¿ç”¨å®ƒ</li>
<li>é‡‡æ ·ï¼šå®ƒå¯ä»¥é‡‡æ ·ç¨‹åºè¿è¡Œæ—¶çš„ <code v-pre>CPU</code>ã€å †å†…å­˜ã€<code v-pre>goroutine</code>ã€é”ç«äº‰ã€é˜»å¡è°ƒç”¨å’Œç³»ç»Ÿçº¿ç¨‹çš„ä½¿ç”¨æ•°æ®</li>
<li>å±•ç¤ºï¼šç”¨æˆ·å¯ä»¥é€šè¿‡åˆ—è¡¨ã€è°ƒç”¨å›¾ã€ç«ç„°å›¾ã€æºç ã€åæ±‡ç¼–ç­‰è§†å›¾å»å±•ç¤ºé‡‡é›†åˆ°çš„æ€§èƒ½æŒ‡æ ‡ï¼Œæ–¹ä¾¿åˆ†æ</li>
</ul>
<blockquote>
<p>è¯´è¿™ä¹ˆå¤šä¸å¦‚æ¥ä¸ªå®è·µé¡¹ç›®æ¥ç†Ÿæ‚‰ <code v-pre>pprof</code> çš„ä½¿ç”¨ğŸ˜†</p>
</blockquote>
</blockquote>
<h4 id="_2-2-æ’æŸ¥å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#_2-2-æ’æŸ¥å®æˆ˜" aria-hidden="true">#</a> 2.2 æ’æŸ¥å®æˆ˜</h4>
<h5 id="_1ã€æ­å»º-pprof-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_1ã€æ­å»º-pprof-é¡¹ç›®" aria-hidden="true">#</a> 1ã€æ­å»º pprof é¡¹ç›®</h5>
<blockquote>
<p>æ—¢ç„¶æ˜¯ç»ƒä¹ æ’æŸ¥æ€§èƒ½é—®é¢˜ï¼Œé‚£ä¹ˆå°±éœ€è¦æ„é€ ä¸€ä¸ªæœ‰é—®é¢˜çš„å‡ºç°ï¼Œç„¶ååˆ©ç”¨ <code v-pre>pprof</code> æ¥å®šä½æ€§èƒ½é—®é¢˜ç‚¹ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå·²ç»æ„é€ äº†ä¸€äº›æ€§èƒ½é—®é¢˜æ¥ä¾›æˆ‘ä»¬ç»ƒä¹ </p>
<p><sub>å¼€æºé¡¹ç›®çš„è¯¦ç»†ä»‹ç»å’Œæ“ä½œæ­¥éª¤ï¼š<a href="https://blog.wolfogre.com/posts/go-ppof-practice/" target="_blank" rel="noopener noreferrer">https://blog.wolfogre.com/posts/go-ppof-practice/<ExternalLinkIcon/></a></sub></p>
<div class="language-go line-numbers-mode" data-ext="go"><pre v-pre class="language-go"><code><span class="token comment">// ä½¿ç”¨å‘½ä»¤å°†å…¶ä¸‹è½½ä¸‹æ¥</span>
<span class="token keyword">go</span> get <span class="token operator">-</span>d github<span class="token punctuation">.</span>com<span class="token operator">/</span>wolfogre<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>pprof<span class="token operator">-</span>practice
<span class="token comment">// ç§»åŠ¨åˆ°è¯¥é¡¹ç›®æ–‡ä»¶ä¸‹</span>
cd $GOPATH<span class="token operator">/</span>src<span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>wolfogre<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>pprof<span class="token operator">-</span>practice
<span class="token comment">// æ„å»ºè¯¥é¡¹ç›®</span>
<span class="token keyword">go</span> build
<span class="token comment">// æ‰§è¡Œè¯¥é¡¹ç›®ï¼Œæ§åˆ¶å°é‡Œåº”è¯¥ä¼šä¸åœçš„æ‰“å°æ—¥å¿—ï¼Œéƒ½æ˜¯ä¸€äº›â€œçŒ«ç‹—è™é¼ åœ¨ä¸åœåœ°åƒå–æ‹‰æ’’â€çš„å±è¯ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œä¸ç”¨ç»†çœ‹</span>
<span class="token punctuation">.</span><span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>pprof<span class="token operator">-</span>practice
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h5 id="_2ã€æµè§ˆå™¨æŸ¥çœ‹æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#_2ã€æµè§ˆå™¨æŸ¥çœ‹æŒ‡æ ‡" aria-hidden="true">#</a> 2ã€æµè§ˆå™¨æŸ¥çœ‹æŒ‡æ ‡</h5>
<blockquote>
<p>æµè§ˆå™¨æ‰“å¼€<a href="http://localhost:6060/debug/pprof/%EF%BC%8C%E4%BC%9A%E7%9C%8B%E5%88%B0%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:6060/debug/pprof/ï¼Œä¼šçœ‹åˆ°ï¼š<ExternalLinkIcon/></a></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125120355850.png" alt="image-20230125120355850"></p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>alloc</td>
<td>å†…å­˜åˆ†é…æƒ…å†µçš„é‡‡æ ·ä¿¡æ¯</td>
</tr>
<tr>
<td>blocks</td>
<td>é˜»å¡æ“ä½œæƒ…å†µçš„é‡‡æ ·ä¿¡æ¯</td>
</tr>
<tr>
<td>cmdline</td>
<td>æ˜¾ç¤ºç¨‹åºå¯åŠ¨å‘½ä»¤åŠå‚æ•°</td>
</tr>
<tr>
<td>goroutine</td>
<td>å½“å‰æ‰€æœ‰åç¨‹çš„å †æ ˆä¿¡æ¯</td>
</tr>
<tr>
<td>heap</td>
<td>å †ä¸Šå†…å­˜ä½¿ç”¨æƒ…å†µçš„é‡‡æ ·ä¿¡æ¯</td>
</tr>
<tr>
<td>mutex</td>
<td>é”äº‰ç”¨æƒ…å†µçš„é‡‡æ ·ä¿¡æ¯</td>
</tr>
<tr>
<td>profile</td>
<td>CPU å ç”¨æƒ…å†µçš„é‡‡æ ·ä¿¡æ¯</td>
</tr>
<tr>
<td>threadcreate</td>
<td>ç³»ç»Ÿçº¿ç¨‹åˆ›å»ºæƒ…å†µçš„é‡‡æ ·ä¿¡æ¯</td>
</tr>
<tr>
<td>trace</td>
<td>ç¨‹åºè¿è¡Œè·Ÿè¸ªä¿¡æ¯</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å› ä¸º <code v-pre>cmdline</code> æ˜¾ç¤ºè¿è¡Œè¿›ç¨‹çš„å‘½ä»¤ï¼Œæ²¡æœ‰ä»€ä¹ˆå®éªŒä»·å€¼ï¼Œ<code v-pre>trace</code> éœ€è¦å¦å¤–çš„å·¥å…·è§£æï¼Œä¸”ä¸æœ¬æ–‡ä¸»é¢˜å…³ç³»ä¸å¤§ï¼Œ<code v-pre>threadcreate</code> æ¶‰åŠçš„æƒ…å†µåå¤æ‚ä¸é€æ˜ï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªç±»å‹çš„é‡‡æ ·ä¿¡æ¯è¿™é‡Œæš‚ä¸”ä¸æã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰ç±»å‹çš„é‡‡æ ·ä¿¡æ¯æœ¬æ–‡éƒ½ä¼šæ¶‰åŠåˆ°ï¼Œä¸”ç‚¸å¼¹ç¨‹åºå·²ç»ä¸ºæ¯ä¸€ç§ç±»å‹çš„é‡‡æ ·ä¿¡æ¯åŸ‹è—äº†ä¸€ä¸ªå¯¹åº”çš„æ€§èƒ½é—®é¢˜ï¼Œä»¥ä¾›æˆ‘ä»¬è¿›è¡Œå®è·µã€‚</p>
</blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125132259244.png" alt="image-20230125132259244"></p>
<p>çœ‹åˆ°çš„æ•°æ®å¯è¯»æ€§å¾ˆå·®ï¼Œé•¿è¿™æ ·ï¼Œå¯ä»¥çœ‹å‡ºä¸€äº›ä¿¡æ¯ä½†å¾ˆéš¾é˜…è¯»å®ƒï¼Œæ‰€ä»¥ä¸€ä¼šå„¿æˆ‘ä»¬ä¼šå€ŸåŠ© <code v-pre>pprof</code> å·¥å…·å¸®æˆ‘ä»¬ã€Œé˜…è¯»ã€è¿™äº›æŒ‡æ ‡ã€‚</p>
</blockquote>
<h5 id="_3ã€cpu" tabindex="-1"><a class="header-anchor" href="#_3ã€cpu" aria-hidden="true">#</a> 3ã€CPU</h5>
<blockquote>
<p>æˆ‘ä»¬å…ˆä»CPUé—®é¢˜æ’æŸ¥å¼€å§‹ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿå·¥å…·å¯èƒ½ä¸åŒï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„å·¥å…·çœ‹çœ‹ç¨‹åºè¿›ç¨‹çš„èµ„æºå ç”¨ï¼ŒCPUå ç”¨äº†20.1%ï¼Œæ˜¾ç„¶è¿™é‡Œæ˜¯æœ‰é—®é¢˜çš„ã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125135132516.png" alt="image-20230125135132516"></p>
<p><code v-pre>pprof</code> çš„é‡‡ç¥¥ç»“æœæ˜¯å°†ä¸€æ®µæ—¶é—´å†…çš„ä¿¡æ¯æ±‡æ€»è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æ‹¿åˆ°è¿™ä¸ª <code v-pre>profile</code> æ–‡ä»¶ã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨æš´éœ²çš„æ¥å£é“¾æ¥ä¸‹è½½æ–‡ä»¶åä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ <code v-pre>pprof</code> å·¥å…·è¿æ¥è¿™ä¸ªæ¥å£ä¸‹è½½éœ€è¦çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code v-pre>go tool pprof +é‡‡æ ·é“¾æ¥</code> æ¥å¯åŠ¨é‡‡æ ·ã€‚</p>
<blockquote>
<p>go tool pprof <a href="http://loaclhost:6060/debug/pprof/profile?seconds=10" target="_blank" rel="noopener noreferrer">http://loaclhost:6060/debug/pprof/profile?seconds=10<ExternalLinkIcon/></a></p>
</blockquote>
<p>é“¾æ¥ä¸­å°±æ˜¯ã€ç‚¸å¼¹ã€‘ç¨‹åºæš´éœ²å‡ºæ¥çš„æ¨å£ï¼Œé“¾æ¥ç»“å°¾çš„ <code v-pre>profile</code> ä»£è¡¨é‡‡æ ·çš„å¯¹è±¡æ˜¯ <code v-pre>CPU</code> ä½¿ç”¨ã€‚å¦‚æœä½ åœ¨æµè§ˆå™¨é‡Œç›´æ¥æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œä¼šå¯åŠ¨ä¸€ä¸ª60ç§’çš„é‡‡æ ·ï¼Œå¹¶åœ¨ç»“æŸåä¸‹è½½æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬åŠ ä¸Š <code v-pre>seconds=10</code> çš„å‚æ•°ï¼Œè®©å®ƒé‡‡æ ·åç§’ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œæˆ‘ä»¬éœ€è¦çš„é‡‡æ ·æ•°æ®å·²ç»è®°å½•å’Œä¸‹è½½å®Œæˆï¼Œå¹¶å±•ç¤ºå‡º <code v-pre>pprof</code> ç»ˆç«¯ã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125134212904.png" alt="image-20230125134212904"></p>
</blockquote>
<h6 id="å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤" aria-hidden="true">#</a> å‘½ä»¤</h6>
<p>1ã€topN</p>
<blockquote>
<p>æŸ¥çœ‹å ç”¨èµ„æºæœ€å¤šçš„å‡½æ•°</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125134526335.png" alt="image-20230125134526335"></p>
<table>
<thead>
<tr>
<th>flat</th>
<th>å½“å‰å‡½æ•°æœ¬èº«çš„æ‰§è¡Œè€—æ—¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>flat%</td>
<td>flatå CPUæ€»æ—¶é—´çš„æ¯”ä¾‹</td>
</tr>
<tr>
<td>sum%</td>
<td>ä¸Šé¢æ¯ä¸€è¡Œçš„flat%æ€»å’Œ</td>
</tr>
<tr>
<td>cum</td>
<td>æŒ‡å½“å‰å‡½æ•°æœ¬èº«åŠ ä¸Šå…¶è°ƒç”¨å‡½æ•°çš„æ€»è€—æ—¶</td>
</tr>
<tr>
<td>cum%</td>
<td>cumCPUæ—¶é—´çš„æ¯”ä¾‹</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å¯ä»¥ç®€å•çš„ç†è§£ä¸ºæ•°å­—è¶Šå¤§å ç”¨æƒ…å†µè¶Šä¸¥é‡</p>
</blockquote>
<p>è¡¨æ ¼å‰é¢æè¿°äº†é‡‡æ ·çš„æ€»ä½“ä¿¡æ¯ï¼Œé»˜è®¤ä¼šå±•ç¤ºèµ„æºå ç”¨æœ€é«˜çš„ 10 ä¸ªå‡½æ•°ï¼Œå¦‚æœåªéœ€è¦ç›´çœ‹æœ€é«˜çš„ N ä¸ªå‡½æ•°ï¼Œå¯ä»¥è¾“å…¥ <code v-pre>topN</code>ï¼Œä¾‹å¦‚æŸ¥çœ‹æœ€é«˜çš„ 3 ä¸ªè°ƒç”¨ï¼Œè¾“å…¥ <code v-pre>top3</code> å¯ä»¥çœ‹åˆ°è¡¨æ ¼çš„ç¬¬ä¸€è¡Œé‡Œï¼Œ<code v-pre>Tiger.Eat</code> å‡½æ•°æœ¬èº«å ç”¨ 3.41 ç§’çš„ <code v-pre>CPU</code> æ—¶é—´ï¼Œå æ€»æ—¶é—´çš„ 96.60%ï¼Œæ˜¾ç„¶é—®é¢˜å°±æ˜¯è¿™é‡Œå¼•èµ·çš„ã€‚</p>
<blockquote>
<p><em>ä½†æ˜¯å¯ä»¥çœ‹åˆ°ä¸Šå›¾ï¼Œflatå’Œcumæœ‰çš„æ˜¯ç›¸ç­‰çš„ï¼Œæœ‰ç‚¹ä¸ç›¸ç­‰ï¼Œæœ‰çš„ä¸€è¾¹ç›´æ¥ä¸º0äº†ï¼Œwhyï¼Ÿ</em></p>
<p><code v-pre>cum-flat</code> å¾—åˆ°çš„æ˜¯å‡½æ•°ä¸­<strong>è°ƒç”¨å…¶ä»–å‡½æ•°æ‰€æ¶ˆè€—çš„èµ„æº</strong>ï¼Œæ‰€ä»¥åœ¨å‡½æ•°ä¸­æ²¡æœ‰å¯¹å…¶ä»–å‡½æ•°è¿›è¡Œè°ƒç”¨æ—¶ï¼Œ<code v-pre>cum-flat=0</code>ï¼Œä¹Ÿå°±æ˜¯ <code v-pre>flat=cum</code> ç›¸åº”åœ°ï¼Œå‡½æ•°ä¸­é™¤äº†è°ƒç”¨å¦å¤–çš„å‡½æ•°ï¼Œæ²¡æœ‰å…¶ä»–é€»è¾‘æ—¶ï¼Œ<code v-pre>flat=0</code></p>
</blockquote>
</blockquote>
<p>2ã€list</p>
<blockquote>
<p>æ ¹æ®æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ä»£ç è¡Œ</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125140152152.png" alt="image-20230125140152152"></p>
<p><code v-pre>list</code> å‘½ä»¤ä¼šæ ¹æ®åé¢ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ä»£ç ï¼Œå¹¶æŒ‰è¡Œå±•ç¤ºå‡ºæ¯ä¸€è¡Œçš„å ç”¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç¬¬ 24 è¡Œæœ‰ä¸€ä¸ª100äº¿æ¬¡çš„ç©ºå¾ªç¯ï¼Œå ç”¨äº† 3.41 ç§’çš„CPUæ—¶é—´ï¼Œé—®é¢˜å°±åœ¨è¿™å„¿äº†ï¼Œå®šä½æˆåŠŸã€‚</p>
</blockquote>
<p>3ã€web</p>
<blockquote>
<p>è°ƒç”¨å…³ç³»å¯è§†åŒ–</p>
</blockquote>
<h5 id="_4ã€heap-å †å†…å­˜" tabindex="-1"><a class="header-anchor" href="#_4ã€heap-å †å†…å­˜" aria-hidden="true">#</a> 4ã€Heap-å †å†…å­˜</h5>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬æ³¨é‡Šæ‰é—®é¢˜ä»£ç ï¼Œé‡æ–°è¿è¡Œåï¼ŒCPUæ¶ˆè€—ä¸€ä¸‹åŠ ä¸‹æ¥äº†ï¼Œç„¶è€Œå†…å­˜ä½¿ç”¨ä¾ç„¶å¾ˆé«˜ã€‚</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125143636244.png" alt="image-20230125143636244"></p>
</blockquote>
<p>åé¢å› ä¸ºæŸäº›é—®é¢˜ï¼Œæ— æ³•æ‰§è¡Œ graphvizï¼Œè¯·å¤§å®¶ç§»æ­¥<a href="https://blog.wolfogre.com/posts/go-ppof-practice/%EF%BC%8C%E4%BB%A5%E5%90%8E%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BC%9A%E8%A1%A5%E5%85%A8%E3%80%82" target="_blank" rel="noopener noreferrer">https://blog.wolfogre.com/posts/go-ppof-practice/ï¼Œä»¥åè§£å†³äº†ä¼šè¡¥å…¨ã€‚<ExternalLinkIcon/></a></p>
<h4 id="_2-3-é‡‡æ ·è¿‡ç¨‹å’ŒåŸç†" tabindex="-1"><a class="header-anchor" href="#_2-3-é‡‡æ ·è¿‡ç¨‹å’ŒåŸç†" aria-hidden="true">#</a> 2.3 é‡‡æ ·è¿‡ç¨‹å’ŒåŸç†</h4>
<h5 id="_2-3-1-cpu" tabindex="-1"><a class="header-anchor" href="#_2-3-1-cpu" aria-hidden="true">#</a> 2.3.1 CPU</h5>
<blockquote>
<ul>
<li>é‡‡æ ·å¯¹è±¡ï¼šå‡½æ•°è°ƒç”¨å’Œå®ƒä»¬å ç”¨çš„æ—¶é—´</li>
<li>é‡‡æ ·ç‡ï¼š100æ¬¡/ç§’ï¼Œå›ºå®šå€¼</li>
<li>é‡‡æ ·æ—¶é—´ï¼šä»æ‰‹åŠ¨å¯åŠ¨åˆ°æ‰‹åŠ¨ç»“æŸ</li>
</ul>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125151936002.png" alt="image-20230125151936002"></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125153111796.png" alt="image-20230125153111796"></p>
</blockquote>
<h5 id="_2-3-2-heap-å †å†…å­˜" tabindex="-1"><a class="header-anchor" href="#_2-3-2-heap-å †å†…å­˜" aria-hidden="true">#</a> 2.3.2 Heap-å †å†…å­˜</h5>
<blockquote>
<ul>
<li>é‡‡æ ·ç¨‹åºé€šè¿‡å†…å­˜åˆ†é…å™¨åœ¨å †ä¸Šåˆ†é…å’Œé‡Šæ”¾çš„å†…å­˜ï¼Œè®°å½•åˆ†é…/é‡Šæ”¾çš„å¤§å°å’Œæ•°é‡</li>
<li>é‡‡æ ·ç‡ï¼šæ¯åˆ†é…512KBè®°å½•ä¸€æ¬¡ï¼Œå¯åœ¨è¿è¡Œå¼€å¤´ä¿®æ”¹ï¼Œ1ä¸ºæ¯æ¬¡åˆ†é…å‡è®°å½•</li>
<li>é‡‡æ ·æ—¶é—´ï¼šä»ç¨‹åºè¿è¡Œå¼€å§‹åˆ°é‡‡æ ·æ—¶</li>
<li>é‡‡æ ·æŒ‡æ ‡ï¼š<code v-pre>alloc space</code>ã€<code v-pre>alloc_objects</code>ã€<code v-pre>inuse_space</code>ã€<code v-pre>inuse_objects</code></li>
<li>è®¡ç®—æ–¹å¼ï¼š<code v-pre>inuse = alloc - free</code></li>
</ul>
</blockquote>
<h5 id="_2-3-3-goroutine-åç¨‹-threadcreate-çº¿ç¨‹åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#_2-3-3-goroutine-åç¨‹-threadcreate-çº¿ç¨‹åˆ›å»º" aria-hidden="true">#</a> 2.3.3 Goroutine-åç¨‹&amp; ThreadCreate-çº¿ç¨‹åˆ›å»º</h5>
<blockquote>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125163123710.png" alt="image-20230125163123710"></p>
</blockquote>
<h5 id="_2-3-4-block-é˜»å¡-mutex-é”" tabindex="-1"><a class="header-anchor" href="#_2-3-4-block-é˜»å¡-mutex-é”" aria-hidden="true">#</a> 2.3.4 Block-é˜»å¡&amp; Mutex-é”</h5>
<blockquote></blockquote>
<h5 id="_2-3-5-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_2-3-5-å°ç»“" aria-hidden="true">#</a> 2.3.5 å°ç»“</h5>
<blockquote>
<ul>
<li>æŒæ¡å¸¸ç”¨ <code v-pre>pprof</code> å·¥å…·åŠŸèƒ½</li>
<li>çµæ´»è¿ç”¨ <code v-pre>pprof</code> å·¥å…·åˆ†æè§£å†³æ€§èƒ½é—®é¢˜</li>
<li>äº†è§£ <code v-pre>pprof</code> çš„é‡‡æ ·è¿‡ç¨‹å’Œå·¥ä½œåŸç†</li>
</ul>
</blockquote>
<h3 id="_3-æ€§èƒ½è°ƒä¼˜æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-æ€§èƒ½è°ƒä¼˜æ¡ˆä¾‹" aria-hidden="true">#</a> 3. æ€§èƒ½è°ƒä¼˜æ¡ˆä¾‹</h3>
<blockquote>
<p>ä»‹ç»å®é™…ä¸šåŠ¡æœåŠ¡æ€§èƒ½ä¼˜åŒ–çš„æ¡ˆä¾‹ï¼Œå¯¹é€»è¾‘ç›¸å¯¹å¤æ‚çš„ç¨‹åºå¦‚ä½•è¿›è¡Œæ€§èƒ½è°ƒä¼˜</p>
</blockquote>
<h4 id="_3-1-ä¸šåŠ¡æœåŠ¡ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-1-ä¸šåŠ¡æœåŠ¡ä¼˜åŒ–" aria-hidden="true">#</a> 3.1 ä¸šåŠ¡æœåŠ¡ä¼˜åŒ–</h4>
<blockquote>
<p>ä¸šåŠ¡æœåŠ¡ä¸€èˆ¬æŒ‡ç›´æ¥æä¾›åŠŸèƒ½çš„ç¨‹åºï¼Œæ¯”å¦‚ä¸“é—¨å¤„ç†ç”¨æˆ·è¯„è®ºæ“ä½œçš„ç¨‹åº</p>
</blockquote>
<h5 id="_1ã€åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1ã€åŸºæœ¬æ¦‚å¿µ" aria-hidden="true">#</a> 1ã€åŸºæœ¬æ¦‚å¿µ</h5>
<blockquote>
<ul>
<li>æœåŠ¡ï¼šèƒ½å•ç‹¬éƒ¨ç½²ï¼Œæ‰¿è½½ä¸€å®šåŠŸèƒ½çš„ç¨‹åº</li>
<li>ä¾èµ–ï¼š<code v-pre>Service A</code> çš„åŠŸèƒ½å®ç°ä¾èµ– <code v-pre>Service B</code> çš„å“åº”ç»“æœï¼Œç§°ä¸º <code v-pre>Service A</code> ä¾èµ– <code v-pre>Service B</code></li>
<li>è°ƒç”¨é“¾è·¯ï¼šèƒ½æ”¯æŒä¸€ä¸ªæ¥å£è¯·æ±‚çš„ç›¸å…³æœåŠ¡é›†åˆåŠå…¶ç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
<li>åŸºç¡€åº“ï¼šå…¬å…±çš„å·¥å…·åŒ…ã€ä¸­é—´ä»¶</li>
</ul>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125153941565.png" alt="image-20230125153941351"></p>
<p>ä¸Šé¢æ˜¯ç³»ç»Ÿéƒ¨ç½²çš„ç®€å•ç¤ºæ„å›¾ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ç»è¿‡ç½‘å…³è½¬å‘ï¼Œç”±ä¸åŒçš„ä¸šåŠ¡æœåŠ¡å¤„ç†ï¼Œä¸šåŠ¡æœåŠ¡å¯èƒ½ä¾èµ–å…¶ä»–çš„æœåŠ¡ï¼Œä¹Ÿå¯èƒ½ä¼šä¾èµ–å­˜å‚¨ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ç»„ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ä¸šåŠ¡æœåŠ¡ä¼˜åŒ–ä¸ºä¾‹ï¼Œè¯´æ˜æ€§èƒ½è°ƒä¼˜çš„æµç¨‹ï¼Œå›¾ä¸­çš„ <code v-pre>Service B</code> è¢« <code v-pre>Service A</code> ä¾èµ–ï¼ŒåŒæ—¶ä¹Ÿä¾èµ–äº†å­˜å‚¨å’Œ <code v-pre>Service D</code></p>
</blockquote>
<h5 id="_2ã€æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2ã€æµç¨‹" aria-hidden="true">#</a> 2ã€æµç¨‹</h5>
<blockquote>
<ul>
<li>
<p>å»ºç«‹æœåŠ¡æ€§èƒ½è¯„ä¼°æ‰‹æ®µ</p>
</li>
<li>
<p>åˆ†ææ€§èƒ½æ•°æ®ï¼Œå®šä½æ€§èƒ½ç“¶é¢ˆ</p>
</li>
<li>
<p>æ ¸å¿ƒï¼Œè¿™é‡Œä¹Ÿæ˜¯ç”¨çš„ <code v-pre>pprof</code> é‡‡æ ·æ€§èƒ½æ•°æ®ï¼Œåˆ†ææœåŠ¡çš„è¡¨ç°</p>
</li>
<li>
<p>é‡ç‚¹ä¼˜åŒ–é¡¹æ”¹é€ </p>
</li>
<li>
<p>è¿›è¡Œé‡æ„ä»£ç ï¼Œä½¿ç”¨æ›´é«˜æ•ˆçš„ç»„ä»¶</p>
</li>
<li>
<p>ä¼˜åŒ–æ•ˆæœéªŒè¯</p>
</li>
<li>
<p>é€šè¿‡å‹æµ‹å¯¹æ¯”å’Œæ­£ç¡®æ€§éªŒè¯ä¹‹åï¼ŒæœåŠ¡å¯ä»¥ä¸Šçº¿è¿›è¡Œå®é™…æ”¶ç›Šè¯„ä¼°</p>
</li>
</ul>
<blockquote>
<p>æ•´ä½“çš„æµç¨‹å¯ä»¥å¾ªç¯å¹¶è¡Œæ‰§è¡Œï¼Œæ¯ä¸ªä¼˜åŒ–ç‚¹å¯èƒ½ä¸åŒï¼Œå¯ä»¥åˆ†åˆ«è¯„ä¼°éªŒè¯</p>
</blockquote>
</blockquote>
<h5 id="_3ã€å»ºç«‹æœåŠ¡æ€§èƒ½è¯„ä¼°æ‰‹æ®µ" tabindex="-1"><a class="header-anchor" href="#_3ã€å»ºç«‹æœåŠ¡æ€§èƒ½è¯„ä¼°æ‰‹æ®µ" aria-hidden="true">#</a> 3ã€å»ºç«‹æœåŠ¡æ€§èƒ½è¯„ä¼°æ‰‹æ®µ</h5>
<blockquote>
<ul>
<li>
<p>æœåŠ¡æ€§èƒ½è¯„ä¼°æ–¹å¼</p>
</li>
<li>
<p>å•ç‹¬ <code v-pre>benchmark</code> æ— æ³•æ»¡è¶³å¤æ‚é€»è¾‘åˆ†æ</p>
</li>
<li>
<p>ä¸åŒè´Ÿè½½æƒ…å†µä¸‹æ€§èƒ½è¡¨ç°å·®å¼‚ï¼ˆä¸‹å›¾æ˜¯è´Ÿè½½å’Œå•æ ¸qpsçš„å¯¹åº”æ•°æ®ï¼‰</p>
</li>
</ul>
 <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125155448314.png" alt="image-20230125155448314 " style="zoom:35%;" />
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125155549368.png" alt="image-20230125155549368"></p>
<ul>
<li>
<p>è¯·æ±‚æµé‡æ„é€ </p>
</li>
<li>
<p>ä¸åŒè¯·æ±‚å‚æ•°è¦†ç›–é€»è¾‘ä¸åŒ</p>
</li>
<li>
<p>çº¿ä¸ŠçœŸå®æµé‡æƒ…å†µï¼Œæ‰èƒ½åˆ†æçœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆ</p>
</li>
<li>
<p>å‹æµ‹èŒƒå›´ï¼ˆä¼šå½•åˆ¶çº¿ä¸Šæµé‡è¯·æ±‚ï¼Œé€šè¿‡æ§åˆ¶å›æ”¾é€Ÿåº¦æ¥å¯¹æœåŠ¡è¿›è¡Œæµ‹è¯•ï¼‰</p>
</li>
<li>
<p>å•æœºå™¨å‹æµ‹</p>
</li>
<li>
<p>é›†ç¾¤å‹æµ‹</p>
</li>
<li>
<p>æ€§èƒ½æ•°æ®é‡‡é›†</p>
</li>
<li>
<p>å•æœºæ€§èƒ½æ•°æ®</p>
</li>
<li>
<p>é›†ç¾¤æ€§èƒ½æ•°æ®</p>
</li>
</ul>
<blockquote>
<p>è¯„ä¼°æ‰‹æ®µå»ºç«‹åï¼Œå®ƒçš„äº§å‡ºå®é™…æ˜¯ä¸€ä¸ªæœåŠ¡çš„æ€§èƒ½æŒ‡æ ‡åˆ†ææŠ¥å‘Š</p>
</blockquote>
<blockquote>
<p>å®é™…çš„å‹æµ‹æŠ¥å‘Šæˆªå›¾ï¼Œä¼šç»Ÿè®¡å‹æµ‹æœŸé—´æœåŠ¡çš„å„é¡¹ç›‘æ§æŒ‡æ ‡ï¼ŒåŒ…æ‹¬qpsï¼Œå»¶è¿Ÿç­‰å†…å®¹ï¼ŒåŒæ—¶åœ¨å‹æµ‹è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥é‡‡é›†æœåŠ¡çš„ <code v-pre>pprof</code> æ•°æ®ï¼Œä½¿ç”¨ä¹‹å‰çš„æ–¹å¼åˆ†ææ€§èƒ½é—®é¢˜</p>
</blockquote>
<p>æœ‰äº†æœåŠ¡ä¼˜åŒ–å‰çš„æ€§èƒ½æŠ¥å‘Šå’Œä¸€äº›æ€§èƒ½é‡‡æ ·æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæ€§èƒ½ç“¶é¢ˆåˆ†æäº†</p>
<p>ä¸šåŠ¡æœåŠ¡å¸¸è§çš„æ€§èƒ½é—®é¢˜å¯èƒ½æ˜¯ä½¿ç”¨åŸºç¡€ç»„ä»¶ä¸è§„ï¼Œæ¯”å¦‚è¿™é‡Œé€šè¿‡ç«ç„°å›¾çœ‹å‡º <code v-pre>JSON</code> çš„è§£æéƒ¨åˆ†å ç”¨äº†è¾ƒå¤šçš„CPUèµ„æºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å®šä½åˆ°å…·ä½“çš„é€»è¾‘ä»£ç ï¼Œæ˜¯åœ¨æ¯æ¬¡ä½¿ç”¨é…ç½®æ—¶éƒ½ä¼šè¿›è¡Œ <code v-pre>JSON</code> è§£æï¼Œæ‹¿åˆ°é…ç½®é¡¹ï¼Œå®é™…ç»„ä»¶å†…éƒ¨æä¾›äº†ç¼“å­˜æœºåˆ¶ï¼Œåªæœ‰æ•°æ®å˜æ›´çš„æ—¶å€™æ‰éœ€è¦é‡æ–°è§£æJSON</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125160740003.png" alt="image-20230125160740003"></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125160805399.png" alt="image-20230125160805399"></p>
</blockquote>
<h5 id="_4ã€åˆ†ææ€§èƒ½æ•°æ®-å®šä½æ€§èƒ½ç“¶é¢ˆ" tabindex="-1"><a class="header-anchor" href="#_4ã€åˆ†ææ€§èƒ½æ•°æ®-å®šä½æ€§èƒ½ç“¶é¢ˆ" aria-hidden="true">#</a> 4ã€åˆ†ææ€§èƒ½æ•°æ®ï¼Œå®šä½æ€§èƒ½ç“¶é¢ˆ</h5>
<blockquote>
<ul>
<li>
<p>ä½¿ç”¨åº“ä¸è§„èŒƒ</p>
<blockquote>
<p>è¿˜æœ‰æ˜¯ç±»ä¼¼æ—¥å¿—ä½¿ç”¨ä¸è§„èŒƒï¼Œä¸€éƒ¨åˆ†æ˜¯è°ƒè¯•æ—¥å¿—å‘å¸ƒåˆ°çº¿ä¸Šï¼Œä¸€éƒ¨åˆ†æ˜¯çº¿ä¸ŠæœåŠ¡åœ¨ä¸åŒçš„è°ƒç”¨é“¾è·¯ä¸Šæ•°æ®æœ‰å·®åˆ«ï¼Œæµ‹è¯•åœºæ™¯æ—¥å¿—é‡è¿˜å¥½ï¼Œä½†æ˜¯åˆ°äº†çœŸå®çº¿ä¸Šå…¨é‡åœºæ™¯ï¼Œä¼šå¯¼è‡´æ—¥å¿—é‡å¢åŠ ï¼Œå½±å“æ€§èƒ½</p>
<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125161012809.png" alt="image-20230125161012809 " style="zoom:37%;" />
</blockquote>
</li>
<li>
<p>é«˜å¹¶å‘åœºæ™¯ä¼˜åŒ–ä¸è¶³</p>
<blockquote>
<p>å¦å¤–å¸¸è§çš„æ€§èƒ½é—®é¢˜å°±æ˜¯é«˜å¹¶å‘åœºæ™¯çš„ä¼˜åŒ–ä¸è¶³ï¼Œä¸Šè€…æ˜¯æœåŠ¡é«˜å³°æœŸçš„ç«ç„°å›¾ï¼Œä¸‹è€…æ˜¯ä½å³°æœŸçš„ç«ç„°å›¾ï¼Œå¯ä»¥å‘ç° <code v-pre>metrics</code>ï¼Œå³ç›‘æ§ç»„ä»¶çš„ <code v-pre>CPU</code> èµ„æºå ç”¨å˜åŒ–è¾ƒå¤§ï¼Œä¸»è¦åŸå› æ˜¯ç›‘æ§æ•°æ®ä¸ŠæŠ¥æ˜¯åŒæ­¥è¯·æ±‚ï¼Œåœ¨è¯·æ±‚é‡ä¸Šæ¶¨ï¼Œç›‘æ§æ‰“ç‚¹æ•°æ®é‡å¢åŠ æ—¶ï¼Œè¾¾åˆ°æ€§èƒ½ç“¶é¢ˆï¼Œé€ æˆé˜»å¡ï¼Œå½±å“ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œåç»­æ˜¯æ”¹æˆå¼‚æ­¥ä¸ŠæŠ¥çš„æœºåˆ¶æå‡äº†æ€§èƒ½</p>
<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125161315255.png" alt="image-20230125161315255 " style="zoom:43%;" />
<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125161402087.png" alt="image-20230125161402087 " style="zoom:43%;" />
</blockquote>
</li>
</ul>
</blockquote>
<h5 id="_5ã€é‡ç‚¹ä¼˜åŒ–é¡¹æ”¹é€ " tabindex="-1"><a class="header-anchor" href="#_5ã€é‡ç‚¹ä¼˜åŒ–é¡¹æ”¹é€ " aria-hidden="true">#</a> 5ã€é‡ç‚¹ä¼˜åŒ–é¡¹æ”¹é€ </h5>
<blockquote>
<ul>
<li>æ­£ç¡®æ€§æ˜¯åŸºç¡€</li>
<li>å“åº”æ•°æ® <code v-pre>diff</code></li>
<li>çº¿ä¸Šè¯·æ±‚æ•°æ®å½•åˆ¶å›æ”¾</li>
<li>æ–°æ—§é€»è¾‘æ¥å£æ•°æ® <code v-pre>diff</code></li>
</ul>
<p>æ€§èƒ½å¿§åŒ–çš„å‰ææ˜¯ä¿è¯æ­£ç¡®æ€§ï¼Œæ‰€ä»¥åœ¨å˜åŠ¨è¾ƒå¤§çš„æ€§èƒ½ä¼˜åŒ–ä¸Šçº¿ä¹‹å‰ï¼Œè¿˜éœ€è¦è¿›è¡Œæ­£ç¡®æ€§éªŒè¯ï¼Œå› ä¸ºçº¿ä¸Šçš„åœºæ™¯å’Œæµç¨‹å¤ªå¤šï¼Œæ‰€ä»¥è¦å€ŸåŠ©è‡ªåŠ¨åŒ–æ‰‹æ®µæ¥ä¿è¯ä¼˜åŒ–åç¨‹åºçš„æ­£ç¡®æ€§</p>
<p>åŒæ ·æ˜¯çº¿ä¸Šè¯·æ±‚çš„å½•åˆ¶ï¼Œä¸è¿‡è¿™é‡Œä¸ä»…åŒ…å«è¯·æ±‚å‚æ•°å½•åˆ¶ï¼Œè¿˜ä¼šå½•åˆ¶çº¿ä¸Šçš„è¿”å›å†…å®¹ï¼Œé‡æ”¾æ—¶å¯¹æ¯”çº¿ä¸Šçš„è¿”å›å†…å®¹å’Œä¼˜åŒ–åæœåŠ¡çš„è¿”å›å†…å®¹è¿›è¡Œæ­£ç¡®æ€§éªŒè¯</p>
<p>æ¯”å¦‚å›¾ä¸­ä½œè€…ä¿¡æ¯ç›¸å…³çš„å­—æ®µå€¼åœ¨ä¼˜åŒ–æœ‰æœ‰å˜åŒ–ï¼Œéœ€è¦è¿›ä¸€æ­¥æ’æŸ¥åŸå› </p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125161748262.png" alt="image-20230125161748262"></p>
</blockquote>
<h5 id="_6ã€ä¼˜åŒ–æ•ˆæœéªŒè¯" tabindex="-1"><a class="header-anchor" href="#_6ã€ä¼˜åŒ–æ•ˆæœéªŒè¯" aria-hidden="true">#</a> 6ã€ä¼˜åŒ–æ•ˆæœéªŒè¯</h5>
<blockquote>
<ul>
<li>é‡å¤å‹æµ‹éªŒè¯</li>
<li>ä¸Šçº¿è¯„ä¼°ä¼˜åŒ–æ•ˆæœ</li>
<li>å…³æ³¨æœåŠ¡ç›‘æ§</li>
<li>é€æ­¥æ”¾é‡</li>
<li>æ”¶é›†æ€§èƒ½æ•°æ®</li>
</ul>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125162011970.png" alt="image-20230125162011970"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125162037251.png" alt="image-20230125162037251"></p>
<p>éªŒè¯åˆ†ä¸¤éƒ¨åˆ†ï¼Œé¦–å…ˆä¾ç„¶æ˜¯ç”¨åŒæ ·çš„æ•°æ®å¯¹ä¼˜åŒ–åçš„æœåŠ¡è¿›è¡Œå‹æµ‹ï¼Œå¯ä»¥çœ‹åˆ°ç°åœ¨çš„æ•°æ®æ¯”ä¼˜åŒ–å‰å¥½å¾ˆå¤šï¼Œèƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„qpsæ­£å¼ä¸Šçº¿çš„æ—¶å€™ä¼šé€æ­¥æ”¾é‡ï¼Œè®°å½•çœŸæ­£çš„ä¼˜åŒ–æ•ˆæœ</p>
<p>åŒæ—¶å‹æµ‹å¹¶ä¸èƒ½ä¿è¯å’Œçº¿ä¸Šè¡¨ç°å®Œå…¨ä¸€è‡´ï¼Œæœ‰æ—¶è¿˜è¦é€šè¿‡çº¿ä¸Šçš„è¡¨ç°å†è¿›è¡Œåˆ†ææ”¹è¿›ï¼Œæ˜¯ä¸ªé•¿æœŸçš„è¿‡ç¨‹</p>
</blockquote>
<h5 id="_7ã€è¿›ä¸€æ­¥ä¼˜åŒ–-æœåŠ¡æ•´ä½“é“¾è·¯åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_7ã€è¿›ä¸€æ­¥ä¼˜åŒ–-æœåŠ¡æ•´ä½“é“¾è·¯åˆ†æ" aria-hidden="true">#</a> 7ã€è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒæœåŠ¡æ•´ä½“é“¾è·¯åˆ†æ</h5>
<blockquote>
<ul>
<li>è§„èŒƒä¸Šæ¸¸æœåŠ¡è°ƒç”¨æ¥å£ï¼Œæ˜ç¡®åœºæ™¯éœ€æ±‚</li>
<li>åˆ†æé“¾è·¯ï¼Œé€šè¿‡ä¸šåŠ¡æµç¨‹ä¼˜åŒ–æå‡æœåŠ¡æ€§èƒ½</li>
</ul>
<p>åœ¨ç†Ÿæ‚‰æœåŠ¡çš„æ•´ä½“éƒ¨ç½²æƒ…å†µåï¼Œå¯ä»¥é’ˆå¯¹å…·ä½“çš„æ¥å£é“¾è·¯è¿›è¡Œåˆ†æè°ƒä¼˜ï¼Œæ¯”å¦‚ <code v-pre>Service A</code> è°ƒç”¨ <code v-pre>Service B</code> æ˜¯å¦å­˜åœ¨é‡å¤è°ƒç”¨çš„æƒ…å†µï¼Œè°ƒ <code v-pre>Service B</code> æœåŠ¡æ—¶ï¼Œæ˜¯å¦æ›´å°çš„ç»“æœæ•°æ®é›†å°±èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ¥å£æ˜¯å¦ä¸€å®šè¦å®æ—¶æ•°æ®ï¼Œèƒ½å¦åœ¨ <code v-pre>Service A</code> å±‚è¿›è¡Œç¼“å­˜ï¼Œå‡è½»è°ƒç”¨å‹åŠ›</p>
<p>è¿™ç§ä¼˜åŒ–åªä½¿ç”¨ä¸ç‰¹å®šä¸šåŠ¡åœºæ™¯ï¼Œé€‚ç”¨èŒƒå›´çª„ï¼Œä¸è¿‡èƒ½æ›´åˆç†çš„åˆ©ç”¨èµ„æº</p>
</blockquote>
<h4 id="_3-2-åŸºç¡€åº“ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-2-åŸºç¡€åº“ä¼˜åŒ–" aria-hidden="true">#</a> 3.2 åŸºç¡€åº“ä¼˜åŒ–</h4>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/1273/image-20230125162835686.png" alt="image-20230125162835686"></p>
<h4 id="_3-3-goè¯­è¨€ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_3-3-goè¯­è¨€ä¼˜åŒ–" aria-hidden="true">#</a> 3.3 Goè¯­è¨€ä¼˜åŒ–</h4>
<blockquote>
<p>é€‚ç”¨èŒƒå›´æœ€å¹¿çš„ä¼˜åŒ–ï¼Œå°±æ˜¯é’ˆå¯¹Goæœ¬èº«è¿›è¡Œçš„ä¼˜åŒ–ï¼Œä¼šä¼˜åŒ–ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼Œæ„å»ºæ›´é«˜æ•ˆçš„goå‘è¡Œç‰ˆæœ¬</p>
</blockquote>
<blockquote>
<p>ç¼–è¯‘å™¨&amp;è¿è¡Œæ—¶ä¼˜åŒ–</p>
<ul>
<li>ä¼˜åŒ–å†…å­˜åˆ†é…ç­–ç•¥</li>
<li>ä¼˜åŒ–ä»£ç ç¼–è¯‘æµç¨‹ï¼Œç”Ÿæˆæ›´é«˜æ•ˆçš„ç¨‹åº</li>
<li>å†…éƒ¨å‹æµ‹éªŒè¯</li>
<li>æ¨å¹¿ä¸šåŠ¡æœåŠ¡è½åœ°éªŒè¯</li>
</ul>
<p>ä¼˜ç‚¹</p>
<ul>
<li>æ¥å…¥ç®€å•ï¼Œåªéœ€è¦è°ƒæ•´ç¼–è¯‘é…ç½®</li>
<li>é€šç”¨æ€§å¼º</li>
</ul>
</blockquote>
<h3 id="_4-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_4-æ€»ç»“" aria-hidden="true">#</a> 4. æ€»ç»“</h3>
<blockquote>
<ul>
<li>æ€§èƒ½è°ƒä¼˜åŸåˆ™
<ul>
<li>è¦ä¾é æ•°æ®ä¸æ˜¯çŒœæµ‹</li>
</ul>
</li>
<li>æ€§èƒ½åˆ†æå·¥å…· <code v-pre>pprof</code>
<ul>
<li>ç†Ÿç»ƒä½¿ç”¨ <code v-pre>pprof</code> å·¥å…·æ’æŸ¥æ€§èƒ½é—®é¢˜å¹¶äº†è§£å…¶åŸºæœ¬åŸç†</li>
</ul>
</li>
<li>æ€§èƒ½è°ƒä¼˜
<ul>
<li>ä¿è¯æ­£ç¡®æ€§</li>
<li>å®šä½ä¸»è¦ç“¶é¢ˆ</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="goè‡ªåŠ¨å†…å­˜ç®¡ç†-é’è®­è¥ç¬”è®°" tabindex="-1"><a class="header-anchor" href="#goè‡ªåŠ¨å†…å­˜ç®¡ç†-é’è®­è¥ç¬”è®°" aria-hidden="true">#</a> Goè‡ªåŠ¨å†…å­˜ç®¡ç† | é’è®­è¥ç¬”è®°</h2>
<h3 id="_1-è‡ªåŠ¨å†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_1-è‡ªåŠ¨å†…å­˜ç®¡ç†" aria-hidden="true">#</a> 1. è‡ªåŠ¨å†…å­˜ç®¡ç†</h3>
<h4 id="_1-1-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1-1-æ¦‚å¿µ" aria-hidden="true">#</a> 1.1 æ¦‚å¿µ</h4>
<blockquote>
<ul>
<li>
<p>åŠ¨æ€å†…å­˜</p>
</li>
<li>
<p>ç¨‹åºåœ¨è¿è¡Œæ—¶æ ¹æ®éœ€æ±‚åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼š<code v-pre>malloc()</code></p>
</li>
<li>
<p>è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼ˆåƒåœ¾å›æ”¶ï¼‰ï¼šç”±ç¨‹åºè¯­è¨€çš„è¿è¡Œæ—¶ç³»ç»Ÿå›æ”¶åŠ¨æ€å†…å­˜</p>
</li>
<li>
<p>é¿å…æ‰‹åŠ¨å†…å­˜ç®¡ç†ï¼Œä¸“æ³¨äºå®ç°ä¸šåŠ¡é€»è¾‘</p>
</li>
<li>
<p>ä¿è¯å†…å­˜ä½¿ç”¨çš„<strong>æ­£ç¡®æ€§</strong>å’Œ<strong>å®‰å…¨æ€§</strong>ï¼š<code v-pre>double-free problem</code>ï¼Œ<code v-pre>use-after-free problem</code></p>
</li>
<li>
<p>ä¸‰ä¸ªä»»åŠ¡</p>
</li>
<li>
<p>ä¸ºæ–°å¯¹è±¡åˆ†é…ç©ºé—´</p>
</li>
<li>
<p>æ‰¾åˆ°å­˜æ´»å¯¹è±¡</p>
</li>
<li>
<p>å›æ”¶æ­»äº¡å¯¹è±¡çš„å†…å­˜ç©ºé—´</p>
</li>
<li>
<p><code v-pre>Mutator</code>ï¼šä¸šåŠ¡çº¿ç¨‹ï¼Œåˆ†é…æ–°å¯¹è±¡ï¼Œä¿®æ”¹å¯¹è±¡æŒ‡å‘å…³ç³»</p>
</li>
<li>
<p><code v-pre>Collector</code>ï¼š<code v-pre>GC</code> çº¿ç¨‹ï¼Œæ‰¾åˆ°å­˜æ´»å¯¹è±¡ï¼Œå›æ”¶æ­»äº¡å¯¹è±¡çš„å†…å­˜ç©ºé—´</p>
</li>
<li>
<p><code v-pre>Serial GC</code>ï¼šåªæœ‰ä¸€ä¸ª <code v-pre>collector</code></p>
</li>
<li>
<p><code v-pre>Parallel GC</code>ï¼šæ”¯æŒå¤šä¸ª <code v-pre>collectors</code> åŒæ—¶å›æ”¶çš„ <code v-pre>GC</code> ç®—æ³•</p>
</li>
<li>
<p><code v-pre>Concurrent GC</code>ï¼š<code v-pre>mutator(s)</code> å’Œ <code v-pre>collector(s)</code> å¯ä»¥<strong>åŒæ—¶æ‰§è¡Œ</strong></p>
</li>
<li>
<p><strong>Collectorså¿…é¡»æ„ŸçŸ¥å¯¹è±¡æŒ‡å‘å…³ç³»çš„æ”¹å˜ï¼</strong></p>
</li>
<li>
<p>è¯„ä»·GCç®—æ³•</p>
</li>
<li>
<p>å®‰å…¨æ€§ï¼ˆSafetyï¼‰ï¼šä¸èƒ½å›æ”¶å­˜æ´»çš„å¯¹è±¡		<strong><font color=#e31>åŸºæœ¬è¦æ±‚</font></strong></p>
</li>
<li>
<p>ååç‡ï¼ˆThroughputï¼‰ï¼š1 - ï¼ˆGCæ—¶é—´ / ç¨‹åºæ‰§è¡Œæ—¶é—´ï¼‰<strong><font color=#e31>èŠ±åœ¨GCä¸Šçš„æ—¶é—´</font></strong></p>
</li>
<li>
<p>æš‚åœæ—¶é—´ï¼ˆPause timeï¼‰ï¼šstop the worldï¼ˆSTWï¼‰<strong><font color=#e31>ä¸šåŠ¡æ˜¯å¦æ„ŸçŸ¥</font></strong></p>
</li>
<li>
<p>å†…å­˜å¼€é”€ï¼ˆSpace overheadï¼‰<strong><font color=#e31>GCå…ƒæ•°æ®å¼€é”€</font></strong></p>
</li>
<li>
<p>è¿½è¸ªåƒåœ¾å›æ”¶ï¼ˆTracing garbage collectionï¼‰</p>
</li>
<li>
<p>å¼•ç”¨è®¡æ•°ï¼ˆReference countingï¼‰</p>
</li>
</ul>
</blockquote>
<h4 id="_1-2-è¿½è¸ªåƒåœ¾å›æ”¶" tabindex="-1"><a class="header-anchor" href="#_1-2-è¿½è¸ªåƒåœ¾å›æ”¶" aria-hidden="true">#</a> 1.2 è¿½è¸ªåƒåœ¾å›æ”¶</h4>
<ul>
<li>å¯¹è±¡è¢«å›æ”¶çš„æ¡ä»¶:æŒ‡é’ˆæŒ‡å‘å…³ç³»ä¸å¯è¾¾çš„å¯¹è±¡</li>
<li>æ ‡è®°æ ¹å¯¹è±¡
<ul>
<li>é™æ€å˜é‡ã€å…¨å±€å˜é‡ã€å¸¸é‡ã€çº¿ç¨‹æ ˆç­‰</li>
</ul>
</li>
<li>æ ‡è®°ï¼šæ‰¾åˆ°å¯è¾¾å¯¹è±¡
<ul>
<li>æ±‚æŒ‡é’ˆæŒ‡å‘å…³ç³»çš„ä¼ é€’é—­åŒ…ï¼šä»æ ¹å¯¹è±¡å‡ºå‘ï¼Œæ‰¾åˆ°æ‰€æœ‰å¯è¾¾å¯¹è±¡</li>
</ul>
</li>
<li>æ¸…ç†ï¼šæ‰€æœ‰ä¸å¯è¾¾å¯¹è±¡
<ul>
<li>å°†å­˜æ´»å¯¹è±¡åˆ¶åˆ°å¦å¤–çš„å†…å­˜ç©ºé—´ï¼ˆCopying GCï¼‰</li>
<li>å°†æ­»äº¡å¯¹è±¡çš„å†…å­˜æ ‡è®°ä¸ºâ€œå¯åˆ†é…â€ï¼ˆMark-sweep GCï¼‰</li>
<li>ç§»åŠ¨å¹¶æ•´ç†å­˜æ´»å¯¹è±¡ï¼ˆMark-compact GCï¼‰</li>
</ul>
</li>
</ul>
<font color=#e31>æ ¹æ®å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨ä¸åŒçš„æ ‡è®°å’Œæ¸…ç†ç­–ç•¥</font><h4 id="_1-3-åˆ†ä»£gc-generational-gc" tabindex="-1"><a class="header-anchor" href="#_1-3-åˆ†ä»£gc-generational-gc" aria-hidden="true">#</a> 1.3 åˆ†ä»£GCï¼ˆGenerational GCï¼‰</h4>
<blockquote>
<ul>
<li>åˆ†ä»£å‡è¯´ï¼ˆGenerational hypothesisï¼‰ï¼šmost objects die young</li>
<li><code v-pre>lntuition</code>ï¼šå¾ˆå¤šå¯¹è±¡åœ¨åˆ†é…å‡ºæ¥åå¾ˆå¿«å°±ä¸å†ä½¿ç”¨äº†</li>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å¹´é¾„ï¼šç»å†è¿‡GCçš„æ¬¡æ•°</li>
<li>ç›®çš„ï¼šå¯¹å¹´è½»å’Œè€å¹´çš„å¯¹è±¡ï¼Œåˆ¶å®šä¸åŒçš„GCç­–ç•¥ï¼Œ<strong>é™ä½æ•´ä½“å†…å­˜ç®¡ç†çš„å¼€é”€</strong></li>
<li>ä¸åŒå¹´é¾„çš„å¯¹è±¡å¤„äº <code v-pre>heap</code> çš„ä¸åŒåŒºåŸŸ</li>
</ul>
<p>å¹´è½»ä»£ï¼ˆYoung generationï¼‰</p>
<ul>
<li>å¸¸è§„çš„å¯¹è±¡åˆ†é…</li>
<li>ç”±äº<strong>å­˜æ´»å¯¹è±¡å¾ˆå°‘</strong>ï¼Œå¯ä»¥é‡‡ç”¨ <code v-pre>copying collection</code></li>
<li>GC ååç‡å¾ˆé«˜</li>
</ul>
<p>è€å¹´ä»£ï¼ˆOld generationï¼‰</p>
<ul>
<li><strong>å¯¹è±¡è¶‹å‘äºä¸€ç›´æ´»ç€ï¼Œåå¤å¤åˆ¶å¼€é”€è¾ƒå¤§</strong></li>
<li>å¯ä»¥é‡‡ç”¨ <code v-pre>mark-sweep collection</code></li>
</ul>
</blockquote>
<h4 id="_1-4-å¼•ç”¨è®¡æ•°" tabindex="-1"><a class="header-anchor" href="#_1-4-å¼•ç”¨è®¡æ•°" aria-hidden="true">#</a> 1.4 å¼•ç”¨è®¡æ•°</h4>
<blockquote>
<ul>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å¼•ç”¨æ•°ç›®</li>
<li>å¯¹è±¡å­˜æ´»çš„æ¡ä»¶:å½“ä¸”ä»…å½“å¼•ç”¨æ•°å¤§äº0</li>
</ul>
<p>ä¼˜ç‚¹</p>
<ul>
<li>å†…å­˜ç®¡ç†çš„æ“ä½œè¢«å¹³æ‘Šåˆ°ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­</li>
<li>å†…å­˜ç®¡ç†ä¸éœ€è¦äº†è§£ <code v-pre>runtime</code> çš„å®ç°ç»†èŠ‚ï¼šC++ æ™ºèƒ½æŒ‡é’ˆï¼ˆ<code v-pre>smart pointer</code>ï¼‰</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>ç»´æŠ¤å¼•ç”¨è®¡æ•°çš„å¼€é”€è¾ƒå¤§ï¼šé€šè¿‡<strong>åŸå­æ“ä½œ</strong>ä¿è¯å¯¹å¼•ç”¨è®¡æ•°æ“ä½œçš„<strong>åŸå­æ€§</strong>å’Œ<strong>å¯è§æ€§</strong></li>
<li>æ— æ³•å›æ”¶ç¯å½¢æ•°æ®ç»“æ„â€”â€”<code v-pre>weak reference</code></li>
<li>å†…å­˜å¼€é”€ï¼šæ¯ä¸ªå¯¹è±¡éƒ½å¼•å…¥çš„é¢å¤–å†…å­˜ç©ºé—´å­˜å‚¨å¼•ç”¨æ•°ç›®</li>
<li>å›æ”¶å†…å­˜æ—¶ä¾ç„¶å¯èƒ½å¼•å‘æš‚åœ</li>
</ul>
</blockquote>
<h4 id="_1-5-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_1-5-æ€»ç»“" aria-hidden="true">#</a> 1.5 æ€»ç»“</h4>
<blockquote>
<ul>
<li>è‡ªåŠ¨å†…å­˜ç®¡ç†çš„èƒŒæ™¯å’Œæ„ä¹‰</li>
<li>æ¦‚å¿µå’Œè¯„ä»·æ–¹æ³•</li>
<li>è¿½è¸ªåƒåœ¾å›æ”¶304</li>
<li>å¼•ç”¨è®¡æ•°</li>
<li>åˆ†ä»£GC</li>
<li>å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œåœ¨ä¸€ç›´åœ¨è‡´åŠ›äºè§£å†³è‡ªåŠ¨å†…å­˜ç®¡ç†æŠ€æœ¯çš„ä¸è¶³ä¹‹å¤„</li>
<li>PLDI'22 Low-Latency,High-Throughput Garbage Collection</li>
</ul>
</blockquote>
<h3 id="_2-go-å†…å­˜ç®¡ç†åŠä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_2-go-å†…å­˜ç®¡ç†åŠä¼˜åŒ–" aria-hidden="true">#</a> 2. Go å†…å­˜ç®¡ç†åŠä¼˜åŒ–</h3>
</div></template>


